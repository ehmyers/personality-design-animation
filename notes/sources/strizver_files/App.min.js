var console=window.console||{};console.log=console.log||$.noop;console.warn=console.warn||$.noop;console.error=console.error||$.noop;console.info=console.info||$.noop;(function(){function u(a){console.log("$f.fireEvent",[].slice.call(a))}function y(c){if(!c||typeof c!="object"){return c}var a=new c.constructor();for(var b in c){if(c.hasOwnProperty(b)){a[b]=y(c[b])}}return a}function A(f,c){if(!f){return}var a,b=0,d=f.length;if(d===undefined){for(a in f){if(c.call(f[a],a,f[a])===false){break}}}else{for(var e=f[0];b<d&&c.call(e,b,e)!==false;e=f[++b]){}}return f}function q(a){return document.getElementById(a)}function w(c,b,a){if(typeof b!="object"){return c}if(c&&b){A(b,function(d,e){if(!a||typeof e!="function"){c[d]=e}})}return c}function B(e){var c=e.indexOf(".");if(c!=-1){var b=e.substring(0,c)||"*";var a=e.substring(c+1,e.length);var d=[];A(document.getElementsByTagName(b),function(){if(this.className&&this.className.indexOf(a)!=-1){d.push(this)}});return d}}function t(a){a=a||window.event;if(a.preventDefault){a.stopPropagation();a.preventDefault()}else{a.returnValue=false;a.cancelBubble=true}return false}function x(c,a,b){c[a]=c[a]||[];c[a].push(b)}function s(){return"_"+(""+Math.random()).substring(2,10)}var v=function(f,d,e){var c=this;var b={};var g={};c.index=d;if(typeof f=="string"){f={url:f}}w(this,f,true);A(("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop").split(","),function(){var h="on"+this;if(h.indexOf("*")!=-1){h=h.substring(0,h.length-1);var i="onBefore"+h.substring(2);c[i]=function(j){x(g,i,j);return c}}c[h]=function(j){x(g,h,j);return c};if(d==-1){if(c[i]){e[i]=c[i]}if(c[h]){e[h]=c[h]}}});w(this,{onCuepoint:function(j,i){if(arguments.length==1){b.embedded=[null,j];return c}if(typeof j=="number"){j=[j]}var h=s();b[h]=[j,i];if(e.isLoaded()){e._api().fp_addCuepoints(j,d,h)}return c},update:function(i){w(c,i);if(e.isLoaded()){e._api().fp_updateClip(i,d)}var h=e.getConfig();var j=(d==-1)?h.clip:h.playlist[d];w(j,i,true)},_fireEvent:function(i,l,j,h){if(i=="onLoad"){A(b,function(n,D){if(D[0]){e._api().fp_addCuepoints(D[0],d,n)}});return false}h=h||c;if(i=="onCuepoint"){var m=b[l];if(m){return m[1].call(e,h,j)}}if(l&&"onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(i)!=-1){w(h,l);if(l.metaData){if(!h.duration){h.duration=l.metaData.duration}else{h.fullDuration=l.metaData.duration}}}var k=true;A(g[i],function(){k=this.call(e,h,l,j)});return k}});if(f.onCuepoint){var a=f.onCuepoint;c.onCuepoint.apply(c,typeof a=="function"?[a]:a);delete f.onCuepoint}A(f,function(h,i){if(typeof i=="function"){x(g,h,i);delete f[h]}});if(d==-1){e.onCuepoint=this.onCuepoint}};var z=function(b,d,c,f){var e={};var a=this;var g=false;if(f){w(e,f)}A(d,function(h,i){if(typeof i=="function"){e[h]=i;delete d[h]}});w(this,{animate:function(k,l,j){if(!k){return a}if(typeof l=="function"){j=l;l=500}if(typeof k=="string"){var i=k;k={};k[i]=l;l=500}if(j){var h=s();e[h]=j}if(l===undefined){l=500}d=c._api().fp_animate(b,k,l,h);return a},css:function(i,j){if(j!==undefined){var h={};h[i]=j;i=h}d=c._api().fp_css(b,i);w(a,d);return a},show:function(){this.display="block";c._api().fp_showPlugin(b);return a},hide:function(){this.display="none";c._api().fp_hidePlugin(b);return a},toggle:function(){this.display=c._api().fp_togglePlugin(b);return a},fadeTo:function(k,j,i){if(typeof j=="function"){i=j;j=500}if(i){var h=s();e[h]=i}this.display=c._api().fp_fadeTo(b,k,j,h);this.opacity=k;return a},fadeIn:function(i,h){return a.fadeTo(1,i,h)},fadeOut:function(i,h){return a.fadeTo(0,i,h)},getName:function(){return b},getPlayer:function(){return c},_fireEvent:function(i,h,j){if(i=="onUpdate"){var k=c._api().fp_getPlugin(b);if(!k){return}w(a,k);delete a.methods;if(!g){A(k.methods,function(){var m=""+this;a[m]=function(){var n=[].slice.call(arguments);var D=c._api().fp_invoke(b,m,n);return D==="undefined"||D===undefined?a:D}});g=true}}var l=e[i];if(l){l.apply(a,h);if(i.substring(0,1)=="_"){delete e[i]}}}})};function p(f,k,H){var e=this,G=null,F,l,g=[],j={},b={},i,m,n,d,a,h;w(e,{id:function(){return i},isLoaded:function(){return(G!==null)},getParent:function(){return f},hide:function(C){if(C){f.style.height="0px"}if(G){G.style.height="0px"}return e},show:function(){f.style.height=h+"px";if(G){G.style.height=a+"px"}return e},isHidden:function(){return G&&parseInt(G.style.height,10)===0},load:function(C){if(!G&&e._fireEvent("onBeforeLoad")!==false){A(o,function(){this.unload()});F=f.innerHTML;if(F&&!flashembed.isSupported(k.version)){f.innerHTML=""}flashembed(f,k,{config:H});if(C){C.cached=true;x(b,"onLoad",C)}}return e},unload:function(){if(F.replace(/\s/g,"")!==""){if(e._fireEvent("onBeforeUnload")===false){return e}try{if(G){G.fp_close();e._fireEvent("onUnload")}}catch(C){}G=null;f.innerHTML=F}return e},getClip:function(C){if(C===undefined){C=d}return g[C]},getCommonClip:function(){return l},getPlaylist:function(){return g},getPlugin:function(C){var E=j[C];if(!E&&e.isLoaded()){var D=e._api().fp_getPlugin(C);if(D){E=new z(C,D,e);j[C]=E}}return E},getScreen:function(){return e.getPlugin("screen")},getControls:function(){return e.getPlugin("controls")},getConfig:function(C){return C?y(H):H},getFlashParams:function(){return k},loadPlugin:function(M,E,O,N){if(typeof O=="function"){N=O;O={}}var D=N?s():"_";e._api().fp_loadPlugin(M,E,O,D);var C={};C[D]=N;var P=new z(M,null,e,C);j[M]=P;return P},getState:function(){return G?G.fp_getState():-1},play:function(D,C){function E(){if(D!==undefined){e._api().fp_play(D,C)}else{e._api().fp_play()}}if(G){E()}else{e.load(function(){E()})}return e},getVersion:function(){var D="flowplayer.js 3.1.4";if(G){var C=G.fp_getVersion();C.push(D);return C}return D},_api:function(){if(!G){throw"Flowplayer "+e.id()+" not loaded when calling an API method"}return G},setClip:function(C){e.setPlaylist([C]);return e},getIndex:function(){return n}});A(("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut").split(","),function(){var C="on"+this;if(C.indexOf("*")!=-1){C=C.substring(0,C.length-1);var D="onBefore"+C.substring(2);e[D]=function(E){x(b,D,E);return e}}e[C]=function(E){x(b,C,E);return e}});A(("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed").split(","),function(){var C=this;e[C]=function(E,D){if(!G){return e}var J=null;if(E!==undefined&&D!==undefined){J=G["fp_"+C](E,D)}else{J=(E===undefined)?G["fp_"+C]():G["fp_"+C](E)}return J==="undefined"||J===undefined?e:J}});e._fireEvent=function(W){if(typeof W=="string"){W=[W]}var X=W[0],U=W[1],S=W[2],R=W[3],Q=0;if(H.debug){u(W)}if(!G&&X=="onLoad"&&U=="player"){G=G||q(m);a=G.clientHeight;A(g,function(){this._fireEvent("onLoad")});A(j,function(I,J){J._fireEvent("onUpdate")});l._fireEvent("onLoad")}if(X=="onLoad"&&U!="player"){return}if(X=="onError"){if(typeof U=="string"||(typeof U=="number"&&typeof S=="number")){U=S;S=R}}if(X=="onContextMenu"){A(H.contextMenu[U],function(I,J){J.call(e)});return}if(X=="onPluginEvent"){var C=U.name||U;var D=j[C];if(D){D._fireEvent("onUpdate",U);D._fireEvent(S,W.slice(3))}return}if(X=="onPlaylistReplace"){g=[];var T=0;A(U,function(){g.push(new v(this,T++,e))})}if(X=="onClipAdd"){if(U.isInStream){return}U=new v(U,S,e);g.splice(S,0,U);for(Q=S+1;Q<g.length;Q++){g[Q].index++}}var V=true;if(typeof U=="number"&&U<g.length){d=U;var E=g[U];if(E){V=E._fireEvent(X,S,R)}if(!E||V!==false){V=l._fireEvent(X,S,R,E)}}A(b[X],function(){V=this.call(e,U,S);if(this.cached){b[X].splice(Q,1)}if(V===false){return false}Q++});return V};function c(){if($f(f)){$f(f).getParent().innerHTML="";n=$f(f).getIndex();o[n]=e}else{o.push(e);n=o.length-1}h=parseInt(f.style.height,10)||f.clientHeight;if(typeof k=="string"){k={src:k}}i=f.id||"fp"+s();m=k.id||i+"_api";k.id=m;H.playerId=i;if(typeof H=="string"){H={clip:{url:H}}}if(typeof H.clip=="string"){H.clip={url:H.clip}}H.clip=H.clip||{};if(f.getAttribute("href",2)&&!H.clip.url){H.clip.url=f.getAttribute("href",2)}l=new v(H.clip,-1,e);H.playlist=H.playlist||[H.clip];var C=0;A(H.playlist,function(){var E=this;if(typeof E=="object"&&E.length){E={url:""+E}}A(H.clip,function(K,L){if(L!==undefined&&E[K]===undefined&&typeof L!="function"){E[K]=L}});H.playlist[C]=E;E=new v(E,C,e);g.push(E);C++});A(H,function(E,J){if(typeof J=="function"){if(l[E]){l[E](J)}else{x(b,E,J)}delete H[E]}});A(H.plugins,function(E,J){if(J){j[E]=new z(E,J,e)}});if(!H.plugins||H.plugins.controls===undefined){j.controls=new z("controls",null,e)}j.canvas=new z("canvas",null,e);k.bgcolor=k.bgcolor||"#000000";k.version=k.version||[9,0];k.expressInstall="http://www.flowplayer.org/swf/expressinstall.swf";function D(E){if(!e.isLoaded()&&e._fireEvent("onBeforeClick")!==false){e.load()}return t(E)}F=f.innerHTML;if(F.replace(/\s/g,"")!==""){if(f.addEventListener){f.addEventListener("click",D,false)}else{if(f.attachEvent){f.attachEvent("onclick",D)}}}else{if(f.addEventListener){f.addEventListener("click",t,false)}e.load()}}if(typeof f=="string"){flashembed.domReady(function(){var C=q(f);if(!C){throw"Flowplayer cannot access element: "+f}else{f=C;c()}})}else{c()}}var o=[];function r(a){this.length=a.length;this.each=function(b){A(a,b)};this.size=function(){return a.length}}window.flowplayer=window.$f=function(){var b=null;var a=arguments[0];if(!arguments.length){A(o,function(){if(this.isLoaded()){b=this;return false}});return b||o[0]}if(arguments.length==1){if(typeof a=="number"){return o[a]}else{if(a=="*"){return new r(o)}A(o,function(){if(this.id()==a.id||this.id()==a||this.getParent()==a){b=this;return false}});return b}}if(arguments.length>1){var d=arguments[1];var c=(arguments.length==3)?arguments[2]:{};if(typeof a=="string"){if(a.indexOf(".")!=-1){var f=[];A(B(a),function(){f.push(new p(this,y(d),y(c)))});return new r(f)}else{var e=q(a);return new p(e!==null?e:a,d,c)}}else{if(a){return new p(a,d,c)}}}return null};w(window.$f,{fireEvent:function(){var a=[].slice.call(arguments);var b=$f(a[0]);return b?b._fireEvent(a.slice(1)):null},addPlugin:function(a,b){p.prototype[a]=b;return $f},each:A,extend:w});if(typeof jQuery=="function"){jQuery.prototype.flowplayer=function(c,b){if(!arguments.length||typeof arguments[0]=="number"){var a=[];this.each(function(){var d=$f(this);if(d){a.push(d)}});return arguments.length?a[arguments[0]]:new r(a)}return this.each(function(){$f(this,y(c),b?y(b):{})})}}})();(function(){var o=typeof jQuery=="function";var s={width:"100%",height:"100%",allowfullscreen:true,allowscriptaccess:"always",quality:"high",version:null,onFail:null,expressInstall:null,w3c:false,cachebusting:false};if(o){jQuery.tools=jQuery.tools||{};jQuery.tools.flashembed={version:"1.0.4",conf:s}}function t(){if(m.done){return false}var b=document;if(b&&b.getElementsByTagName&&b.getElementById&&b.body){clearInterval(m.timer);m.timer=null;for(var a=0;a<m.ready.length;a++){m.ready[a].call()}m.ready=null;m.done=true}}var m=o?jQuery:function(a){if(m.done){return a()}if(m.timer){m.ready.push(a)}else{m.ready=[a];m.timer=setInterval(t,13)}};function p(b,a){if(a){for(key in a){if(a.hasOwnProperty(key)){b[key]=a[key]}}}return b}function q(a){switch(r(a)){case"string":a=a.replace(new RegExp('(["\\\\])',"g"),"\\$1");a=a.replace(/^\s?(\d+)%/,"$1pct");return'"'+a+'"';case"array":return"["+l(a,function(d){return q(d)}).join(",")+"]";case"function":return'"function()"';case"object":var b=[];for(var c in a){if(a.hasOwnProperty(c)){b.push('"'+c+'":'+q(a[c]))}}return"{"+b.join(",")+"}"}return String(a).replace(/\s/g," ").replace(/\'/g,'"')}function r(b){if(b===null||b===undefined){return false}var a=typeof b;return(a=="object"&&b.push)?"array":a}if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}})}function l(a,d){var c=[];for(var b in a){if(a.hasOwnProperty(b)){c[b]=d(a[b])}}return c}function k(f,h){var e=p({},f);var g=document.all;var c='<object width="'+e.width+'" height="'+e.height+'"';if(g&&!e.id){e.id="_"+(""+Math.random()).substring(9)}if(e.id){c+=' id="'+e.id+'"'}if(e.cachebusting){e.src+=((e.src.indexOf("?")!=-1?"&":"?")+Math.random())}if(e.w3c||!g){c+=' data="'+e.src+'" type="application/x-shockwave-flash"'}else{c+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'}c+=">";if(e.w3c||g){c+='<param name="movie" value="'+e.src+'" />'}e.width=e.height=e.id=e.w3c=e.src=null;for(var a in e){if(e[a]!==null){c+='<param name="'+a+'" value="'+e[a]+'" />'}}var d="";if(h){for(var b in h){if(h[b]!==null){d+=b+"="+(typeof h[b]=="object"?q(h[b]):h[b])+"&"}}d=d.substring(0,d.length-1);c+='<param name="flashvars" value=\''+d+"' />"}c+="</object>";return c}function n(c,f,b){var a=flashembed.getVersion();p(this,{getContainer:function(){return c},getConf:function(){return f},getVersion:function(){return a},getFlashvars:function(){return b},getApi:function(){return c.firstChild},getHTML:function(){return k(f,b)}});var g=f.version;var h=f.expressInstall;var e=!g||flashembed.isSupported(g);if(e){f.onFail=f.version=f.expressInstall=null;c.innerHTML=k(f,b)}else{if(g&&h&&flashembed.isSupported([6,65])){p(f,{src:h});b={MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title};c.innerHTML=k(f,b)}else{if(c.innerHTML.replace(/\s/g,"")!==""){}else{c.innerHTML="<h2>Flash version "+g+" or greater is required</h2><h3>"+(a[0]>0?"Your version is "+a:"You have no flash plugin installed")+"</h3>"+(c.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='http://www.adobe.com/go/getflashplayer'>here</a></p>");if(c.tagName=="A"){c.onclick=function(){location.href="http://www.adobe.com/go/getflashplayer"}}}}}if(!e&&f.onFail){var d=f.onFail.call(this);if(typeof d=="string"){c.innerHTML=d}}if(document.all){window[f.id]=document.getElementById(f.id)}}window.flashembed=function(b,c,a){if(typeof b=="string"){var d=document.getElementById(b);if(d){b=d}else{m(function(){flashembed(b,c,a)});return}}if(!b){return}if(typeof c=="string"){c={src:c}}var e=p({},s);p(e,c);return new n(b,e,a)};p(window.flashembed,{getVersion:function(){var c=[0,0];if(navigator.plugins&&typeof navigator.plugins["Shockwave Flash"]=="object"){var b=navigator.plugins["Shockwave Flash"].description;if(typeof b!="undefined"){b=b.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var d=parseInt(b.replace(/^(.*)\..*$/,"$1"),10);var h=/r/.test(b)?parseInt(b.replace(/^.*r(.*)$/,"$1"),10):0;c=[d,h]}}else{if(window.ActiveXObject){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(g){try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");c=[6,0];f.AllowScriptAccess="always"}catch(a){if(c[0]==6){return c}}try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}}if(typeof f=="object"){b=f.GetVariable("$version");if(typeof b!="undefined"){b=b.replace(/^\S+\s+(.*)$/,"$1").split(",");c=[parseInt(b[0],10),parseInt(b[2],10)]}}}}return c},isSupported:function(a){var c=flashembed.getVersion();var b=(c[0]>a[0])||(c[0]==a[0]&&c[1]>=a[1]);return b},domReady:m,asString:q,getHTML:k});if(o){jQuery.fn.flashembed=function(b,a){var c=null;this.each(function(){c=flashembed(this,b,a)});return b.api===false?this:c}}})();(function(a){a.fn.bxSlider=function(G){var t={mode:"horizontal",infiniteLoop:true,hideControlOnEnd:false,controls:true,speed:500,easing:"swing",pager:false,pagerSelector:null,pagerType:"full",pagerLocation:"bottom",pagerShortSeparator:"/",pagerActiveClass:"pager-active",nextText:"next",nextImage:"",nextSelector:null,prevText:"prev",prevImage:"",prevSelector:null,captions:false,captionsSelector:null,auto:false,autoDirection:"next",autoControls:false,autoControlsSelector:null,autoStart:true,autoHover:false,autoDelay:0,pause:3000,startText:"start",startImage:"",stopText:"stop",stopImage:"",ticker:false,tickerSpeed:5000,tickerDirection:"next",tickerHover:false,wrapperClass:"bx-wrapper",startingSlide:0,displaySlideQty:1,moveSlideQty:1,randomStart:false,onBeforeSlide:function(){},onAfterSlide:function(){},onLastSlide:function(){},onFirstSlide:function(){},onNextSlide:function(){},onPrevSlide:function(){},buildPager:null};var G=a.extend(t,G);var m=this;var h="";var e="";var c="";var f="";var d="";var r="";var q="";var Z="";var Y="";var g="";var A="";var b="";var k="";var i="";var j="";var l=true;var D=false;var p=0;var o=0;var s=0;var H=0;var K=0;var J=0;var I=0;var W=0;var X=0;var B=false;var u=0;var C=c.length-1;this.goToSlide=function(aa,ab){if(!B){B=true;s=aa;G.onBeforeSlide(s,c.length,c.eq(s));if(typeof(ab)=="undefined"){var ab=true}if(ab){if(G.auto){m.stopShow(true)}}slide=aa;if(slide==u){G.onFirstSlide(s,c.length,c.eq(s))}if(slide==C){G.onLastSlide(s,c.length,c.eq(s))}if(G.mode=="horizontal"){h.animate({left:"-"+w(slide,"left")+"px"},G.speed,G.easing,function(){B=false;G.onAfterSlide(s,c.length,c.eq(s))})}else{if(G.mode=="vertical"){h.animate({top:"-"+w(slide,"top")+"px"},G.speed,G.easing,function(){B=false;G.onAfterSlide(s,c.length,c.eq(s))})}else{if(G.mode=="fade"){O()}}}n();if(G.moveSlideQty>1){aa=Math.floor(aa/G.moveSlideQty)}E(aa);T()}};this.goToNextSlide=function(ad){if(typeof(ad)=="undefined"){var ad=true}if(ad){if(G.auto){m.stopShow(true)}}if(!G.infiniteLoop){if(!B){var ac=false;s=(s+(G.moveSlideQty));if(s<=C){n();G.onNextSlide(s,c.length,c.eq(s));m.goToSlide(s)}else{s-=G.moveSlideQty}}}else{if(!B){B=true;var ac=false;s=(s+G.moveSlideQty);if(s>C){s=s%c.length;ac=true}G.onNextSlide(s,c.length,c.eq(s));G.onBeforeSlide(s,c.length,c.eq(s));if(G.mode=="horizontal"){var aa=(G.moveSlideQty*q);h.animate({left:"-="+aa+"px"},G.speed,G.easing,function(){B=false;if(ac){h.css("left","-"+w(s,"left")+"px")}G.onAfterSlide(s,c.length,c.eq(s))})}else{if(G.mode=="vertical"){var ab=(G.moveSlideQty*o);h.animate({top:"-="+ab+"px"},G.speed,G.easing,function(){B=false;if(ac){h.css("top","-"+w(s,"top")+"px")}G.onAfterSlide(s,c.length,c.eq(s))})}else{if(G.mode=="fade"){O()}}}if(G.moveSlideQty>1){E(Math.ceil(s/G.moveSlideQty))}else{E(s)}T()}}};this.goToPreviousSlide=function(ad){if(typeof(ad)=="undefined"){var ad=true}if(ad){if(G.auto){m.stopShow(true)}}if(!G.infiniteLoop){if(!B){var ac=false;s=s-G.moveSlideQty;if(s<0){s=0;if(G.hideControlOnEnd){a(".bx-prev",f).hide()}}n();G.onPrevSlide(s,c.length,c.eq(s));m.goToSlide(s)}}else{if(!B){B=true;var ac=false;s=(s-(G.moveSlideQty));if(s<0){negativeOffset=(s%c.length);if(negativeOffset==0){s=0}else{s=(c.length)+negativeOffset}ac=true}G.onPrevSlide(s,c.length,c.eq(s));G.onBeforeSlide(s,c.length,c.eq(s));if(G.mode=="horizontal"){var aa=(G.moveSlideQty*q);h.animate({left:"+="+aa+"px"},G.speed,G.easing,function(){B=false;if(ac){h.css("left","-"+w(s,"left")+"px")}G.onAfterSlide(s,c.length,c.eq(s))})}else{if(G.mode=="vertical"){var ab=(G.moveSlideQty*o);h.animate({top:"+="+ab+"px"},G.speed,G.easing,function(){B=false;if(ac){h.css("top","-"+w(s,"top")+"px")}G.onAfterSlide(s,c.length,c.eq(s))})}else{if(G.mode=="fade"){O()}}}if(G.moveSlideQty>1){E(Math.ceil(s/G.moveSlideQty))}else{E(s)}T()}}};this.goToFirstSlide=function(aa){if(typeof(aa)=="undefined"){var aa=true}m.goToSlide(u,aa)};this.goToLastSlide=function(){if(typeof(aa)=="undefined"){var aa=true}m.goToSlide(C,aa)};this.getCurrentSlide=function(){return s};this.getSlideCount=function(){return c.length};this.stopShow=function(aa){clearInterval(A);if(typeof(aa)=="undefined"){var aa=true}if(aa&&G.autoControls){b.html(i).removeClass("stop").addClass("start");l=false}};this.startShow=function(aa){if(typeof(aa)=="undefined"){var aa=true}N();if(aa&&G.autoControls){b.html(j).removeClass("start").addClass("stop");l=true}};this.stopTicker=function(aa){h.stop();if(typeof(aa)=="undefined"){var aa=true}if(aa&&G.ticker){b.html(i).removeClass("stop").addClass("start");l=false}};this.startTicker=function(aa){if(G.mode=="horizontal"){if(G.tickerDirection=="next"){var ad=parseInt(h.css("left"));var ac=(J+ad)+c.eq(0).width()}else{if(G.tickerDirection=="prev"){var ad=-parseInt(h.css("left"));var ac=(ad)-c.eq(0).width()}}var ab=(ac*G.tickerSpeed)/J;F(W,ac,ab)}else{if(G.mode=="vertical"){if(G.tickerDirection=="next"){var ae=parseInt(h.css("top"));var ac=(I+ae)+c.eq(0).height()}else{if(G.tickerDirection=="prev"){var ae=-parseInt(h.css("top"));var ac=(ae)-c.eq(0).height()}}var ab=(ac*G.tickerSpeed)/I;F(X,ac,ab);if(typeof(aa)=="undefined"){var aa=true}if(aa&&G.ticker){b.html(j).removeClass("start").addClass("stop");l=true}}}};this.initShow=function(){h=a(this);e=h.clone();c=h.children();f="";d=h.children(":first");r=d.width();p=0;q=d.outerWidth(false);o=0;Z=y();Y=x();B=false;g="";s=0;H=0;K=0;A="";b="";k="";i="";j="";l=true;D=false;J=0;I=0;W=0;X=0;u=0;C=c.length-1;c.each(function(ab){if(a(this).outerHeight()>o){o=a(this).outerHeight()}if(a(this).outerWidth()>p){p=a(this).outerWidth()}});if(G.randomStart){var aa=Math.floor(Math.random()*c.length);s=aa;H=q*(G.moveSlideQty+aa);K=o*(G.moveSlideQty+aa)}else{s=G.startingSlide;H=q*(G.moveSlideQty+G.startingSlide);K=o*(G.moveSlideQty+G.startingSlide)}z();if(G.pager&&!G.ticker){if(G.pagerType=="full"){V("full")}else{if(G.pagerType=="short"){V("short")}}}if(G.controls&&!G.ticker){Q()}if(G.auto||G.ticker){if(G.autoControls){L()}if(G.autoStart){setTimeout(function(){m.startShow(true)},G.autoDelay)}else{m.stopShow(true)}if(G.autoHover&&!G.ticker){M()}}if(G.moveSlideQty>1){E(Math.ceil(s/G.moveSlideQty))}else{E(s)}n();if(G.captions){T()}G.onAfterSlide(s,c.length,c.eq(s))};this.destroyShow=function(){clearInterval(A);a(".bx-next, .bx-prev, .bx-pager, .bx-auto",f).remove();h.unwrap().unwrap().removeAttr("style");h.children().removeAttr("style").not(".pager").remove();c.removeClass("pager")};this.reloadShow=function(){m.destroyShow();m.initShow()};function z(){P(G.startingSlide);if(G.mode=="horizontal"){h.wrap('<div class="'+G.wrapperClass+'" style="width:'+Z+'px; position:relative;"></div>').wrap('<div class="bx-window" style="position:relative; overflow:hidden; width:'+Z+'px;"></div>').css({width:"999999px",position:"relative",left:"-"+(H)+"px"});h.children().css({width:r,"float":"left",listStyle:"none"});f=h.parent().parent();c.addClass("pager")}else{if(G.mode=="vertical"){h.wrap('<div class="'+G.wrapperClass+'" style="width:'+p+'px; position:relative;"></div>').wrap('<div class="bx-window" style="width:'+p+"px; height:"+Y+'px; position:relative; overflow:hidden;"></div>').css({height:"999999px",position:"relative",top:"-"+(K)+"px"});h.children().css({listStyle:"none",height:o});f=h.parent().parent();c.addClass("pager")}else{if(G.mode=="fade"){h.wrap('<div class="'+G.wrapperClass+'" style="width:'+p+'px; position:relative;"></div>').wrap('<div class="bx-window" style="height:'+o+"px; width:"+p+'px; position:relative; overflow:hidden;"></div>');h.children().css({listStyle:"none",position:"absolute",top:0,left:0,zIndex:98});f=h.parent().parent();c.not(":eq("+s+")").fadeTo(0,0);c.eq(s).css("zIndex",99)}}}if(G.captions&&G.captionsSelector==null){f.append('<div class="bx-captions"></div>')}}function P(){if(G.mode=="horizontal"||G.mode=="vertical"){var ab=v(c,0,G.moveSlideQty,"backward");a.each(ab,function(af){h.prepend(a(this))});var ae=(c.length+G.moveSlideQty)-1;var ad=c.length-G.displaySlideQty;var ac=ae-ad;var aa=v(c,0,ac,"forward");if(G.infiniteLoop){a.each(aa,function(af){h.append(a(this))})}}}function Q(){if(G.nextImage!=""){nextContent=G.nextImage;nextType="image"}else{nextContent=G.nextText;nextType="text"}if(G.prevImage!=""){prevContent=G.prevImage;prevType="image"}else{prevContent=G.prevText;prevType="text"}U(nextType,nextContent,prevType,prevContent)}function N(){if(G.auto){if(!G.infiniteLoop){if(G.autoDirection=="next"){A=setInterval(function(){s+=G.moveSlideQty;if(s>C){s=s%c.length}m.goToSlide(s,false)},G.pause)}else{if(G.autoDirection=="prev"){A=setInterval(function(){s-=G.moveSlideQty;if(s<0){negativeOffset=(s%c.length);if(negativeOffset==0){s=0}else{s=(c.length)+negativeOffset}}m.goToSlide(s,false)},G.pause)}}}else{if(G.autoDirection=="next"){A=setInterval(function(){m.goToNextSlide(false)},G.pause)}else{if(G.autoDirection=="prev"){A=setInterval(function(){m.goToPreviousSlide(false)},G.pause)}}}}else{if(G.ticker){G.tickerSpeed*=10;a(".pager",f).each(function(aa){J+=a(this).width();I+=a(this).height()});if(G.tickerDirection=="prev"&&G.mode=="horizontal"){h.css("left","-"+(J+H)+"px")}else{if(G.tickerDirection=="prev"&&G.mode=="vertical"){h.css("top","-"+(I+K)+"px")}}if(G.mode=="horizontal"){W=parseInt(h.css("left"));F(W,J,G.tickerSpeed)}else{if(G.mode=="vertical"){X=parseInt(h.css("top"));F(X,I,G.tickerSpeed)}}if(G.tickerHover){R()}}}}function F(ab,aa,ac){if(G.mode=="horizontal"){if(G.tickerDirection=="next"){h.animate({left:"-="+aa+"px"},ac,"linear",function(){h.css("left",ab);F(ab,J,G.tickerSpeed)})}else{if(G.tickerDirection=="prev"){h.animate({left:"+="+aa+"px"},ac,"linear",function(){h.css("left",ab);F(ab,J,G.tickerSpeed)})}}}else{if(G.mode=="vertical"){if(G.tickerDirection=="next"){h.animate({top:"-="+aa+"px"},ac,"linear",function(){h.css("top",ab);F(ab,I,G.tickerSpeed)})}else{if(G.tickerDirection=="prev"){h.animate({top:"+="+aa+"px"},ac,"linear",function(){h.css("top",ab);F(ab,I,G.tickerSpeed)})}}}}}function L(){if(G.startImage!=""){startContent=G.startImage;startType="image"}else{startContent=G.startText;startType="text"}if(G.stopImage!=""){stopContent=G.stopImage;stopType="image"}else{stopContent=G.stopText;stopType="text"}S(startType,startContent,stopType,stopContent)}function M(){f.find(".bx-window").hover(function(){if(l){m.stopShow(false)}},function(){if(l){m.startShow(false)}})}function R(){h.hover(function(){if(l){m.stopTicker(false)}},function(){if(l){m.startTicker(false)}})}function O(){c.not(":eq("+s+")").fadeTo(G.speed,0).css("zIndex",98);c.eq(s).css("zIndex",99).fadeTo(G.speed,1,function(){B=false;if(jQuery.browser.msie){c.eq(s).get(0).style.removeAttribute("filter")}G.onAfterSlide(s,c.length,c.eq(s))})}function E(aa){if(G.pagerType=="full"&&G.pager){a("a",g).removeClass(G.pagerActiveClass);a("a",g).eq(aa).addClass(G.pagerActiveClass)}else{if(G.pagerType=="short"&&G.pager){a(".bx-pager-current",g).html(s+1)}}}function U(ad,ac,af,ae){var aa=a('<a href="" class="bx-next"></a>');var ab=a('<a href="" class="bx-prev"></a>');if(ad=="text"){aa.html(ac)}else{aa.html('<img src="'+ac+'" />')}if(af=="text"){ab.html(ae)}else{ab.html('<img src="'+ae+'" />')}if(G.prevSelector){a(G.prevSelector).append(ab)}else{f.append(ab)}if(G.nextSelector){a(G.nextSelector).append(aa)}else{f.append(aa)}aa.click(function(){m.goToNextSlide();return false});ab.click(function(){m.goToPreviousSlide();return false})}function V(ae){var ac=c.length;if(G.moveSlideQty>1){if(c.length%G.moveSlideQty!=0){ac=Math.ceil(c.length/G.moveSlideQty)}else{ac=c.length/G.moveSlideQty}}var ad="";if(G.buildPager){for(var ab=0;ab<ac;ab++){ad+=G.buildPager(ab,c.eq(ab*G.moveSlideQty))}}else{if(ae=="full"){for(var ab=1;ab<=ac;ab++){ad+='<a href="" class="pager-link pager-'+ab+'">'+ab+"</a>"}}else{if(ae=="short"){ad='<span class="bx-pager-current">'+(G.startingSlide+1)+"</span> "+G.pagerShortSeparator+' <span class="bx-pager-total">'+c.length+"<span>"}}}if(G.pagerSelector){a(G.pagerSelector).append(ad);g=a(G.pagerSelector)}else{var aa=a('<div class="bx-pager"></div>');aa.append(ad);if(G.pagerLocation=="top"){f.prepend(aa)}else{if(G.pagerLocation=="bottom"){f.append(aa)}}g=a(".bx-pager",f)}g.children().click(function(){if(G.pagerType=="full"){var af=g.children().index(this);if(G.moveSlideQty>1){af*=G.moveSlideQty}m.goToSlide(af)}return false})}function T(){var aa=a("img",c.eq(s)).attr("title");if(aa!=""){if(G.captionsSelector){a(G.captionsSelector).html(aa)}else{a(".bx-captions",f).html(aa)}}else{if(G.captionsSelector){a(G.captionsSelector).html(" ")}else{a(".bx-captions",f).html(" ")}}}function S(ab,aa,ad,ac){b=a('<a href="" class="bx-start"></a>');if(ab=="text"){i=aa}else{i='<img src="'+aa+'" />'}if(ad=="text"){j=ac}else{j='<img src="'+ac+'" />'}if(G.autoControlsSelector){a(G.autoControlsSelector).append(b)}else{f.append('<div class="bx-auto"></div>');a(".bx-auto",f).html(b)}b.click(function(){if(G.ticker){if(a(this).hasClass("stop")){m.stopTicker()}else{if(a(this).hasClass("start")){m.startTicker()}}}else{if(a(this).hasClass("stop")){m.stopShow(true)}else{if(a(this).hasClass("start")){m.startShow(true)}}}return false})}function n(){if(!G.infiniteLoop&&G.hideControlOnEnd){if(s==u){a(".bx-prev",f).hide()}else{a(".bx-prev",f).show()}if(s==C){a(".bx-next",f).hide()}else{a(".bx-next",f).show()}}}function w(aa,ac){if(ac=="left"){var ab=a(".pager",f).eq(aa).position().left}else{if(ac=="top"){var ab=a(".pager",f).eq(aa).position().top}}return ab}function y(){var aa=d.outerWidth()*G.displaySlideQty;return aa}function x(){var aa=d.outerHeight()*G.displaySlideQty;return aa}function v(aa,af,ac,ab){var ae=[];var ad=ac;var ag=false;if(ab=="backward"){aa=a.makeArray(aa);aa.reverse()}while(ad>0){a.each(aa,function(ah,ai){if(ad>0){if(!ag){if(ah==af){ag=true;ae.push(a(this).clone());ad--}}else{ae.push(a(this).clone());ad--}}else{return false}})}return ae}this.each(function(){m.initShow()});return this};jQuery.fx.prototype.cur=function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var b=parseFloat(jQuery.css(this.elem,this.prop));return b}})(jQuery);(function(a){a.baseClass=function(b){b=a(b);return b.get(0).className.match(/([^ ]+)/)[1]};a.fn.addDependClass=function(b,c){var d={delimiter:c?c:"-"};return this.each(function(){var e=a.baseClass(this);if(e){a(this).addClass(e+d.delimiter+b)}})};a.fn.removeDependClass=function(b,c){var d={delimiter:c?c:"-"};return this.each(function(){var e=a.baseClass(this);if(e){a(this).removeClass(e+d.delimiter+b)}})};a.fn.toggleDependClass=function(b,c){var d={delimiter:c?c:"-"};return this.each(function(){var e=a.baseClass(this);if(e){if(a(this).is("."+e+d.delimiter+b)){a(this).removeClass(e+d.delimiter+b)}else{a(this).addClass(e+d.delimiter+b)}}})}})(jQuery);/*
 * jQuery Form Plugin
 * version: 2.92 (22-NOV-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
(function(a){a.fn.ajaxSubmit=function(s){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}var l,e,y,c=this;if(typeof s=="function"){s={success:s}}l=this.attr("method");e=this.attr("action");y=(typeof e==="string")?a.trim(e):"";y=y||window.location.href||"";if(y){y=(y.match(/^([^#]+)/)||[])[1]}s=a.extend(true,{url:y,success:a.ajaxSettings.success,type:l||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},s);var A={};this.trigger("form-pre-serialize",[this,s,A]);if(A.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(s.beforeSerialize&&s.beforeSerialize(this,s)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var x=s.traditional;if(x===undefined){x=a.ajaxSettings.traditional}var u,p,z,d=this.formToArray(s.semantic);if(s.data){s.extraData=s.data;u=a.param(s.data,x)}if(s.beforeSubmit&&s.beforeSubmit(d,this,s)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[d,this,s,A]);if(A.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var t=a.param(d,x);if(u){t=(t?(t+"&"+u):u)}if(s.type.toUpperCase()=="GET"){s.url+=(s.url.indexOf("?")>=0?"&":"?")+t;s.data=null}else{s.data=t}var f=[];if(s.resetForm){f.push(function(){c.resetForm()})}if(s.clearForm){f.push(function(){c.clearForm(s.includeHidden)})}if(!s.dataType&&s.target){var r=s.success||function(){};f.push(function(n){var q=s.replaceTarget?"replaceWith":"html";a(s.target)[q](n).each(r,arguments)})}else{if(s.success){f.push(s.success)}}s.success=function(q,C,D){var n=s.context||s;for(var v=0,B=f.length;v<B;v++){f[v].apply(n,[q,C,D||c,c])}};var h=a("input:file:enabled[value]",this);var k=h.length>0;var m="multipart/form-data";var o=(c.attr("enctype")==m||c.attr("encoding")==m);var g=!!(k&&h.get(0).files&&window.FormData);b("fileAPI :"+g);var w=(k||o)&&!g;if(s.iframe!==false&&(s.iframe||w)){if(s.closeKeepAlive){a.get(s.closeKeepAlive,function(){i(d)})}else{i(d)}}else{if((k||o)&&g){s.progress=s.progress||a.noop;j(d)}else{a.ajax(s)}}this.trigger("form-submit-notify",[this,s]);return this;function j(q){var v=new FormData();for(var B=0;B<q.length;B++){if(q[B].type=="file"){continue}v.append(q[B].name,q[B].value)}c.find("input:file:enabled").each(function(){var E=a(this).attr("name"),C=this.files;if(E){for(var D=0;D<C.length;D++){v.append(E,C[D])}}});s.data=null;var n=s.beforeSend;s.beforeSend=function(D,C){C.data=v;if(D.upload){D.upload.onprogress=function(E){C.progress(E.position,E.total)}}if(n){n.call(C,D,C)}};a.ajax(s)}function i(v){var L=c[0],K,P,U,M,Q,q,R,ab,W,S,X,Y;var aa=!!a.fn.prop;if(v){if(aa){for(P=0;P<v.length;P++){K=a(L[v[P].name]);K.prop("disabled",false)}}else{for(P=0;P<v.length;P++){K=a(L[v[P].name]);K.removeAttr("disabled")}}}if(a(":input[name=submit],:input[id=submit]",L).length){alert('Error: Form elements must not have name or id of "submit".');return}U=a.extend(true,{},a.ajaxSettings,s);U.context=U.context||U;Q="jqFormIO"+(new Date().getTime());if(U.iframeTarget){q=a(U.iframeTarget);S=q.attr("name");if(S==null){q.attr("name",Q)}else{Q=S}}else{q=a('<iframe name="'+Q+'" src="'+U.iframeSrc+'" />');q.css({position:"absolute",top:"-1000px",left:"-1000px"})}R=q[0];ab={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(ac){var n=(ac==="timeout"?"timeout":"aborted");b("aborting upload... "+n);this.aborted=1;q.attr("src",U.iframeSrc);ab.error=n;U.error&&U.error.call(U.context,ab,n,ac);M&&a.event.trigger("ajaxError",[ab,U,n]);U.complete&&U.complete.call(U.context,ab,n)}};M=U.global;if(M&&!a.active++){a.event.trigger("ajaxStart")}if(M){a.event.trigger("ajaxSend",[ab,U])}if(U.beforeSend&&U.beforeSend.call(U.context,ab,U)===false){if(U.global){a.active--}return}if(ab.aborted){return}W=L.clk;if(W){S=W.name;if(S&&!W.disabled){U.extraData=U.extraData||{};U.extraData[S]=W.value;if(W.type=="image"){U.extraData[S+".x"]=L.clk_x;U.extraData[S+".y"]=L.clk_y}}}var D=1;var V=2;function N(ac){var n=ac.contentWindow?ac.contentWindow.document:ac.contentDocument?ac.contentDocument:ac.document;return n}var F=a("meta[name=csrf-token]").attr("content");var E=a("meta[name=csrf-param]").attr("content");if(E&&F){U.extraData=U.extraData||{};U.extraData[E]=F}function J(){var ag=c.attr("target"),ac=c.attr("action");L.setAttribute("target",Q);if(!l){L.setAttribute("method","POST")}if(ac!=U.url){L.setAttribute("action",U.url)}if(!U.skipEncodingOverride&&(!l||/post/i.test(l))){c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(U.timeout){Y=setTimeout(function(){X=true;C(D)},U.timeout)}function ad(){try{var ah=N(R).readyState;b("state = "+ah);if(ah.toLowerCase()=="uninitialized"){setTimeout(ad,50)}}catch(n){b("Server abort: ",n," (",n.name,")");C(V);Y&&clearTimeout(Y);Y=undefined}}var ae=[];try{if(U.extraData){for(var af in U.extraData){ae.push(a('<input type="hidden" name="'+af+'">').attr("value",U.extraData[af]).appendTo(L)[0])}}if(!U.iframeTarget){q.appendTo("body");R.attachEvent?R.attachEvent("onload",C):R.addEventListener("load",C,false)}setTimeout(ad,15);L.submit()}finally{L.setAttribute("action",ac);if(ag){L.setAttribute("target",ag)}else{c.removeAttr("target")}a(ae).remove()}}if(U.forceSync){J()}else{setTimeout(J,10)}var G,H,I=50,B;function C(ae){if(ab.aborted||B){return}try{H=N(R)}catch(ag){b("cannot access response document: ",ag);ae=V}if(ae===D&&ab){ab.abort("timeout");return}else{if(ae==V&&ab){ab.abort("server abort");return}}if(!H||H.location.href==U.iframeSrc){if(!X){return}}R.detachEvent?R.detachEvent("onload",C):R.removeEventListener("load",C,false);var ak="success",af;try{if(X){throw"timeout"}var ah=U.dataType=="xml"||H.XMLDocument||a.isXMLDoc(H);b("isXml="+ah);if(!ah&&window.opera&&(H.body==null||H.body.innerHTML=="")){if(--I){b("requeing onLoad callback, DOM not available");setTimeout(C,250);return}}var ac=H.body?H.body:H.documentElement;ab.responseText=ac?ac.innerHTML:null;ab.responseXML=H.XMLDocument?H.XMLDocument:H;if(ah){U.dataType="xml"}ab.getResponseHeader=function(am){var an={"content-type":U.dataType};return an[am]};if(ac){ab.status=Number(ac.getAttribute("status"))||ab.status;ab.statusText=ac.getAttribute("statusText")||ab.statusText}var ad=(U.dataType||"").toLowerCase();var aj=/(json|script|text)/.test(ad);if(aj||U.textarea){var al=H.getElementsByTagName("textarea")[0];if(al){ab.responseText=al.value;ab.status=Number(al.getAttribute("status"))||ab.status;ab.statusText=al.getAttribute("statusText")||ab.statusText}else{if(aj){var ai=H.getElementsByTagName("pre")[0];var n=H.getElementsByTagName("body")[0];if(ai){ab.responseText=ai.textContent?ai.textContent:ai.innerText}else{if(n){ab.responseText=n.textContent?n.textContent:n.innerText}}}}}else{if(ad=="xml"&&!ab.responseXML&&ab.responseText!=null){ab.responseXML=Z(ab.responseText)}}try{G=O(ab,ad,U)}catch(ae){ak="parsererror";ab.error=af=(ae||ak)}}catch(ae){b("error caught: ",ae);ak="error";ab.error=af=(ae||ak)}if(ab.aborted){b("upload aborted");ak=null}if(ab.status){ak=(ab.status>=200&&ab.status<300||ab.status===304)?"success":"error"}if(ak==="success"){U.success&&U.success.call(U.context,G,"success",ab);M&&a.event.trigger("ajaxSuccess",[ab,U])}else{if(ak){if(af==undefined){af=ab.statusText}U.error&&U.error.call(U.context,ab,ak,af);M&&a.event.trigger("ajaxError",[ab,U,af])}}M&&a.event.trigger("ajaxComplete",[ab,U]);if(M&&!--a.active){a.event.trigger("ajaxStop")}U.complete&&U.complete.call(U.context,ab,ak);B=true;if(U.timeout){clearTimeout(Y)}setTimeout(function(){if(!U.iframeTarget){q.remove()}ab.responseXML=null},100)}var Z=a.parseXML||function(ac,n){if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLDOM");n.async="false";n.loadXML(ac)}else{n=(new DOMParser()).parseFromString(ac,"text/xml")}return(n&&n.documentElement&&n.documentElement.nodeName!="parsererror")?n:null};var T=a.parseJSON||function(n){return window["eval"]("("+n+")")};var O=function(af,ae,ad){var n=af.getResponseHeader("content-type")||"",ag=ae==="xml"||!ae&&n.indexOf("xml")>=0,ac=ag?af.responseXML:af.responseText;if(ag&&ac.documentElement.nodeName==="parsererror"){a.error&&a.error("parsererror")}if(ad&&ad.dataFilter){ac=ad.dataFilter(ac,ae)}if(typeof ac==="string"){if(ae==="json"||!ae&&n.indexOf("json")>=0){ac=T(ac)}else{if(ae==="script"||!ae&&n.indexOf("javascript")>=0){a.globalEval(ac)}}}return ac}}};a.fn.ajaxForm=function(d){if(this.length===0){var c={s:this.selector,c:this.context};if(!a.isReady&&c.s){b("DOM not ready, queuing ajaxForm");a(function(){a(c.s,c.c).ajaxForm(d)});return this}b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();a(this).ajaxSubmit(d)}}).bind("click.form-plugin",function(g){var k=g.target;var f=a(k);if(!(f.is(":submit,input:image"))){var j=f.closest(":submit");if(j.length==0){return}k=j[0]}var h=this;h.clk=k;if(k.type=="image"){if(g.offsetX!=undefined){h.clk_x=g.offsetX;h.clk_y=g.offsetY}else{if(typeof a.fn.offset=="function"){var i=f.offset();h.clk_x=g.pageX-i.left;h.clk_y=g.pageY-i.top}else{h.clk_x=g.pageX-k.offsetLeft;h.clk_y=g.pageY-k.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(q){var d=[];if(this.length===0){return d}var g=this[0];var f=q?g.getElementsByTagName("*"):g.elements;if(!f){return d}var h,l,p,r,e,o,m;for(h=0,o=f.length;h<o;h++){e=f[h];p=e.name;if(!p){continue}if(q&&g.clk&&e.type=="image"){if(!e.disabled&&g.clk==e){d.push({name:p,value:a(e).val(),type:e.type});d.push({name:p+".x",value:g.clk_x},{name:p+".y",value:g.clk_y})}continue}r=a.fieldValue(e,true);if(r&&r.constructor==Array){for(l=0,m=r.length;l<m;l++){d.push({name:p,value:r[l]})}}else{if(r!==null&&typeof r!="undefined"){d.push({name:p,value:r,type:e.type})}}}if(!q&&g.clk){var c=a(g.clk),k=c[0];p=k.name;if(p&&!k.disabled&&k.type=="image"){d.push({name:p,value:c.val()});d.push({name:p+".x",value:g.clk_x},{name:p+".y",value:g.clk_y})}}return d};a.fn.formSerialize=function(c){return a.param(this.formToArray(c))};a.fn.fieldSerialize=function(d){var c=[];this.each(function(){var g=this.name;if(!g){return}var h=a.fieldValue(this,d);if(h&&h.constructor==Array){for(var e=0,f=h.length;e<f;e++){c.push({name:g,value:h[e]})}}else{if(h!==null&&typeof h!="undefined"){c.push({name:this.name,value:h})}}});return a.param(c)};a.fn.fieldValue=function(f){for(var h=[],d=0,e=this.length;d<e;d++){var c=this[d];var g=a.fieldValue(c,f);if(g===null||typeof g=="undefined"||(g.constructor==Array&&!g.length)){continue}g.constructor==Array?a.merge(h,g):h.push(g)}return h};a.fieldValue=function(d,m){var h=d.name,o=d.type,p=d.tagName.toLowerCase();if(m===undefined){m=true}if(m&&(!h||d.disabled||o=="reset"||o=="button"||(o=="checkbox"||o=="radio")&&!d.checked||(o=="submit"||o=="image")&&d.form&&d.form.clk!=d||p=="select"&&d.selectedIndex==-1)){return null}if(p=="select"){var f=d.selectedIndex;if(f<0){return null}var c=[],l=d.options;var j=(o=="select-one");var g=(j?f+1:l.length);for(var e=(j?f:0);e<g;e++){var k=l[e];if(k.selected){var q=k.value;if(!q){q=(k.attributes&&k.attributes.value&&!(k.attributes.value.specified))?k.text:k.value}if(j){return q}c.push(q)}}return c}return a(d).val()};a.fn.clearForm=function(c){return this.each(function(){a("input,select,textarea",this).clearFields(c)})};a.fn.clearFields=a.fn.clearInputs=function(c){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,f=this.tagName.toLowerCase();if(d.test(e)||f=="textarea"||(c&&/hidden/.test(e))){this.value=""}else{if(e=="checkbox"||e=="radio"){this.checked=false}else{if(f=="select"){this.selectedIndex=-1}}}})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};a.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};a.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var e=this.type;if(e=="checkbox"||e=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");if(c&&d[0]&&d[0].type=="select-one"){d.find("option").selected(false)}this.selected=c}}})};a.fn.ajaxSubmit.debug=false;function b(){if(!a.fn.ajaxSubmit.debug){return}var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}})(jQuery);jQuery.fn.showLoading=function(j){var d;var p={addClass:"",beforeShow:"",afterShow:"",hPos:"center",vPos:"center",indicatorZIndex:5001,overlayZIndex:5000,parent:null,marginTop:0,marginLeft:0,overlayWidth:null,overlayHeight:null,position:"absolute",inverse:false};jQuery.extend(p,j);var i=jQuery("<div></div>");var o=jQuery("<div></div>");var g="";if(p.inverse){g="-inverse"}if(p.indicatorId){d=p.indicatorId}else{d=jQuery(this).attr("id")}jQuery(i).attr("id","loading-indicator-"+d);jQuery(i).addClass("loading-indicator"+g);if(p.addClass){jQuery(o).addClass(p.addClass+"-overlay")}if(p.addClass){jQuery(i).addClass(p.addClass)}jQuery(o).css("display","none");jQuery(this).append(o);jQuery(o).attr("id","loading-indicator-"+d+"-overlay");jQuery(o).addClass("loading-indicator-overlay"+g);if(p.addClass){jQuery(o).addClass(p.addClass+"-overlay")}var n;var k;var b=jQuery(this).css("border-top-width");var a=jQuery(this).css("border-left-width");b=isNaN(parseInt(b))?0:b;a=isNaN(parseInt(a))?0:a;var h=jQuery(this).css("position")=="relative"?0:jQuery(this).position().left;var q=jQuery(this).css("position")=="relative"?0:jQuery(this).position().top;var l=h+parseInt(a);var m=q+parseInt(b);if(p.overlayWidth!==null){n=p.overlayWidth}else{n=parseInt(jQuery(this).width())+parseInt(jQuery(this).css("padding-right"))+parseInt(jQuery(this).css("padding-left"))}if(p.overlayHeight!==null){k=p.overlayWidth}else{k=parseInt(jQuery(this).height())+parseInt(jQuery(this).css("padding-top"))+parseInt(jQuery(this).css("padding-bottom"))}jQuery(o).css("width",n.toString()+"px");jQuery(o).css("height",k.toString()+"px");jQuery(o).css("left",l.toString()+"px");jQuery(o).css("position",p.position);jQuery(o).css("top",m.toString()+"px");jQuery(o).css("z-index",p.overlayZIndex);if(p.overlayCSS){jQuery(o).css(p.overlayCSS)}jQuery(i).css("display","none");jQuery(this).append(i);jQuery(i).css("position",p.position);jQuery(i).css("z-index",p.indicatorZIndex);var f=m;if(p.marginTop){f+=parseInt(p.marginTop)}var e=l;if(p.marginLeft){e+=parseInt(p.marginTop)}if(p.hPos.toString().toLowerCase()=="center"){jQuery(i).css("left",(e+((jQuery(o).width()-parseInt(jQuery(i).width()))/2)).toString()+"px")}else{if(p.hPos.toString().toLowerCase()=="left"){jQuery(i).css("left",(e+parseInt(jQuery(o).css("margin-left"))).toString()+"px")}else{if(p.hPos.toString().toLowerCase()=="right"){jQuery(i).css("left",(e+(jQuery(o).width()-parseInt(jQuery(i).width()))).toString()+"px")}else{jQuery(i).css("left",(e+parseInt(p.hPos)).toString()+"px")}}}if(p.vPos.toString().toLowerCase()=="center"){jQuery(i).css("top",(f+((jQuery(o).height()-parseInt(jQuery(i).height()))/2)).toString()+"px")}else{if(p.vPos.toString().toLowerCase()=="top"){jQuery(i).css("top",f.toString()+"px")}else{if(p.vPos.toString().toLowerCase()=="bottom"){jQuery(i).css("top",(f+(jQuery(o).height()-parseInt(jQuery(i).height()))).toString()+"px")}else{jQuery(i).css("top",(f+parseInt(p.vPos)).toString()+"px")}}}if(p.css){jQuery(i).css(p.css)}var c={overlay:o,indicator:i,element:this};if(typeof(p.beforeShow)=="function"){p.beforeShow(c)}jQuery(o).show();jQuery(i).show();if(typeof(p.afterShow)=="function"){p.afterShow(c)}Fonts.Spinner.enableSpinners();return this};jQuery.fn.hideLoading=function(b){var d={};jQuery.extend(d,b);if(d.indicatorId){indicatorId=d.indicatorId}else{indicatorId=jQuery(this).attr("id")}var a=jQuery(document.body).find("#loading-indicator-"+indicatorId);var c=jQuery(document.body).find("#loading-indicator-"+indicatorId+"-overlay");a.remove();c.remove();Fonts.Spinner.disableSpinners();return this};(function(){Function.prototype.inheritFrom=function(a,d){var c=function(){};c.prototype=a.prototype;this.prototype=new c();this.prototype.constructor=this;this.prototype.baseConstructor=a;this.prototype.superClass=a.prototype;if(d){for(var b in d){this.prototype[b]=d[b]}}};Number.prototype.jSliderNice=function(g){var h=/^(-)?(\d+)([\.,](\d+))?$/;var e=Number(this);var m=String(e);var a;var j="";var o=" ";if((a=m.match(h))){var k=a[2];var c=(a[4])?Number("0."+a[4]):0;if(c){var f=Math.pow(10,(g)?g:2);c=Math.round(c*f);sNewDecPart=String(c);j=sNewDecPart;if(sNewDecPart.length<g){var d=g-sNewDecPart.length;for(var b=0;b<d;b++){j="0"+j}}j="."+j}else{if(g&&g!=0){for(var b=0;b<g;b++){j+="0"}j="."+j}}var n;if(Number(k)<1000){n=k+j}else{var l="";var b;for(b=1;b*3<k.length;b++){l=o+k.substring(k.length-b*3,k.length-(b-1)*3)+l}n=k.substr(0,3-b*3+k.length)+l+j}if(a[1]){return"-"+n}else{return n}}else{return m}};this.jSliderIsArray=function(a){if(typeof a=="undefined"){return false}if(a instanceof Array||(!(a instanceof Object)&&(Object.prototype.toString.call((a))=="[object Array]")||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))){return true}return false}})();(function(){var a={};this.jSliderTmpl=function b(e,c){var d=!(/\W/).test(e)?a[e]=a[e]||b(e):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return c?d(c):d}})();(function(a){this.Draggable=function(){this._init.apply(this,arguments)};Draggable.prototype={oninit:function(){},events:function(){},onmousedown:function(){this.ptr.css({position:"absolute"})},onmousemove:function(b,c,d){this.ptr.css({left:c,top:d})},onmouseup:function(){},isDefault:{drag:false,clicked:false,toclick:true,mouseup:false},_init:function(){if(arguments.length>0){this.ptr=a(arguments[0]);this.outer=a(".draggable-outer");this.is={};a.extend(this.is,this.isDefault);var b=this.ptr.offset();this.d={left:b.left,top:b.top,width:this.ptr.width(),height:this.ptr.height()};this.oninit.apply(this,arguments);this._events()}},_getPageCoords:function(b){if(b.targetTouches&&b.targetTouches[0]){return{x:b.targetTouches[0].pageX,y:b.targetTouches[0].pageY}}else{return{x:b.pageX,y:b.pageY}}},_bindEvent:function(d,b,c){var e=this;if(this.supportTouches_){d.get(0).addEventListener(this.events_[b],c,false)}else{d.bind(this.events_[b],c)}},_events:function(){var b=this;this.supportTouches_=(a.browser.webkit&&navigator.userAgent.indexOf("Mobile")!=-1);this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"};this._bindEvent(a(document),"move",function(c){if(b.is.drag){c.stopPropagation();c.preventDefault();b._mousemove(c)}});this._bindEvent(a(document),"down",function(c){if(b.is.drag){c.stopPropagation();c.preventDefault()}});this._bindEvent(a(document),"up",function(c){b._mouseup(c)});this._bindEvent(this.ptr,"down",function(c){b._mousedown(c);return false});this._bindEvent(this.ptr,"up",function(c){b._mouseup(c)});this.ptr.find("a").click(function(){b.is.clicked=true;if(!b.is.toclick){b.is.toclick=true;return false}}).mousedown(function(c){b._mousedown(c);return false});this.events()},_mousedown:function(d){this.is.drag=true;this.is.clicked=false;this.is.mouseup=false;var b=this.ptr.offset();var c=this._getPageCoords(d);this.cx=c.x-b.left;this.cy=c.y-b.top;a.extend(this.d,{left:b.left,top:b.top,width:this.ptr.width(),height:this.ptr.height()});if(this.outer&&this.outer.get(0)){this.outer.css({height:Math.max(this.outer.height(),a(document.body).height()),overflow:"hidden"})}this.onmousedown(d)},_mousemove:function(c){this.is.toclick=false;var b=this._getPageCoords(c);this.onmousemove(c,b.x-this.cx,b.y-this.cy)},_mouseup:function(b){var c=this;if(this.is.drag){this.is.drag=false;if(this.outer&&this.outer.get(0)){if(a.browser.mozilla){this.outer.css({overflow:"hidden"})}else{this.outer.css({overflow:"visible"})}if(a.browser.msie&&a.browser.version=="6.0"){this.outer.css({height:"100%"})}else{this.outer.css({height:"auto"})}}this.onmouseup(b)}}}})(jQuery);(function(a){a.slider=function(e,f){var d=a(e);if(!d.data("jslider")){d.data("jslider",new jSlider(e,f))}return d.data("jslider")};a.fn.slider=function(d,h){var i,e=arguments;function f(j){return j!==undefined}function g(j){return j!=null}this.each(function(){var l=a.slider(this,d);if(typeof d=="string"){switch(d){case"value":if(f(e[1])&&f(e[2])){var k=l.getPointers();if(g(k[0])&&g(e[1])){k[0].set(e[1]);k[0].setIndexOver()}if(g(k[1])&&g(e[2])){k[1].set(e[2]);k[1].setIndexOver()}}else{if(f(e[1])){var k=l.getPointers();if(g(k[0])&&g(e[1])){k[0].set(e[1]);k[0].setIndexOver()}}else{i=l.getValue()}}break;case"prc":if(f(e[1])&&f(e[2])){var k=l.getPointers();if(g(k[0])&&g(e[1])){k[0]._set(e[1]);k[0].setIndexOver()}if(g(k[1])&&g(e[2])){k[1]._set(e[2]);k[1].setIndexOver()}}else{if(f(e[1])){var k=l.getPointers();if(g(k[0])&&g(e[1])){k[0]._set(e[1]);k[0].setIndexOver()}}else{i=l.getPrcValue()}}break;case"calculatedValue":var m=l.getValue().split(";");i="";for(var j=0;j<m.length;j++){i+=(j>0?";":"")+l.nice(m[j])}break;case"skin":l.setSkin(e[1]);break}}else{if(!d&&!h){if(!jSliderIsArray(i)){i=[]}i.push(slider)}}});if(jSliderIsArray(i)&&i.length==1){i=i[0]}return i||this};var c={settings:{from:1,to:10,step:1,smooth:true,limits:true,round:0,value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:jSliderTmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"><i></i></i><i class="r"><i></i></i><i class="v"><i></i></i></div><div class="<%=className%>-pointer"><i></i></div><div class="<%=className%>-pointer <%=className%>-pointer-to"><i></i></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><div class="<%=className%>-arrow"></div><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};this.jSlider=function(){return this.init.apply(this,arguments)};jSlider.prototype={init:function(d,e){this.settings=a.extend(true,{},c.settings,e?e:{});this.inputNode=a(d).hide();this.settings.interval=this.settings.to-this.settings.from;this.settings.value=this.inputNode.attr("value");if(this.settings.calculate&&a.isFunction(this.settings.calculate)){this.nice=this.settings.calculate}if(this.settings.onstatechange&&a.isFunction(this.settings.onstatechange)){this.onstatechange=this.settings.onstatechange}this.is={init:false};this.o={};this.create()},onstatechange:function(){},create:function(){var d=this;this.domNode=a(c.template({className:c.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()}));this.inputNode.after(this.domNode);this.drawScale();if(this.settings.skin&&this.settings.skin.length>0){this.setSkin(this.settings.skin)}this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};a.extend(this.o,{pointers:{},labels:{0:{o:this.domNode.find(c.selector+"value").not(c.selector+"value-to")},1:{o:this.domNode.find(c.selector+"value").filter(c.selector+"value-to")}},limits:{0:this.domNode.find(c.selector+"label").not(c.selector+"label-to"),1:this.domNode.find(c.selector+"label").filter(c.selector+"label-to")}});a.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")});a.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")});if(!d.settings.value.split(";")[1]){this.settings.single=true;this.domNode.addDependClass("single")}if(!d.settings.limits){this.domNode.addDependClass("limitless")}this.domNode.find(c.selector+"pointer").each(function(e){var g=d.settings.value.split(";")[e];if(g){d.o.pointers[e]=new b(this,e,d);var f=d.settings.value.split(";")[e-1];if(f&&new Number(g)<new Number(f)){g=f}g=g<d.settings.from?d.settings.from:g;g=g>d.settings.to?d.settings.to:g;d.o.pointers[e].set(g,true)}});this.o.value=this.domNode.find(".v");this.is.init=true;a.each(this.o.pointers,function(e){d.redraw(this)});(function(e){a(window).resize(function(){e.onresize()})})(this)},setSkin:function(d){if(this.skin_){this.domNode.removeDependClass(this.skin_,"_")}this.domNode.addDependClass(this.skin_=d,"_")},setPointersIndex:function(d){a.each(this.getPointers(),function(e){this.index(e)})},getPointers:function(){return this.o.pointers},generateScale:function(){if(this.settings.scale&&this.settings.scale.length>0){var g="";var f=this.settings.scale;var e=Math.round((100/(f.length-1))*10)/10;for(var d=0;d<f.length;d++){g+='<span style="left: '+d*e+'%">'+(f[d]!="|"?"<ins>"+f[d]+"</ins>":"")+"</span>"}return g}else{return""}return""},drawScale:function(){this.domNode.find(c.selector+"scale span ins").each(function(){a(this).css({marginLeft:-a(this).outerWidth(false)/2})})},onresize:function(){var d=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};a.each(this.o.pointers,function(e){d.redraw(this)})},limits:function(g,e){if(!this.settings.smooth){var f=this.settings.step*100/(this.settings.interval);g=Math.round(g/f)*f}var d=this.o.pointers[1-e.uid];if(d&&e.uid&&g<d.value.prc){g=d.value.prc}if(d&&!e.uid&&g>d.value.prc){g=d.value.prc}if(g<0){g=0}if(g>100){g=100}return Math.round(g*10)/10},redraw:function(d){if(!this.is.init){return false}this.setValue();if(this.o.pointers[0]&&this.o.pointers[1]){this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:(this.o.pointers[1].value.prc-this.o.pointers[0].value.prc)+"%"})}this.o.labels[d.uid].value.html(this.nice(d.value.origin));this.redrawLabels(d)},redrawLabels:function(g){function j(l,n,m){n.margin=-n.label/2;label_left=n.border+n.margin;if(label_left<0){n.margin-=label_left}if(n.border+n.label/2>i.sizes.domWidth){n.margin=0;n.right=true}else{n.right=false}l.o.css({left:m+"%",marginLeft:n.margin,right:"auto"});if(n.right){l.o.css({left:"auto",right:0})}return n}var i=this;var f=this.o.labels[g.uid];var h=g.value.prc;var k={label:f.o.outerWidth(false),right:false,border:(h*this.sizes.domWidth)/100};if(!this.settings.single){var d=this.o.pointers[1-g.uid];var e=this.o.labels[d.uid];switch(g.uid){case 0:if(k.border+k.label/2>e.o.offset().left-this.sizes.domOffset.left){e.o.css({visibility:"hidden"});e.value.html(this.nice(d.value.origin));f.o.css({visibility:"visible"});h=(d.value.prc-h)/2+h;if(d.value.prc!=g.value.prc){f.value.html(this.nice(g.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(d.value.origin));k.label=f.o.outerWidth(false);k.border=(h*this.sizes.domWidth)/100}}else{e.o.css({visibility:"visible"})}break;case 1:if(k.border-k.label/2<e.o.offset().left-this.sizes.domOffset.left+e.o.outerWidth(false)){e.o.css({visibility:"hidden"});e.value.html(this.nice(d.value.origin));f.o.css({visibility:"visible"});h=(h-d.value.prc)/2+d.value.prc;if(d.value.prc!=g.value.prc){f.value.html(this.nice(d.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(g.value.origin));k.label=f.o.outerWidth(false);k.border=(h*this.sizes.domWidth)/100}}else{e.o.css({visibility:"visible"})}break}}k=j(f,k,h);if(e){var k={label:e.o.outerWidth(false),right:false,border:(d.value.prc*this.sizes.domWidth)/100};k=j(e,k,d.value.prc)}this.redrawLimits()},redrawLimits:function(){if(this.settings.limits){var h=[true,true];for(key in this.o.pointers){if(!this.settings.single||key==0){var j=this.o.pointers[key];var e=this.o.labels[j.uid];var f=e.o.offset().left-this.sizes.domOffset.left;var g=this.o.limits[0];if(f<g.outerWidth(false)){h[0]=false}var g=this.o.limits[1];if(f+e.o.outerWidth(false)>this.sizes.domWidth-g.outerWidth(false)){h[1]=false}}}for(var d=0;d<h.length;d++){if(h[d]){this.o.limits[d].fadeIn("fast")}else{this.o.limits[d].fadeOut("fast")}}}},setValue:function(){var d=this.getValue();this.inputNode.attr("value",d);this.onstatechange.call(this,d)},getValue:function(){if(!this.is.init){return false}var d=this;var e="";a.each(this.o.pointers,function(f){if(this.value.prc!=undefined&&!isNaN(this.value.prc)){e+=(f>0?";":"")+d.prcToValue(this.value.prc)}});return e},getPrcValue:function(){if(!this.is.init){return false}var d=this;var e="";a.each(this.o.pointers,function(f){if(this.value.prc!=undefined&&!isNaN(this.value.prc)){e+=(f>0?";":"")+this.value.prc}});return e},prcToValue:function(j){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var f=this.settings.heterogeneity;var e=0;var d=this.settings.from;for(var g=0;g<=f.length;g++){if(f[g]){var k=f[g].split("/")}else{var k=[100,this.settings.to]}k[0]=new Number(k[0]);k[1]=new Number(k[1]);if(j>=e&&j<=k[0]){var l=d+((j-e)*(k[1]-d))/(k[0]-e)}e=k[0];d=k[1]}}else{var l=this.settings.from+(j*this.settings.interval)/100}return this.round(l)},valueToPrc:function(m,j){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var f=this.settings.heterogeneity;var e=0;var d=this.settings.from;for(var g=0;g<=f.length;g++){if(f[g]){var l=f[g].split("/")}else{var l=[100,this.settings.to]}l[0]=new Number(l[0]);l[1]=new Number(l[1]);if(m>=d&&m<=l[1]){var k=j.limits(e+(m-d)*(l[0]-e)/(l[1]-d))}e=l[0];d=l[1]}}else{var k=j.limits((m-this.settings.from)*100/this.settings.interval)}return k},round:function(d){d=Math.round(d/this.settings.step)*this.settings.step;if(this.settings.round){d=Math.round(d*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round)}else{d=Math.round(d)}return d},nice:function(d){d=d.toString().replace(/,/gi,".");d=d.toString().replace(/ /gi,"");if(Number.prototype.jSliderNice){return(new Number(d)).jSliderNice(this.settings.round).replace(/-/gi,"&minus;")}else{return new Number(d)}}};function b(){this.baseConstructor.apply(this,arguments)}b.inheritFrom(Draggable,{oninit:function(f,e,d){this.uid=e;this.parent=d;this.value={};this.settings=this.parent.settings},onmousedown:function(d){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()};this.ptr.addDependClass("hover");this.setIndexOver()},onmousemove:function(e,f){var d=this._getPageCoords(e);this._set(this.calc(d.x))},onmouseup:function(d){if(this.parent.settings.callback&&a.isFunction(this.parent.settings.callback)){this.parent.settings.callback.call(this.parent,this.parent.getValue())}this.ptr.removeDependClass("hover")},setIndexOver:function(){this.parent.setPointersIndex(1);this.index(2)},index:function(d){this.ptr.css({zIndex:d})},limits:function(d){return this.parent.limits(d,this)},calc:function(d){var e=this.limits(((d-this._parent.offset.left)*100)/this._parent.width);return e},set:function(e,d){this.value.origin=this.parent.round(e);this._set(this.parent.valueToPrc(e,this),d)},_set:function(e,d){if(!d){this.value.origin=this.parent.prcToValue(e)}this.value.prc=e;this.ptr.css({left:e+"%"});this.parent.redraw(this)}})})(jQuery);jQuery.cookie=function(j,i,g){if(typeof i!="undefined"){g=g||{};if(i===null){i="",g.expires=-1}var h="";if(g.expires&&(typeof g.expires=="number"||g.expires.toUTCString)){typeof g.expires=="number"?(h=new Date,h.setTime(h.getTime()+g.expires*86400000)):h=g.expires,h="; expires="+h.toUTCString()}var k=g.path?"; path="+g.path:"",l=g.domain?"; domain="+g.domain:"",g=g.secure?"; secure":"";document.cookie=[j,"=",encodeURIComponent(i),h,k,l,g].join("")}else{i=null;if(document.cookie&&document.cookie!=""){g=document.cookie.split(";");for(h=0;h<g.length;h++){if(k=jQuery.trim(g[h]),k.substring(0,j.length+1)==j+"="){i=decodeURIComponent(k.substring(j.length+1));break}}}return i}};(function(a){a.fn.lightbox_me=function(b){return this.each(function(){var j=a.extend({},a.fn.lightbox_me.defaults,b),e=a(),f=a(this),d=a('<iframe id="foo" style="z-index: '+(j.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>'),h=(a.browser.msie&&a.browser.version<7);if(j.showOverlay){var c=a(".js_lb_overlay:visible");if(c.length>0&&j.allowEmptyOverlay){e=a('<div class="lb_overlay_clear js_lb_overlay"/>')}else{e=a('<div class="'+j.classPrefix+'_overlay js_lb_overlay"/>')}}if(h){var m=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank";d.attr("src",m);a("body").append(d)}a("body").append(f.hide()).append(e);if(j.showOverlay){k();e.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:(j.zIndex+2),display:"none"});if(!e.hasClass("lb_overlay_clear")){e.css(j.overlayCSS)}}if(j.showOverlay){e.fadeIn(j.overlaySpeed,function(){l();f[j.appearEffect](j.lightboxSpeed,function(){k();l();j.onLoad()})})}else{l();f[j.appearEffect](j.lightboxSpeed,function(){j.onLoad()})}if(j.parentLightbox){j.parentLightbox.fadeOut(200)}a(window).resize(k).resize(l).scroll(l).keyup(i);e.click(function(n){g();n.preventDefault});f.delegate(j.closeSelector,"click",function(n){g();n.preventDefault()});f.bind("close",g);f.bind("reposition",l);function g(){var n=f[0].style;if(j.destroyOnClose){f.add(e).remove()}else{f.add(e).hide()}if(j.parentLightbox){j.parentLightbox.fadeIn(200)}d.remove();f.undelegate(j.closeSelector,"click");a(window).unbind("reposition",k);a(window).unbind("reposition",l);a(window).unbind("scroll",l);a(window).unbind("keypress",i);if(h){n.removeExpression("top")}j.onClose()}function i(n){if((n.keyCode==27||(n.DOM_VK_ESCAPE==27&&n.which==0))&&j.closeEsc){g()}}function k(){if(a(window).height()<a(document).height()){e.css({height:a(document).height()+"px"});d.css({height:a(document).height()+"px"})}else{e.css({height:"100%"});if(h){a("html,body").css("height","100%");d.css("height","100%")}}}function l(){var n=f[0].style;f.css({left:"50%",marginLeft:(f.outerWidth(false)/2)*-1,zIndex:(j.zIndex+3)});if((f.height()+80>=a(window).height())&&(f.css("position")!="absolute"||h)){var p=a(document).scrollTop()+40;f.css({position:"absolute",top:p+"px",marginTop:0});if(h){n.removeExpression("top")}}else{if(f.height()+80<a(window).height()){if(h){n.position="absolute";if(j.centered){n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');n.marginTop=0}else{var o=(j.modalCSS&&j.modalCSS.top)?parseInt(j.modalCSS.top):0;n.setExpression("top","((blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+o+') + "px"')}}else{if(j.centered){f.css({position:"fixed",top:"50%",marginTop:(f.outerHeight()/2)*-1})}else{f.css({position:"fixed"}).css(j.modalCSS)}}}}}})};a.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:true,closeEsc:true,destroyOnClose:false,showOverlay:true,parentLightbox:false,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:false,modalCSS:{top:"70px"},overlayCSS:{background:"black",opacity:0.5},allowEmptyOverlay:true}})(jQuery);/*
* jQuery Selectbox plugin 0.1.3
*
* Copyright 2011, Dimitar Ivanov (http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)
* Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
* 
* Date: Wed Jul 29 23:20:57 2011 +0200
*/
(function(a,f){var c="selectbox",b=false,e=true;function d(){this._state={};this._defaults={classHolder:"sbHolder",classHolderDisabled:"sbHolderDisabled",classSelector:"sbSelector",classSelectorFocused:"sbSelectorFocused",classOptions:"sbOptions",classGroup:"sbGroup",classSub:"sbSub",classDisabled:"sbDisabled",classToggleOpen:"sbToggleOpen",classToggle:"sbToggle",speed:100,delay:1000,effect:"fade",onChange:null,onOpen:null,onClose:null}}a.extend(d.prototype,{_isOpenSelectbox:function(h){if(!h){return b}var g=this._getInst(h);return g.isOpen},_isDisabledSelectbox:function(h){if(!h){return b}var g=this._getInst(h);return g.isDisabled},_attachSelectbox:function(A,z){if(this._getInst(A)){return b}var g=a(A),y=this,n=y._newInst(g),t,v,w,u,r=b,q=g.find("option");g.attr("sb",n.uid);a.extend(n.settings,y._defaults,z);n.isOpen=false;n.searching=null;n.term="";n.highlightedItem=null;n.pageSize=1;n.mouseIsInArea=false;n.focusCheck=null;g.hide();t=a("<div>",{id:"sbHolder_"+n.uid,"class":n.settings.classHolder,mouseenter:function(){n.mouseIsInArea=true},mouseleave:function(){n.mouseIsInArea=false},click:function(s){l(s)},keydown:function(s){var C=true;switch(s.keyCode){case 9:h();C=false;break;case 13:if(n.isOpen){if(n.highlightedItem){var B=n.highlightedItem.children().first();if(B){y._changeSelectbox(A,B.attr("rel"),B.text())}}h()}else{p()}break;case 27:h();break;case 36:o(true);break;case 35:o(false);break;case 33:o(true,n.pageSize);break;case 34:o(false,n.pageSize);break;case 38:o(true,1);break;case 40:o(false,1);break;default:var D=String.fromCharCode(s.keyCode);if(D.match(/[a-zA-Z0-9\s]/)){clearTimeout(n.searching);n.searching=setTimeout(function(){n.term=""},n.settings.delay);x(n.term+D);break}C=false;break}if(C){s.preventDefault();s.stopPropagation()}}});if(g.children().length>1){v=a("<a>",{id:"sbSelector_"+n.uid,href:"#","class":n.settings.classSelector,tabindex:A.tabindex,focus:function(){clearTimeout(n.focusCheck);v.addClass(n.settings.classSelectorFocused)},blur:function(){v.removeClass(n.settings.classSelectorFocused);clearTimeout(n.focusCheck);n.focusCheck=setTimeout(function(){if(!n.mouseIsInArea){h()}},100)},click:function(s){l(s)}})}else{v=a("<div>",{id:"sbSelector_"+n.uid,"class":n.settings.classSelector,tabindex:A.tabindex})}w=a("<a>",{id:"sbToggle_"+n.uid,href:"#","class":n.settings.classToggle,tabindex:-1,click:function(s){l(s)}});u=j();function j(){var s='<ul id="sbOptions_'+n.uid+'" ';s+='class="'+n.settings.classOptions+'" ';s+='tabindex="-1" style="display:none;">';g.children().each(function(){var C=a(this),B={};if(C.is("option")){s+=k(C)}else{if(C.is("optgroup")){s+='<li><span class="'+n.settings.classGroup+'">';s+=C.attr("label");s+="</span></li>";if(C.attr("disabled")){B.disabled=true}B.sub=true;s+=k(C.find("option"),B)}}});s+="</ul>";return a(s).on("click","li",function(B){y._changeSelectbox(A,a(this).attr("rel"),a(this).text());h();v.focus();B.preventDefault();B.stopPropagation()}).on("mouseenter","li",function(B){m(a(this))}).on("click","a",function(B){y._changeSelectbox(A,a(this).attr("rel"),a(this).text());h();v.focus();B.preventDefault();B.stopPropagation()})}function l(s){if(n.isOpen){h()}else{p()}s.preventDefault();s.stopPropagation()}function i(){a("select[sb!='"+n.uid+"']").selectbox("close")}function p(){if(n.isOpen){return}i.apply(a(this),[]);var B=g.find("option[selected]");if(B.length){m(u.find("a[rel='"+B.attr("value")+"']").parent())}y._openSelectbox(A);v.focus();var s=u.children().first();if(s.length){n.pageSize=Math.floor(u.height()/s.outerHeight());if(n.pageSize<1){n.pageSize=1}}}function h(){if(!n.isOpen){return}clearTimeout(n.searching);if(n.highlightedItem){n.highlightedItem.removeClass("highlighted");n.highlightedItem=null}n.activeSelection=null;y._closeSelectbox(A)}function o(D,C){if(!n.isOpen){p();return}var s="li:has(a)";var B=null;if(n.highlightedItem&&C){if(C===1){B=(D)?n.highlightedItem.prev(s):n.highlightedItem.next(s)}else{var E=(D)?n.highlightedItem.prevAll(s):n.highlightedItem.nextAll(s);if(E.length){if(E.length>C){B=E.eq(C)}else{B=E.last()}}}}else{if(C){D=!D}B=(D)?u.children(s).first():u.children(s).last()}if(B&&B.length){m(B)}}function x(B){var s=new RegExp("^"+B);u.find("a").each(function(){var C=a(this);if(s.test(C.text().toUpperCase())){m(C.parent());n.term=B;if(!n.isOpen){p()}return false}})}function m(C){if(C===n.highlightedItem){return}if(n.highlightedItem){n.highlightedItem.removeClass("highlighted")}if(C&&C.length>0){n.highlightedItem=C;C.addClass("highlighted");var D=parseInt(u.css("maxHeight"),10);var F=u.scrollTop();var E=D+F;var B=C.position().top+F;var s=B+C.outerHeight();if(s>=E){u.scrollTop((s-D)>0?s-D:0)}else{if(B<F){u.scrollTop(B)}}}}function k(){var C=arguments[1]&&arguments[1].sub?true:false,s=arguments[1]&&arguments[1].disabled?true:false,B="";arguments[0].each(function(){var D=a(this);B+="<li>";if(D.attr("selected")){v.text(D.text());t.addClass(D.attr("class"));r=e}if(!D.attr("disabled")&&!s){B+='<a href="#'+Common.replaceAll(D.val(),'"',"&quot;")+'"';B+='rel="'+Common.replaceAll(D.val(),'"',"&quot;")+'"';B+='class="'+(D.attr("class")?D.attr("class"):"");if(C){B+=" "+n.settings.classSub}B+='"';B+='tabindex="-1">';B+=D.text();B+="</a>"}else{B+='<span class="'+n.settings.classDisabled;if(C){B+=" "+n.settings.classSub}B+='">';B+=D.text();B+="</span>"}B+="</li>"});return B}if(!r){v.text(q.first().text())}a.data(A,c,n);if(g.children().length>1){w.appendTo(t);v.appendTo(t);u.appendTo(t)}else{v.appendTo(t)}t.insertAfter(g)},_detachSelectbox:function(h){var g=this._getInst(h);if(!g){return b}a("#sbHolder_"+g.uid).remove();a.data(h,c,null);a(h).show()},_changeSelectbox:function(k,m,l){var g=this._getInst(k),h=this._get(g,"onChange");var i=a(k).find("option[selected]");if(i.length&&i.attr("value")===m){return}a("#sbSelector_"+g.uid).text(l);var j=a(k).find("option[value='"+m+"']");j.attr("selected",e);a("#sbHolder_"+g.uid).attr("class",g.settings.classHolder);if(j.attr("class")!=""){a("#sbHolder_"+g.uid).addClass(j.attr("class"))}if(i.length){i.removeAttr("selected")}if(h){h.apply((g.input?g.input[0]:null),[m,g])}else{if(g.input){g.input.trigger("change")}}},_enableSelectbox:function(h){var g=this._getInst(h);if(!g||!g.isDisabled){return b}a("#sbHolder_"+g.uid).removeClass(g.settings.classHolderDisabled);g.isDisabled=b;a.data(h,c,g)},_disableSelectbox:function(h){var g=this._getInst(h);if(!g||g.isDisabled){return b}a("#sbHolder_"+g.uid).addClass(g.settings.classHolderDisabled);g.isDisabled=e;a.data(h,c,g)},_optionSelectbox:function(i,h,j){var g=this._getInst(i);if(!g){return b}g[h]=j;a.data(i,c,g)},_openSelectbox:function(p){var j=this._getInst(p);if(!j||j.isOpen||j.isDisabled){return}var h=a("#sbOptions_"+j.uid),l=h.parents(".modal-content"),n=this._get(j,"onOpen"),k=200;if(l.length==1){k=l.height()/2}else{var q=parseInt(a(window).height(),10),m=a("#sbHolder_"+j.uid).offset(),o=a(window).scrollTop(),i=h.prev().height(),g=q-(m.top-o)-i/2;k=g-i}h.css({maxHeight:k+"px"});switch(j.settings.effect){case"fade":a("#sbOptions_"+j.uid).stop().fadeIn(j.settings.speed);break;case"hide":a("#sbOptions_"+j.uid).show();break;default:a("#sbOptions_"+j.uid).stop().slideDown(j.settings.speed)}a("#sbToggle_"+j.uid).addClass(j.settings.classToggleOpen);this._state[j.uid]=e;j.isOpen=e;if(n){n.apply((j.input?j.input[0]:null),[j])}a.data(p,c,j)},_closeSelectbox:function(i){var g=this._getInst(i);if(!g||!g.isOpen){return}var h=this._get(g,"onClose");switch(g.settings.effect){case"fade":a("#sbOptions_"+g.uid).stop().fadeOut(g.settings.speed);break;case"hide":a("#sbOptions_"+g.uid).hide();break;default:a("#sbOptions_"+g.uid).stop().slideUp(g.settings.speed)}a("#sbToggle_"+g.uid).removeClass(g.settings.classToggleOpen);this._state[g.uid]=b;g.isOpen=b;if(h){h.apply((g.input?g.input[0]:null),[g])}a.data(i,c,g)},_newInst:function(h){var g=h[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:g,input:h,uid:Math.floor(Math.random()*99999999),isOpen:b,isDisabled:b,settings:{}}},_getInst:function(h){try{return a.data(h,c)}catch(g){throw"Missing instance data for this selectbox"}},_get:function(g,h){return g.settings[h]!==f?g.settings[h]:this._defaults[h]}});a.fn.selectbox=function(g){var h=Array.prototype.slice.call(arguments,1);if(typeof g=="string"&&g=="isDisabled"){return a.selectbox["_"+g+"Selectbox"].apply(a.selectbox,[this[0]].concat(h))}if(g=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return a.selectbox["_"+g+"Selectbox"].apply(a.selectbox,[this[0]].concat(h))}return this.each(function(){typeof g=="string"?a.selectbox["_"+g+"Selectbox"].apply(a.selectbox,[this].concat(h)):a.selectbox._attachSelectbox(this,g)})};a.selectbox=new d();a.selectbox.version="0.1.3"})(jQuery);var Cookies=(function(a){var b={};b.get=function(g){var c=document.cookie.split(";"),f,h,d,e;for(e=0;e<c.length;e++){d=c[e].split("=");f=d[0];h=d[1];if(a.trim(f)===g){return decodeURIComponent(h)}}return null};b.set=function(g,h,d){var e="",c,f=86400000;if(d){c=new Date();c.setTime(c.getTime()+(d*f));e="; expires="+c.toGMTString()}document.cookie=g+"="+h+e+"; path=/"};b.clear=function(){var c=document.cookie.split(";"),e,d;for(d=0;d<c.length;d++){e=c[d].split("=")[0];if(a.trim(e).indexOf("__")!==0){b.set(e,"",-1)}}};return b}(jQuery));var TopNavigation=(function(a){var b={};b.AttachEvents=function(c){a(c).click(function(d){a(".account-wrap .hovered:visible").hide();a(c).parentsUntil(".account-wrap").siblings().children().children().removeClass("active");a(c).parentsUntil(".account-wrap").siblings().removeClass("active");if(a(c).parent().hasClass("active")){a(".hovered",a(c).parent()).fadeOut("fast");a(c).parent().removeClass("active")}else{a(".hovered",a(c).parent()).fadeIn("fast");a(c).parent().addClass("active")}d.preventDefault()})};return b}(jQuery));var Html=(function(a){var b={};b.ClickAnywhere=function(){a("select[sb]").selectbox("close");a(".hovered").hide();a(".account-nav li, .cart-nav li").removeClass("active")};return b}(jQuery));$(".account-wrap .trigger").each(function(){TopNavigation.AttachEvents(this)});$(".close").click(function(a){$("select[sb]").selectbox("close");$(this).closest(".hovered").fadeOut("fast");$(this).parentsUntil(".account-nav").removeClass("active");a.preventDefault()});$("html").click(function(){Html.ClickAnywhere()});$(".account-nav li, .cart-nav li").click(function(a){$("select[sb]").selectbox("close");a.stopPropagation()});$(".account-wrap .trigger").click(function(){Header.ClearFields("header .create-account-form");Header.ClearFields("header .member-sign-in-form");Header.ClearFields("header #need-support-form");Header.ClearFields("header .password-reset-form");Fonts.Account.RestoreMemberSigninForm();Fonts.Account.RestoreNeedSupportForm()});$(function(){$("select.adorn").selectbox();$("input.show-me").show();Cart.BindCartItemRemoveAction($(".hovered-cart .remove"));Cart.BindCartItemCancelRemoveAction($(".hovered-cart .cancel"));Cart.AttachEventsToRemoveCartItemLink()});var AttachAutoCompleteSearch=function(){$("#searchtext").autocomplete({serviceUrl:"/search-autocomplete",width:236});$("#searchtext1").autocomplete({serviceUrl:"/search-autocomplete",width:478});$("#searchtext, #searchtext1").keypress(function(a){if(a.which===13){$(this).blur();$("#search input[type='submit']").focus().click();a.preventDefault();return false}return true})};var productPopperLinks=$(".productpopper"),productPopup=$('<div class="product-popup" style="display:none;"></div>').appendTo("body"),productPopupTimer=0,productPopupShowTimer=0,popupCache=[],popupCurrentKey,closeProductPopup=function(){popupCurrentKey=null;productPopupTimer=setTimeout(function(){productPopup.hide().html("")},250)},showPopup=function(c,b){if(b.indexOf("Not Found")===-1){clearTimeout(productPopupTimer);var f=c.offset(),g=c.hasClass("popleft"),h=c.hasClass("popright"),d=c.height(),a,i,e;if(g){i=f.top-20;e=f.left-185;a='<div class="popuparrow-right"></div>'}else{if(h){i=f.top-20;e=f.left+c.width()+23;a='<div class="popuparrow-left"></div>'}else{i=f.top+d+15;e=f.left-20;a='<div class="popuparrow-up"></div>'}}productPopup.html(a+b).css({top:i+"px",left:e+"px"}).fadeIn("fast")}};productPopup.bind("mouseenter",function(){clearTimeout(productPopupTimer)}).bind("mouseleave",closeProductPopup);productPopperLinks.click(function(a){a.preventDefault();$(document).unbind("ajaxError");var b=$(this).attr("href");if(b!=="undefined"&&b!=null){window.location=b}});productPopperLinks.bind("mouseenter",function(){var b=$(this),e=b.attr("href"),d=b.data("frs-id"),c=popupCache[e];popupCurrentKey=e;if(c){clearTimeout(productPopupShowTimer);productPopupShowTimer=setTimeout(function(){showPopup(b,c)},200)}else{if(SiteUrls&&SiteUrls.getProductPopup()){$.post(SiteUrls.getProductPopup(),{href:e,frsId:d},function(a){popupCache[e]=a;if(popupCurrentKey===e){showPopup(b,a)}})}}}).bind("mouseleave",function(){clearTimeout(productPopupShowTimer);closeProductPopup()});var Header=(function(a){var b={};b.ClearFields=function(c){a(c+" span.error-text").text("");a(c+" input, "+c+" textarea").removeClass("input-validation-error");a(c+' input[type="text"], '+c+' input[type="password"], '+c+" textarea").val("");a(c+" .sbSelector").text("Please select product type");a(c+" .need-support-product-type").find("option[value='']").attr("selected","selected");a(c+" .user-message").html("");a(c+" #default-user-messages-container").hide();a(c+" #error-user-message-container").hide();a(c+" #success-user-message-container").hide()};return b}(jQuery));var FontFamily=(function(a){var b={};b.OnSuccessRateFamily=function(c){var d;if(c.Success){d={container:"#user-messages",data:c.Messages}}else{d={container:"#user-messages",data:c.Messages,removeAfter:-1}}Fonts.UI.ShowAndRemove(d)};return b}(jQuery));var SideBar=(function(a){var b={};b.ToggleShowMoreFontsInThisProduct=function(){if(window.showMoreFontsInThisProduct!=true){a(".more-fontsinthisproduct").show();a("#show-more-fontsinthisproduct").html(" - Less...");window.showMoreFontsInThisProduct=true}else{a(".more-fontsinthisproduct").hide();a("#show-more-fontsinthisproduct").html(" + More...");window.showMoreFontsInThisProduct=false}};b.ToggleShowMoreCategories=function(){if(window.showMoreCategories===false){a(".more-categories").show();a("#show-more-categories").html(" - Less...");window.showMoreCategories=true}else{a(".more-categories").hide();a("#show-more-categories").html(" + More...");window.showMoreCategories=false}};b.ToggleShowMoreKeywords=function(){if(window.showMoreKeywords===false){a(".more-keywords").show();a("#show-more-keywords").html(" - Less...");window.showMoreKeywords=true}else{a(".more-keywords").hide();a("#show-more-keywords").html(" + More...");window.showMoreKeywords=false}};b.ToggleAddKeywordForm=function(c){a(c).toggle();a("input:[name=Name]",c).focus()};return b}(jQuery));var ButtonLoader=(function(a){var b={};b.ShowLoader=function(d){a(d).show();var c=a(d).parents("button");c.attr("disabled","disabled");c.addClass("button-disabled")};b.HideLoader=function(d){a(d).hide();var c=a(d).parents("button");c.removeAttr("disabled");c.removeClass("button-disabled")};return b}(jQuery));var BindTextPopperHover=function(a){if(a){a.hover(function(){var b=$(this);b.data("timer",setTimeout(function(){b.next(".popup").fadeIn("fast")},250))},function(){clearTimeout($(this).data("timer"));$(this).next(".popup").fadeOut("fast")})}};var Spinner=(function(a){var b={};b.ShowLoading=function(h,i){var c=a(h);if(c){var e=a('<div class = "ajax-loader-background">');e.width(c.outerWidth(true));e.height(c.outerHeight(true));e.zIndex(c.zIndex()+1);var d=a('<div class = "ajax-loader" style="float:none;">');d.zIndex(e.zIndex()+1);var g=a('<p class="ajax-loader-text">');if(i){g.html(i+"...")}else{g.html("Processing...")}var f=a('<div class = "ajax-loader-container">');f.append(d);f.append(g);e.append(f);c.append(e)}};b.HideLoading=function(d){var c=a(d);if(c){a(".ajax-loader-background",c).remove()}};return b}(jQuery));SiteUrls=(function(a){var c={};var b={};c.changeHeroImage=function(){return b.changeHeroImageTemplateAddress};c.getProductPopup=function(){return b.getProductPopupTemplate};c.getFeaturedFontsRolloverPopup=function(){return b.getFeaturedFontsRolloverPopupTemplate};c.customerMemberForms=function(){return b.customerMemberForms};c.customerNeedSupportSection=function(){return b.customerNeedSupportSection};c.cartTotalSection=function(){return b.cartTotalSection};c.miniCartSection=function(){return b.miniCartSection};c.bindUrls=function(e,i,h,f,g,d,j){b.changeHeroImageTemplateAddress=e;b.getProductPopupTemplate=i;b.getFeaturedFontsRolloverPopupTemplate=h;b.customerMemberForms=f;b.customerNeedSupportSection=g;b.cartTotalSection=d;b.miniCartSection=j};return c}(jQuery));var Fonts=(function(a){var b={};b.makeSelectorWithHashIESafe=function(d){var e=d.split("#"),c=d;if(e.length>1){c="#"+e[1]}return c};return b}(jQuery));Fonts.Urls=(function(a){var c={};var b={};c.changeHeroImage=function(){return b.changeHeroImageTemplateAddress};c.applyCartCoupon=function(){return b.applyCartCouponAddressTemplate};c.getBillingStatesListAddress=function(){return b.getBillingStatesListAddressTemplate};c.getAccountStatesListAddress=function(){return b.getAccountStatesListAddressTemplate};c.getChangePaymentPlan=function(){return b.getChangePaymentPlanTemplate};c.getChangePaymentFrequency=function(){return b.getChangePaymentFrequencyTemplate};c.getProductPopup=function(){return b.getProductPopupTemplate};c.getRolloverPopup=function(){return b.getRolloverPopupTemplate};c.searchFamilyProductsAddress=function(){return b.searchFamilyProductsAddress};c.getWishListProductsAddress=function(){return b.getWishListProductsAddress};c.getOrdersAndDownloads=function(){return b.ordersAndDownloads};c.getCancelSubscriptionUrl=function(){return b.getCancelSubscriptionTemplate};c.getGenerateAuthorizationToken=function(){return b.getGenerateAuthorizationTokenTemplate};c.getSaveAuthorizationToken=function(){return b.getSaveAuthorizationTokenTemplate};c.getPurchaseSubscriptionStatesListAddress=function(){return b.getPurchaseSubscriptionStatesListAddressTemplate};c.getCalculateTaxVatOptional=function(){return b.getCalculateTaxVatOptionalTemplate};c.getApplyPromotionCodeToCart=function(){return b.getApplyPromotionCodeToCartTempale};c.familyProductsAddress=function(){return b.familyProductsAddress};c.getCartFloatingNavigation=function(){return b.getCartFloatingNavigation};c.getUpdateCartLicenseQuantityAddress=function(){return b.updateCartLicenseQuantity};c.getUpdateProjectAddress=function(){return b.updateProjectAddress};c.getDeleteProjectAddess=function(){return b.deleteProjectAddess};c.getCartPageSummary=function(){return b.getCartPageSummary};c.getCartItemsDetails=function(){return b.getCartItemsDetails};c.getCartItemsDetailsReadonly=function(){return b.getCartItemsDetailsReadonly};c.deleteCartItem=function(){return b.deleteCartItem};c.getAddToCartCheck=function(){return b.addToCartCheck};c.getCancelCheck=function(){return b.cancelCheck};c.getLoginUrl=function(){return b.loginUrl};c.getClientAliasLabel=function(){return b.clientAliasLabelTemplate};c.getUpdateCartItemFeature=function(){return b.updateCartItemFeature};c.getUpdateCartItemFormat=function(){return b.updateCartItemFormat};c.getCartPaymentInformationSection=function(){return b.cartPaymentInformationSection};c.getCartPageUrl=function(){return b.cartPageUrl};c.getCartVatCalculationUrl=function(){return b.cartVatCalculationUrl};c.addSpecimenImage=function(){return b.addSpecimenImage};c.getAddRefinementsUrl=function(){return b.addRefinementsUrl};c.getRemoveRefinementsUrl=function(){return b.removeRefinementsUrl};c.fontFeaturesRolloversUrl=function(){return b.fontFeaturesRolloversUrl};c.getAccountInformationForm=function(){return b.accountInformationForm};c.getAuthenticationKeyForm=function(){return b.authenticationKeyForm};c.getUpdatePaymentInformationForm=function(){return b.updatePaymentInformationForm};c.addSpecimenImageThumb=function(){return b.addSpecimenImageThumb};c.getSubscriptionPlanDialog=function(){return b.getSubscriptionPlanDialog};c.bindUrls=function(o,i,w,u,E,D,G,H,O,K,M,y,F,I,x,v,s,z,C,A,q,R,T,r,B,h,k,L,p,P,Q,m,l,n,f,e,N,t,d,j,S,g,J){b.changeHeroImageTemplateAddress=o;b.applyCartCouponAddressTemplate=i;b.getBillingStatesListAddressTemplate=w;b.getAccountStatesListAddressTemplate=u;b.getChangePaymentPlanTemplate=E;b.getChangePaymentFrequencyTemplate=D;b.getProductPopupTemplate=G;b.getRolloverPopupTemplate=H;b.searchFamilyProductsAddress=O;b.getWishListProductsAddress=K;b.ordersAndDownloads=M;b.getCancelSubscriptionTemplate=y;b.getGenerateAuthorizationTokenTemplate=F;b.getSaveAuthorizationTokenTemplate=I;b.getCalculateTaxVatOptionalTemplate=x;b.getApplyPromotionCodeToCartTempale=v;b.familyProductsAddress=s;b.getCartFloatingNavigation=z;b.updateCartLicenseQuantity=R;b.updateProjectAddress=T;b.deleteProjectAddess=r;b.getCartPageSummary=C;b.getCartItemsDetails=A;b.deleteCartItem=q;b.getCartItemsDetailsReadonly=B;b.addToCartCheck=h;b.cancelCheck=k;b.loginUrl=L;b.clientAliasLabelTemplate=p;b.updateCartItemFeature=P;b.updateCartItemFormat=Q;b.cartPaymentInformationSection=m;b.cartPageUrl=l;b.cartVatCalculationUrl=n;b.addSpecimenImage=f;b.addRefinementsUrl=e,b.removeRefinementsUrl=N;b.fontFeaturesRolloversUrl=t;b.accountInformationForm=d;b.authenticationKeyForm=j;b.updatePaymentInformationForm=S;b.addSpecimenImageThumb=g;b.getSubscriptionPlanDialog=J};return c}(jQuery));$(document).ajaxError(function(a,c,f,b){if(c.status===401&&f.url.indexOf("/web-fonts/")!=-1){var d={ReturnUrl:window.location.pathname};window.location.href=Fonts.Urls.getLoginUrl()+"?"+$.param(d)}else{if(typeof Fonts!=="undefined"&&typeof Fonts.Messages!=="undefined"){if(Fonts.Messages.existsContainer()){Fonts.Messages.clearAll();Fonts.Messages.addError(Fonts.Translations.getErrorMessage())}}else{alert(Fonts.Translations.getErrorMessage())}}});Fonts.UI=(function(a){var f={};f.ShowAndRemove=function(j){var k=a(j.container),l=j.removeAfter||3000,g="TempIntervalId",i=k.data(g),h=function(){if(l>0){clearInterval(i);i=setTimeout(function(){k.children().fadeOut(function(){k.empty();if(typeof j.callback==="function"){j.callback()}})},l)}k.data(g,i)};k.hide().html(j.data).fadeIn(h)};var d=function(){a(".pricing .sbSelector, .offer-field .sbSelector").each(function(){var g=a(this).text();a(this).html(g.replace(/^(.*?)(\s*-\s*)([^\d]*)(((\d*,)*\d*\.)|((\d*\.)*\d*,))(\d*)(\s)(.*)$/,'<span class="format">$1</span><span class="symbol">$3</span><span class="price">$4</span><span class="decimals">$9</span><span class="price-currency">$11</span>'))})};f.bindStylePrice=function(){d();a("aside.pricing select, aside.offer-field select").unbind("change").bind("change").change(function(){d()})};f.Confirm=function(p,k,i,g,m,l,n){var o=true;if(typeof n!=="undefined"){try{if(a.isFunction(n)){o=n()}else{if(typeof n==="string"){o=(new Function(n))()}}}catch(j){o=false}}if(o){var h=a(a("#fonts-modal-confirmation").html());h.find("#confirm-title").html(e(p));h.find("#confirm-message").html(e(k));h.find(".input-submit-remove").val(e(i));h.find(".close-popup").text(e(g));h.lightbox_me({destroyOnClose:true,showOverlay:true,allowEmptyOverlay:false,zIndex:9900,onLoad:function(){if(typeof m!=="undefined"){h.find(".input-submit-remove").click(function(){try{if(a.isFunction(m)){m()}else{if(typeof m==="string"){new Function(m)()}}}finally{h.trigger("close")}})}h.find(".close-popup").click(function(){h.trigger("close")})},onClose:function(){if(typeof l!=="undefined"){if(a.isFunction(m)){l()}else{if(typeof m==="string"){new Function(l)()}}}}})}};f.Alert=function(i){try{var g=a(".alert-modal");if(g.length===0){g=a(a("#fonts-modal-alert").html());g.lightbox_me({destroyOnClose:true})}var j=new UserMessages(jQuery,"fonts-alert-messages");g.find("#alert-title").html(i);return j}catch(h){return Fonts.Messages}};f.SubmitJsonpForm=function(i,n,k,m,l){var o=c(k);if(o!==false){var p=i.attr("action");if(p.indexOf("?")===-1){p=p+"?jsoncallback=?"}else{p=p+"&jsoncallback=?"}var j=i.serializeArray();var g=[];a.each(j,function(){if(a.inArray(this.name,g)===-1){g.push(this.name);a.cookie("__jsonpform_"+this.name,this.value,{secure:true,path:"/"})}});try{a.getJSON(p,function(q){c(n,q)}).error(function(){c(m,null)}).complete(function(){b(g);c(l,null)})}catch(h){if(g){b(g);c(m,null)}}}else{c(l,null)}};f.isRequiredFieldEmpty=function(g,h,i){var j=a(h);a(g).removeClass("input-validation-error");if(a(g).val().length==0){a(g).addClass("input-validation-error");a(g).focus();a(i).css("display","block");return false}else{j.showLoading();a(i).css("display","none");return true}};f.BindJsonpFormSubmitEvents=function(g){if(typeof g=="undefined"){g=a("html")}a(".jsonp-form",g).each(function(){a(this).submit(function(j){try{j.preventDefault();var h=a(this);if(!h.valid||!!h.valid&&h.valid()){var n=h.attr("data-jsonp-onSuccess");var k=h.attr("data-jsonp-onBegin");var m=h.attr("data-jsonp-onError");var l=h.attr("data-jsonp-onComplete");f.SubmitJsonpForm(h,n,k,m,l)}}catch(i){}return false})})};a(function(){f.BindJsonpFormSubmitEvents()});a(document).on("click","a[data-confirm=modal],input[data-confirm=modal]",function(){var g=a(this);Fonts.UI.Confirm(g.data("title"),g.data("message"),g.data("confirmText"),g.data("cancelText"),g.data("onConfirm"),g.data("onCancel"),g.data("onOpen"))});function e(h){try{if(a.isFunction(h)){return h()}}catch(g){}return h}function c(g,j){try{if(typeof g!=="undefined"){if(a.isFunction(g)){if(j!==null){return g(j)}else{return g()}}else{if(typeof g==="string"){var i=new Function(g);if(j!==null){return i.call(j,j)}else{return i()}}}}}catch(h){return false}}function b(h){try{a.each(h,function(){a.cookie("__jsonpform_"+this,null)})}catch(g){}}f.accordBarExpandCollapseHandling=function(i,h){var g=a(i);g.toggleClass("collapse");if(typeof h==="function"){g.next(".pairing").slideToggle("fast",h)}else{g.next(".pairing").slideToggle("fast")}g.find("span").text((g.find("span").text()==="Open")?"Close":"Open")};f.accordBarNavigateHandling=function(m,k){var h=a(m).parents(".accord-group");var g;if(h.next(".accord-group-container").size()){var j=h.next(".accord-group-container");var i=j.find(".accord-group:first");if(!i){return true}f.accordBarExpandCollapseHandling(h.find(".accord-bar"),k);g=a(m).hasClass("back")?h.prev():i}else{if(!h.next(".accord-group").size()){return true}f.accordBarExpandCollapseHandling(h.find(".accord-bar"),k);if(a(m).hasClass("back")&&!h.prev().size()&&h.parents(".accord-group-container").size()){g=h.parents(".accord-group-container").prev()}else{g=h.next()}}if(g.find(".pairing:hidden").size()){var l=g.find(".accord-bar");if(l){f.accordBarExpandCollapseHandling(l,k)}}};f.tabSortSwitcher=function(g){if(g&&g.length!==0){g.click(function(i){a("ul.tabs li, ul.sort li").removeClass("active");a(this).addClass("active");a(".tab-content, .sort-content").hide();var h=Fonts.makeSelectorWithHashIESafe(a(this).find("a").attr("href"));a(h).show();i.preventDefault()})}};f.wishListDropDowns=function(g){var h="select.wish-list-drop-down-list",i=g instanceof jQuery?g.find(h):a(h);i.selectbox({onChange:function(k,j){j.input.trigger("change");f.SetGoToWishListLink(k,j.input.closest("div.dropdown"))}})};f.productVariationSelects=function(g){var h='select[name="VariationId"]:not(#product-variation-select, #webfont-variation-select)',i=g instanceof jQuery?g.find(h):a(h);i.selectbox({onChange:function(o,l){l.input.trigger("change");var n=l.input.closest("div.select-wrap"),j,k,m;n.find("div.product-variation-customer-currency span:visible").css("display","none");n.find("#pv_"+o).css("display","block");m=l.input.attr("id");if(m&&m.lastIndexOf("variation-select")!=-1){j=a("#feature-upgrade");k=j.attr("href");if(k){j.attr("href",k.replace(/selectedProductVariationId=\d+/g,"selectedProductVariationId="+o))}}}})};f.asideProductVariationSelects=function(g){a(g).selectbox({onChange:function(j,h){h.input.trigger("change");var i=h.input.closest("div.select-wrap");i.find("div.product-variation-customer-currency span:visible").css("display","none");i.find("#pv_"+j).css("display","block");window.location.href=window.location.pathname+"?var="+j}})};f.SetGoToWishListLink=function(k,g){var j="a.go-to-wish-list",h=g instanceof jQuery?g.find(j):a(j),i=h.attr("href");if(i){i=i.substring(0,i.lastIndexOf("/")+1)+k;h.attr("href",i)}};f.updateWishListDropDowns=function(g){a("select.wish-list-drop-down-list").selectbox("detach").replaceWith(g.WishListSelectHtml);Fonts.UI.wishListDropDowns();Fonts.UI.SetGoToWishListLink(g.WishListId);a("div.add-to-wish-list-content:hidden").show();a("p.go-to-wish-list-container:hidden").show()};f.updateWebFontProjectDropDowns=function(g){if(g.WebFontsProjectsHtml){a("input.new-webfontsproject-name").hide().val("");a('select[name="ProjectId"]').selectbox("detach").replaceWith(g.WebFontsProjectsHtml);Fonts.UI.AttachAddToWebFontDropDownsEvents()}};f.ToggleNewProjectNameField=function(h){if(h instanceof jQuery){var g=h.find("input[name=ProjectName]");if(g.length>0){var i=h.find("select[name=ProjectId]").val();if(i===""){g.show()}else{g.hide()}}}};f.AttachAddToWebFontDropDownsEvents=function(g){var h='select[name="ProjectId"]',i=g instanceof jQuery?g.find(h):a(h);i.selectbox({onChange:function(k,j){f.ToggleNewProjectNameField(j.input.closest("form"))}})};f.showAsideSpinner=function(){if(a("#product-page-cart").length>0){a("#product-page-cart").showLoading()}else{if(a("#product-page-basket").length>0){a("#product-page-basket").showLoading()}}};f.hideAsideSpinner=function(){if(a("#product-page-cart").length>0){a("#product-page-cart").hideLoading()}else{if(a("#product-page-basket").length>0){a("#product-page-basket").hideLoading()}}};return f}(jQuery));Fonts.WebFontManager=(function(){var a={};function d(f){this.iteration=0;this.intervals=[100,200,300,500,800,1300,2100];this.limit=this.intervals.length;this.success=false;this.busy=false;this.mainAction=typeof f.mainAction==="function"?f.mainAction:function(){return true};this.endAction=typeof f.endAction==="function"?f.endAction:function(){};this.onEndCallback=typeof f.onEndCallback==="function"?f.onEndCallback:function(){};this.work=function(){var g=this;if(!g.busy){g.busy=true;g.iteration+=1;g.success=g.mainAction();g.busy=false;if(!g.success&&g.iteration<g.limit){g.processor=setTimeout(function(){g.work.call(g)},g.intervals[g.iteration])}if(!g.success&&g.iteration===g.limit){g.endAction()}if(g.success||g.iteration===g.limit){g.onEndCallback()}}};this.start=function(){var g=this;g.processor=setTimeout(function(){g.work.call(g)},g.intervals[g.iteration])};return this}function e(f){this.workers=[];this.activeWorkers=this.workers.length;this.allDone=typeof f.allDone==="function"?f.allDone:function(){};this.addWorker=function(h){var g=this;h.onEndCallback=function(){g.activeWorkers-=1;if(g.activeWorkers===0){g.allDone()}};g.workers.push(new d(h));g.activeWorkers+=1};this.start=function(){for(var g=0;g<this.activeWorkers;g++){this.workers[g].start()}}}function c(f,g){var h=!(f===g.width());if(h){$('[data-font-family="'+g.attr("data-font-family")+'"]').css("visibility","")}return h}function b(f){$('[data-font-family="'+f.attr("data-font-family")+'"]').css("visibility","")}a.StartWebFontsListener=function(f){var h=f instanceof jQuery?f.find("#font-families-to-load-container"):$("#font-families-to-load-container");if(h.length==0&&f!=undefined){h=f.filter("#font-families-to-load-container")}var i=h.find("span.default").width(),g=h.find("span:not(.default)");workersManager=new e({allDone:function(){h.remove()}});if(g.length){g.each(function(){(function(j){workersManager.addWorker({mainAction:function(){return c(i,j)},endAction:function(){b(j)}})}($(this)))})}else{if(f instanceof jQuery){f.find("[data-font-family]").css("visibility","")}else{$("[data-font-family]").css("visibility","")}}workersManager.start()};return a}(jQuery));$(function(){Fonts.WebFontManager.StartWebFontsListener()});Homepage=(function(a){var b={};var c={};b.delayedFunctions=Array();b.bindUrls=function(e,d){c.identifyUrl=e;c.browseUrl=d};b.AttachFeaturedFonts=function(){a(".featured-fonts a").mouseenter(function(d){a.post(SiteUrls.getFeaturedFontsRolloverPopup(),null,function(e){a(".featured-fonts").replaceWith(e);a(".featured-fonts li").mouseenter(function(f){a(this).children(".description").stop(true,true).fadeIn("fast");f.preventDefault()});a(".featured-fonts li").mouseleave(function(f){a(this).children(".description").stop(true,true).fadeOut("fast");f.preventDefault()})})})};b.AttachNeedMoreInspiration=function(){var f=a('<div id="overlay" style="display: none"/>');var d=a(".hero-tab");var g=function(){d.toggleClass("open");a(".hero-wrap").prepend(f);a(f).toggle();a(".hero-tab ul").slideToggle()};var e=function(){a(".hero-tab ul").slideUp();a(".hero-tab").removeClass("open");a(f).hide()};a(".hero-tab-head-link").click(function(h){g();h.preventDefault()});a("html").click(function(){e()});a(".hero-tab").click(function(h){h.stopPropagation()});a(".hero-tab li:last-child").css({margin:"0"});a(".hero-tab li").click(function(){var o=a(this).data("styleid");if(o){var h=a("body");var j=h.attr("class").split(/\s+/);var m=/^style-/;var l;for(l=0;l<j.length;l++){var k=j[l];if(k.match(m)){h.removeClass(k)}}a(this).siblings().removeClass("active");var n=a(this).attr("class");a(this).siblings().children("p").hide();a(this).addClass("active");a(this).children("p").show();b.SetHeaderInformationPopupContent();a("body").addClass(n);if(SiteUrls&&SiteUrls.changeHeroImage()){Homepage.PostHeroImageStyleId(o)}else{Homepage.delayedFunctions.push(function(){Homepage.PostHeroImageStyleId(o)})}}});a(".hero-wrap").click(function(){if(a(".hovered:visible").length==0&&(!a(".hero-tab").hasClass("open"))){var h=a(".hero-tab li").filter(".active").first();window.location=h.data("navigateurl")}}).hoverIntent({over:function(h){if(!d.hasClass("open")&&a(".hovered:visible").length==0){g()}},interval:300,out:function(){e()},timeout:200})};b.PostHeroImageStyleId=function(d){var e=SiteUrls.changeHeroImage();a.ajax({type:"POST",url:e,data:"{'id': '"+d+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(f){if(!(f&&f.Success)){Fonts.Messages.addError("Could not save hero image")}}})};b.SetHeaderInformationPopupContent=function(d){if(typeof d==="undefined"){a(".hero-tab-head .popup p").html(a(".hero-tab li.active p").html())}else{a(".hero-tab-head .popup p").html(a(".hero-tab li.style-"+d+" p").html())}};b.CheckUrlHash=function(){var d=Common.replaceAll(window.location.hash,"#hero","");if(Common.isNumeric(d)&&d>0){var f=a(".hero-tab li");if(f.length>0&&f.length>=(d-1)){var e=a(".hero-tab li")[d-1];a("img",e).click()}}};b.AttachEvents=function(){BindTextPopperHover(a(".textpopper"));a("li.switch-a").click(function(d){a("div.switch-a").show();a("div.switch-b").hide();a(this).children().addClass("active");a("li.switch-b a").removeClass("active");d.preventDefault()});a("li.switch-b").click(function(d){a("div.switch-b").show();a("div.switch-a").hide();a(this).children().addClass("active");a("li.switch-a a").removeClass("active");d.preventDefault()});a(".badge img").mouseover(function(){var d=a(this).attr("src");a(this).attr("src",d.replace("/g/","/c/"))}).mouseout(function(){var d=a(this).attr("src").replace("/c/","/g/");a(this).attr("src",d)})};b.AttachHomePageEvents=function(){a(".find-filter").each(function(){a(this).nextAll(":gt(0)").hide()});a("#find-ul").mouseenter(function(){a("#find-ul .active").removeClass("active").wrapInner('<a href="#" />')});a("#find-ul").mouseleave(function(){var g=a(".find-module:visible"),j=a("#search-field"),h=a("#browse-field"),i=a("#identify-field");if(g.hasClass("find-search")){j.addClass("active").html(j.text());return}if(g.hasClass("find-browse")){h.addClass("active").html(h.text());return}if(g.hasClass("find-identify")){i.addClass("active").html(i.text());return}});a(document).delegate(".find-filter a","click",function(i){var g=a(this).parent(),h=g.parent();var k=g.index();var j=h.nextAll().hide().eq(k);j.show();h.find(".active").removeClass("active").wrapInner('<a href="#" />');g.addClass("active").html(g.text());var l=g.attr("id");if(l==="browse-field"){e()}else{if(l==="identify-field"){f()}}i.preventDefault()});function d(){a("#browse-ul").mouseenter(function(){a("#browse-ul .active").removeClass("active").wrapInner('<a href="#" />')});a("#browse-ul").mouseleave(function(){var g=a(".find-browser:visible"),i=a("#classification-ul"),k=a("#foundries-ul"),j=a("#designers-ul"),h=a("#best-sellers-ul"),l=a("#highest-rated-ul");if(g.hasClass("browse-classifications")){i.addClass("active").html(i.text());return}if(g.hasClass("browse-foundries")){k.addClass("active").html(k.text());return}if(g.hasClass("browse-designers")){j.addClass("active").html(j.text());return}if(g.hasClass("browse-best-sellers")){h.addClass("active").html(h.text());return}if(g.hasClass("browse-highest-rated")){l.addClass("active").html(l.text());return}})}function e(){var g=a(".find-browse");var h=g.data("dataloaded");if(!h){g.showLoading();g.load(c.browseUrl,function(){a(".find-filter").each(function(){a(this).nextAll(":gt(0)").hide()});var i=a("#browse-field"),j=i.parent();var k=i.index();j.nextAll().hide().eq(k).show();j.find(".active").removeClass("active").wrapInner('<a href="#" />');i.addClass("active").html(i.text());a(".browse-classifications ul").bxSlider({displaySlideQty:3,moveSlideQty:3});a(".browse-foundries ul").bxSlider({displaySlideQty:3,moveSlideQty:3});a(".browse-designers ul").bxSlider({displaySlideQty:3,moveSlideQty:3});a(".browse-best-sellers ul").bxSlider({displaySlideQty:3,moveSlideQty:3});a(".browse-highest-rated ul").bxSlider({displaySlideQty:3,moveSlideQty:3});g.hideLoading();d()});g.data("dataloaded",true)}}function f(){var g=a(".find-identify");var h=g.data("dataloaded");if(!h){g.showLoading();g.load(c.identifyUrl,function(){a(".find-identify ul").bxSlider({displaySlideQty:3,moveSlideQty:3});g.hideLoading()});g.data("dataloaded",true)}}};return b}(jQuery));var Common=(function($){var common={};common.paramsToJSON=function(queryString){this._paramsJSON={};this._jsonString="";if(!queryString){queryString=location+""}var parts=queryString.split(/[?;]/);var urlPart=parts[0];var parametersPart=queryString.substr(urlPart.length);if(urlPart.length<=1&&parametersPart.length<=1){return false}var pairs=parametersPart.substr(1).split(/[&;]/);for(var i=0;i<pairs.length;i++){var pair=pairs[i].split(/=/);var name=decodeURIComponent(pair[0].replace(/\+/g," "));if(Boolean(pair[1])){var value=decodeURIComponent(pair[1].replace(/\+/g," "));if(this._jsonString!=""){this._jsonString+=","}this._jsonString+="'"+name+"' : '"+value+"'"}}eval("this._paramsJSON = {"+this._jsonString+"}");return this._paramsJSON};common.invoke=function(params,method,confirmation,callback){if(typeof confirmation==="function"){callback=confirmation}if(typeof confirmation==="string"){if(!confirm(confirmation)){return false}}if(method&&method=="post"){$.post(params.InvokeUrl?params.InvokeUrl:window.location.href,params,function(data,textStatus){if(typeof callback==="function"){callback(data,textStatus)}else{if(textStatus=="success",params.ResponseContainer&&params.ResponseContainer!=""){$(params.ResponseContainer).html(data)}}})}else{$.get(params.InvokeUrl?params.InvokeUrl:window.location.href,params,function(data,textStatus){if(typeof callback==="function"){callback(data,textStatus)}else{if(textStatus=="success",params.ResponseContainer&&params.ResponseContainer!=""){$(params.ResponseContainer).html(data);jQuery.validator.unobtrusive.parse(params.ResponseContainer)}}})}return true};common.ajaxActionLink=function(tag,method,responseContainer){var link=$(tag).attr("href");if(!link||link==""){return false}if(!method||method==""){method=""}var paramsJson=common.paramsToJSON(link,responseContainer);common.invoke(paramsJson,method.toLowerCase())};common.postForm=function(form,callback){form=$(form);$.post(form.attr("action")||window.location.pathname,form.serialize(),callback)};common.addRow=function(tag){var rowId=$(tag).parent().parent().get(0).id;var newRowId=rowId+"-1";var tableId=$("#"+rowId).parent().parent().get(0).id;var exists=$("#"+newRowId).length;if(exists!=1){var n=$("#"+rowId+" td","#"+tableId).length;var tds='<tr id="'+newRowId+'"><td id="'+newRowId+'-2" colspan="'+n+'">&nbsp;</td></tr>';$("#"+rowId).after(tds);$("#"+rowId).addClass("expanded-row");$("#"+newRowId).addClass("expansion-row");return"#"+newRowId+"-2"}else{$("#"+rowId).removeClass("expanded-row");$("#"+newRowId).remove();return"0"}};common.editGridItem=function(tag,method){var responseContainer=common.addRow(tag);if(responseContainer!="0"){common.ajaxActionLink(tag,method,responseContainer)}};common.isNumeric=function(input){return((input-0)==input&&input.length>0)||((input-0)==input&&input.length==null)};common.replaceAll=function(sourceTxt,replaceThis,withThis){return sourceTxt.replace(new RegExp(replaceThis,"g"),withThis)};common.overlay=function(title,content,w){common.lockScreen();common.onUnlockOverlayScreen=function(){$("#fullscreen-overlay").hide()};if(w>0){$("#fullscreen-overlay").css({width:parseInt(w)+50+"px"});$("#fullscreen-overlay").css({"margin-left":"-"+(w/2)+"px"})}else{$("#fullscreen-overlay").css({width:"800px"});$("#fullscreen-overlay").css({"margin-left":"-400px"})}$("#fullscreen-overlay").css({top:($(window).scrollTop()+50)+"px"});if(title){$("#fullscreen-overlay-title").html(title)}if(content){$("#fullscreen-overlay-content").html(content)}$("#fullscreen-overlay,#screenlock").show()};common.lockScreen=function(){$("#screenlock").show()};common.unlockOverlayScreen=function(){$("#screenlock").hide();common.onUnlockOverlayScreen()};common.unlockPopupScreen=function(){$("#screenlock").hide();common.onUnlockScreen();common.onUnlockScreen=function(){}};common.hexToDec=function(hex){var num=parseInt(hex,16);if(Common.isNumeric(num)){return num}return null};common.guid=function(){var s4=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4())};return common}(jQuery));Fonts.Messages=(function(a){var b=new UserMessages(a,"default-user-messages-container");return b}(jQuery));function UserMessages(a,b){var d={};function c(){return a("#"+b)}d.existsContainer=function(){return c().find(".error-user-message-container").length>0};d.addCaution=function(e){c().find(".caution.user-message").append("<p>"+e+"</p>");c().find(".caution-user-message-container").show()};d.addCautionWithFadeOut=function(e){c().find(".caution-user-message-container").show();Fonts.UI.ShowAndRemove({container:c().find(".caution.user-message"),data:"<p>"+e+"</p>",callback:function(){c().find(".caution-user-message-container").hide()}});return d};d.addError=function(e){c().find(".error.user-message").append("<p>"+e+"</p>");c().find(".error-user-message-container").show()};d.addSuccess=function(e){c().find(".success-user-message-container").show();Fonts.UI.ShowAndRemove({container:c().find(".success.user-message"),data:"<p>"+e+"</p>",callback:function(){c().find(".success-user-message-container").hide()}});return d};d.clearCautions=function(){c().find(".caution.user-message").empty();c().find(".caution-user-message-container").hide()};d.clearErrors=function(){c().find(".error.user-message").empty();c().find(".error-user-message-container").hide()};d.clearSuccess=function(){c().find(".success.user-message").empty();c().find(".success-user-message-container").hide();return d};d.clearAll=function(){d.clearCautions();d.clearErrors();d.clearSuccess()};d.singleSuccess=function(e){d.clearAll();d.addSuccess(e)};d.singleError=function(e){d.clearAll();d.addError(e)};d.singleCaution=function(e){d.clearAll();d.addCaution(e)};d.singleCautionWithFadeOut=function(e){d.clearAll();d.addCautionWithFadeOut(e)};return d};var Search=(function(a){var c={};function b(e){e.selectbox({onChange:function(h,g){var f=g.input.closest("p.refine-refinement").find("a.refine-add");if(h===""){f.hide()}else{f.show()}}})}function d(f){var e=a("#facets-container p.refine-refinement");if(e.length){if(f){a("#default-add-filter").hide();a("#facets-container").fadeIn()}else{a("#facets-container").fadeOut(function(){a("#default-add-filter").show()})}}else{a("#facets-container").html("")}}c.GetSearchForm=function(){return a("form.search-form")};c.UpdateSearchComponentWithSearchFormFields=function(){var e=a("#searchtext");a("#OriginalSearchText").val(e.val())};c.UpdatePageControl=function(f){var e=a("ul.pagination a");a.each(e,function(){var g=a(this).attr("href");g=g.replace(/[\w+|\-]+\?/,f+"?");a(this).attr("href",g)})};c.ShowRefinements=function(e){e.closest(".sort-content").removeClass("refine-closed")};c.HideRefinements=function(e){e.closest(".sort-content").addClass("refine-closed")};c.BindDefaultPreviewTextChangeEvent=function(){var f=a("#DefaultTextIndex");if(f.length>0){var e=FontPreview.GetDefaultPreviewText();if(e!=undefined&&e.length>0&&a('#DefaultTextIndex option[value="'+e+'"]').length==0){f.append(a('<option value="'+e+'">'+e+"</option>"));f.val(e)}f.selectbox({onChange:function(){var g=this.value;FontPreview.ChangeDefaultText(g);FontPreview.UpdateAllImages(g);FontPreview.UpdateAllText(g);FontPreview.SaveDefaultPreviewText(g)}});f.selectbox("change",e)}a("#SortColumn").selectbox({onChange:function(){var g=a(this).closest("form"),k=[],j,h,i;a('section[id^="model-section"] div.pairing:hidden').each(function(){k.push('<input type="hidden" name="sectionIds" value="'+a(this).attr("id")+'"/>')});if(k.length>0){g.append(k.join(""))}if(a("#section-rating div.pairing:hidden").length){g.append('<input type="hidden" name="isRatingExpanded" value="false"/>')}c.RemoveDefaultTextIndexField(g);c.SetSortDirectionField(g);g.find("#page").val(1);j=c.buildForm(g);h=g.attr("id");i=h?"#"+h:"";window.location="?"+j.serialize()+i}})};c.BindAddToWebFontProjectEvents=function(e){e.find(".form-add-top-project .upgrade-subscription").click(function(){window.location.href=a(this).data("actionUrl")});e.find(".select-web-font-variation").selectbox({onChange:function(){var i=a(this).find("option:selected"),h=i.data("inProject"),g=a(this).parents("form:first"),f,j;if(h===1){Fonts.Products.updateAddToProjectSubmitButtonToAdded(g)}else{f=Fonts.Products.getCustomerSubscriptionTier();j=parseInt(i.data("tier"),10);if(j>f){Fonts.Products.updateAddToProjectSubmitButtonToUpgrade(g)}else{Fonts.Products.updateAddToProjectSubmitButtonToAdd(g)}}}})};c.SelectWebFontProject=function(i){if(i){try{var h=new UserMessages(jQuery,"messages-choose-web-font-project");if(i.Success){var f=a("#project-choose");f.find(".new-webfontsproject-name").val("");h.clearAll();h.singleSuccess(i.Message);window.location.reload()}else{h.singleError(i.Message)}}catch(g){}}};c.buildForm=function(i,f){Search.UpdateSearchComponentWithSearchFormFields();var h=a("#current-search-action").val()||a("#SearchIn").val(),p=i.find(".refine-refinements"),e="/search/"+h,q=!p.is(":visible"),k=i.find(":input[name]").not(":radio:not(:checked)").not('[name^="SearchCriterias"]'),l='<form action="'+e+'" method="get">',j,o,t,g,r,m,n,s;i.attr("action","/search/"+h);if(q){p.remove()}k.each(function(){j=a(this);o=j.attr("name");t=j.val()||"";l+='<input type="hidden" name="'+o+'" value="'+t+'" />'});p.find("p.refine-refinement:not(.default-refine):visible").each(function(){g=a(this);r=g.find(':input[name$="Criteria"]');m=g.find(':input[name$="Value"]');n=r.val();s=m.val();if(!s){s=""}if((n&&s)||f){l+='<input type="hidden" name="'+n+'" value="'+s+'" />'}});l+="</form>";return a(l)};c.InitializeRefinementsForm=function(){var e=a("form.per-page, form.refinements");e.off("submit").submit(function(f){f.preventDefault();f.stopImmediatePropagation();var g=c.buildForm(a(this));g.appendTo("body").submit()});e.find("input.input-reset").on("click",function(){e.find("#refinement-searchtext").focus();e.find("#facets-container").html("");e.find("#refinements-messsages").remove();e.find("#default-add-filter").show()});a(".refine-toggle").click(function(){var f=a(this);var g=f.closest(".filters");if(g.hasClass("refine-closed")){Search.ShowRefinements(f)}else{Search.HideRefinements(f)}});c.BindRefinementsEvents(a("#refine-refinements-list"));c.BindDefaultPreviewTextChangeEvent();e.find('input[name="ShowAllFonts"]').change(function(){var f=a(this);var g=a("#refinement-searchtext");d(f.attr("data-last-checked-id")===f.attr("id")&&g.attr("data-value")===g.val())});e.find("#refinement-searchtext").keyup(function(){var f=a(this);var g=a('input[name="ShowAllFonts"]:checked');d(g.attr("data-last-checked-id")===g.attr("id")&&f.attr("data-value")===f.val())});if(a("#facets-container p").length){a("#default-add-filter").hide()}else{a("#default-add-filter").show()}e.show()};c.RemoveDefaultTextIndexField=function(e){a("select[name=DefaultTextIndex]",e).attr("name","")};c.SetSortDirectionField=function(e){if(a("select[name=SortColumn]",e).length>0){if(a("select[name=SortColumn]",e).val().indexOf("ascending")>0){a("input[name=SortDirection]",e).val("Ascending")}else{a("input[name=SortDirection]",e).val("Descending")}}};c.SubmitBrowseProductsForm=function(f,e){if(a("input[name=QueryFontType]",e).val()!=f){a("input[name=page]",e).val("1")}a("input[name=QueryFontType]",e).val(f);Search.RemoveDefaultTextIndexField(e);Search.SetSortDirectionField(e);window.location="?"+e.serialize()+"#"+e.attr("id")};c.InitSearchDropdown=function(){a("#SearchIn").selectbox({onChange:function(e){a("#search").attr("action","/search/"+e)}});a("#searchtext, #searchtext1").keyup(function(f){if(f.which==13){f.preventDefault();a("#search").submit();return false}})};c.UpdateRefinements=function(j,k){var f=a("#default-add-filter"),g=a("#facets-container"),i=a("#refinement-searchtext"),e=a('input[name="ShowAllFonts"]'),h=a('input[name="ShowAllFonts"]:checked').attr("id");c.FacetToBucketMap=j.FacetToBucketMap||{};if(j.NoRefinementsFound){if(k){g.html(j.MessageHtml)}else{g.html("")}f.show()}else{f.hide();g.html(j.RefinementsHtml);Search.BindRefinementsEvents(g)}g.show();i.attr("data-value",i.val());e.attr("data-last-checked-id",h);a("form.refinements").hideLoading()};c.getRefinements=function(e,g,f){e.showLoading();a.ajax({type:"POST",url:g,dataType:"json",success:function(h){c.UpdateRefinements(h,f)},error:function(){e.hideLoading()}})};c.UpdateValueSelect=function(j,g){var f=c.FacetToBucketMap[g],h=[],i,e;if(f){e=f.length;for(i=0;i<e;i++){if(f[i].Value===""){h.push('<option value="'+f[i].Value+'"selected="selected">'+f[i].Text+"</option>")}else{h.push('<option value="'+f[i].Value+'">'+f[i].Text+"</option>")}}}j.selectbox("detach").html(h.join(""));b(j);return f.join("")};c.BindRefinementsEvents=function(f){var e=f.find("p.refine-refinement:last");if(!e.find('select[name="SearchCriterias.Value"]').val()){e.find("a.refine-add").hide()}f.find("a.remove").off("click").on("click",function(){var i=a(this),j=i.closest("p.refine-refinement"),k=j.find("span.refine-key").find("select").val(),l=j.find("span.refine-value").find("select").val(),g=i.closest("form"),h=g.find("#facets-container p.refine-refinement").length===1,m=c.buildForm(g,true),n;m.find('input[name="'+k+'"][value="'+l+'"]').remove();n=Fonts.Urls.getRemoveRefinementsUrl()+"?"+m.serialize()+"&add=false";c.getRefinements(g,n,!h)});f.find("a.refine-add").off("click").on("click",function(){var h=a(this),g=h.closest("form"),i=c.buildForm(g,true),j=Fonts.Urls.getAddRefinementsUrl()+"?"+i.serialize()+"&add=true";c.getRefinements(g,j,true)});f.find('select[name="SearchCriterias.Criteria"]:last').selectbox({onChange:function(i,g){var h=g.input.closest("p.refine-refinement"),j=h.find("span.refine-value").find("select");h.find("a.refine-add").hide();c.UpdateValueSelect(j,i)}});b(f.find('select[name="SearchCriterias.Value"]:last'));f.find("select").selectbox()};return c}(jQuery));$(function(){Search.InitializeRefinementsForm();Search.InitSearchDropdown()});Fonts.Translations=(function(a){var b={};var c=new Array();b.getErrorMessage=function(){return c.errorMessage};b.setErrorMessage=function(d){c.errorMessage=d};b.getSuccessMessage=function(){return c.successMessage};b.setSuccessMessage=function(d){c.successMessage=d};b.getShowLabel=function(){return c.showLabel};b.setShowLabel=function(d){c.showLabel=d};b.getHideLabel=function(){return c.hideLabel};b.setHideLabel=function(d){c.hideLabel=d};b.getMustReadAndAcceptLicenseDocumentsAndTob=function(){return c.mustReadAndAcceptLicenseDocumentsAndTob};b.youMustReadAndAcceptLicenseDocumentsAndTob=function(d){c.mustReadAndAcceptLicenseDocumentsAndTob=d};b.pleaseWaitButton=function(){return c.pleaseWaitButton};b.setPleaseWaitButton=function(d){c.pleaseWaitButton=d};return b}(jQuery));Fonts.Account=(function(a){var b={};b.OnCreateAccountStart=function(i){var h=a("#"+i);var g=a("#IsEulaAccepted",h);if(g.length>0){if(!b.CheckEulaCheckbox(g,i)){return false}}h.find(".input-submit[type=submit]").hide();h.find(".input-submit.wait").show();h.showLoading()};b.OnCreateAccountEnd=function(h){var g=a("#"+h);g.find(".input-submit[type=submit]").show();g.find(".input-submit.wait").hide();g.hideLoading()};b.OnCreateAccountSuccess=function(g){if(g.Success){if(g.ReturnUrl){window.location.href=g.ReturnUrl}else{window.location.reload()}}else{if(typeof g.Message!=="undefined"){var h=a("#"+g.FormId);h.find(".messages-container").html(g.Message)}}};b.OnMemberSignInStart=function(i){var h=a("#"+i);var g=a("#IsEulaAccepted",h);if(g.length>0){if(!b.CheckEulaCheckbox(g,i)){return false}}h.find(".input-submit[type=submit]").hide();h.find(".input-submit.wait").show();h.showLoading()};b.CheckEulaCheckbox=function(g,h){if(!g.attr("checked")){var i=new UserMessages(a,h+" .messages-container");i.clearErrors();i.addError(Fonts.Translations.getMustReadAndAcceptLicenseDocumentsAndTob());return false}else{return true}};b.OnMemberSignInEnd=function(h){var g=a("#"+h);g.find(".input-submit[type=submit]").show();g.find(".input-submit.wait").hide();g.hideLoading()};b.OnMemberSignInSuccess=function(g){var h=a("#"+g.FormId);if(g.Success){h.find("a.close").trigger("click");if(g.ReturnUrl){window.location.href=g.ReturnUrl}else{window.location.reload()}}else{if(typeof g.Message!=="undefined"){h.find(".messages-container").html(g.Message)}}};b.OnSuccessCallLogout=function(){document.location=document.URL};b.AttachEventsToNeedSupportForm=function(){a("#member-signin-link-trigger").click(function(g){a("#member-signin-link").trigger("click");g.stopPropagation()});a("#member-signin-link-trigger b").click(function(g){g.preventDefault()});a("#become-member-link-trigger").click(function(g){a("#become-member-link").trigger("click");g.stopPropagation()});a("#become-member-link-trigger b").click(function(g){g.preventDefault()})};function d(){a(".signin-section").show();a(".reset-password-section").hide();a(".signin-part").show();a(".reset-password-part").hide();a(".reset-password-block p.submit").hide();a(".modal .member-forms").hide();a(".modal .signin-form").show()}function e(){a(".reset-password-block p.submit").show();a(".signin-section").hide();a(".reset-password-section").show();a(".signin-part").hide();a(".reset-password-part").show();a(".reset-password-block").show();a(".modal .signin-form").hide()}b.AttachEventsToMemberSignin=function(){b.AttachEventsToMemberSigninForSelector(a(".password-reset-link-trigger"))};b.AttachEventsToMemberSigninForSelector=function(g){if(g){g.click(function(h){e();h.preventDefault()})}};b.AttachEventsToSigninFormsTriggers=function(){a(".member-sections-trigger, .member-forms-trigger").click(function(){if(a(".member-section").length>0||a(".member-form").length>0){a(this).parent().showLoading();a.post(SiteUrls.customerMemberForms(),{returnUrl:window.location.href,triggerId:a(this).attr("id")},function(g){var k=a(g.Forms);for(var h=0;h<k.length;h++){var j=a(k[h]);switch(j.attr("id")){case"member-signin-section":b.AddDownloadedSections(a(".account-wrap .member-signin-section-wrapper"),j);break;case"become-member-section":b.AddDownloadedSections(a(".account-wrap .become-member-section-wrapper"),j);break;case"member-signin":b.AddDownloadedForms(a(".member-signin-form-container"),j);break;case"reset-password":b.AddDownloadedForms(a(".reset-password-form-container"),j);break}}if(typeof g.TriggerId!=="undefined"){a(".hovered",a("#"+g.TriggerId).parent()).css("display","block")}a(".member-signin-section-wrapper").css("display","block");a(".member-forms").css("display","block")})}else{a(".member-signin-section-wrapper").css("display","block");a(".member-forms").css("display","block")}})};b.AttachEventsToNeedSupportSectionsTriggers=function(){a(".need-support-sections-trigger").click(function(){if(a(".member-section-need-support").length>0){a(this).parent().showLoading();a.post(SiteUrls.customerNeedSupportSection(),{triggerId:a(this).attr("id")},function(g){var k=a(g.Forms);for(var h=0;h<k.length;h++){var j=a(k[h]);switch(j.attr("id")){case"need-support-section":b.AddDownloadedSections(a(".account-wrap .need-support-section-wrapper"),j);break}}b.AttachEventsToNeedSupportForm();if(typeof g.TriggerId!=="undefined"){a(".hovered",a("#"+g.TriggerId).parent()).css("display","block")}})}})};b.AttachEventsToCartTotalSectionsTriggers=function(){a(".cart-total-sections-trigger").click(function(g){if(a(".member-section-cart-total").length>0){a(this).parent().showLoading();a.post(SiteUrls.cartTotalSection(),{triggerId:a(this).attr("id")},function(h){var l=a(h.Forms);for(var j=0;j<l.length;j++){var k=a(l[j]);switch(k.attr("id")){case"cart-total-section":b.AddDownloadedSections(a(".account-wrap .cart-total-section-wrapper"),k);break}}if(typeof h.TriggerId!=="undefined"){a(".hovered",a("#"+h.TriggerId).parent()).css("display","block")}})}g.stopPropagation()})};b.AttachEventsToMiniCartSectionsTriggers=function(){a(".mini-cart-sections-trigger").click(function(g){if(a(".member-section-mini-cart").length>0){a(this).parent().showLoading();a.post(SiteUrls.miniCartSection(),{triggerId:a(this).attr("id")},function(h){var l=a(h.Forms);for(var j=0;j<l.length;j++){var k=a(l[j]);switch(k.attr("id")){case"mini-cart-section":b.AddDownloadedSections(a(".account-wrap .mini-cart-section-wrapper"),k);break}}Cart.BindAllCartNavigationBlockEvents();if(typeof h.TriggerId!=="undefined"){a(".hovered",a("#"+h.TriggerId).parent()).css("display","block")}})}g.stopPropagation()})};b.AddDownloadedForms=function(g,h){g.each(function(){var i=a(this);b.AddFormToContainer(i,h);i.parent().hideLoading();i.removeMatchedClasses(/^/);a(".close",i).click(function(j){a("select[sb]").selectbox("close");a(this).closest(".hovered").fadeOut("fast");a(this).parentsUntil(".account-nav").removeClass("active");a(this).closest(".dropdown").fadeOut("fast");a(this).parents(".with-dropdown").removeClass("active");a(this).parentsUntil(".with-dropdown").removeClass("active");j.preventDefault()})})};b.AddDownloadedSections=function(g,h){g.each(function(){var i=a(this);b.AddFormToContainer(i,h);i.hideLoading();i.removeMatchedClasses(/^member-section/);i.css("display","block");a(".close",i).click(function(j){a("select[sb]").selectbox("close");a(this).closest(".hovered").fadeOut("fast");a(this).parentsUntil(".account-nav").removeClass("active");j.preventDefault()})})};b.AddFormToContainer=function(g,h){var l=a("input[name=UniqueFormId]",h).val();var m=a("input[name=UniqueLabelsId]",h).val();var i=Common.guid();var k=Common.guid();var j=h.html();if(typeof l!=="undefined"){j=Common.replaceAll(j,l,i)}if(typeof m!=="undefined"){j=Common.replaceAll(j,m,k)}g.html(j);b.AttachEventsToMemberSigninForSelector(a(".password-reset-link-trigger",g));Fonts.UI.BindJsonpFormSubmitEvents(g);jQuery.validator.unobtrusive.parse(g)};b.RestoreMemberSigninForm=function(){d();a(".reset-password-messages").hide();a(".reset-password-block").hide();a(".reset-password-part").hide();c('.signin-form a[name="returnUrl"]');c('.signin-part a[name="returnUrl"]')};function c(j){var g=a(j);var h=g.attr("href");if(h!=undefined){var i=h.split("returnUrl=");if(i.length==2){g.attr("href",i[0]+"returnUrl="+encodeURIComponent(window.location))}}}b.RestoreNeedSupportForm=function(){a(".success-need-support-request").hide()};b.OnSuccessCallResetPassword=function(h,l){var q;var m;var n;var p;var g=a(".reset-password-block .password-reset-form:visible");var k=[];for(var o=0;o<g.length;o++){var j=a(g[o]);if(j.attr("id")==l){k=j.closest("li");break}}if(a(".reset-password-block:visible").size()>0&&k.length>0){p=k.find(".reset-password-messages");m=k.find(".signin-section");n=k.find(".reset-password-section");q={container:p,data:h.Message,callback:function(){m.fadeIn();n.hide()}}}else{p=".dropdown:visible .reset-password-messages";q={container:p,data:h.Message,callback:function(){a(p).hide();a(".dropdown:visible .reset-password-part").hide();a(".dropdown:visible .signin-part").fadeIn();a(".dropdown:visible .password-reset-form").show()}};n=a(".dropdown:visible .password-reset-form")}if(h.Success){n.fadeOut(function(){Fonts.UI.ShowAndRemove(q)})}else{q={container:p,data:h.Message,removeAfter:-1};Fonts.UI.ShowAndRemove(q)}};b.HandleSigninAfterLoad=function(){if(f){a("#member-signin-link").click()}};var f=false;b.ShowSigninPopupAfterLoad=function(){f=true};b.OnSuccessCallNeedSupport=function(g){};b.trackPositionVertical=function(h){h=h.toLowerCase();var g={};if(h=="top"){g[h]=24}else{if(h=="middle"){g.top=145}else{g.top=272}}a("#sample_banner").css(g)};b.trackPositionHorizontal=function(h){h=h.toLowerCase();var g={};if(h=="left"){g.left=3}else{if(h=="center"){g.left=138}else{g.left=278}}a("#sample_banner").css(g)};b.AttachWishlistOptionDropDown=function(){a('input[class="wishListOptionSelection"]').change(function(){if(this.value){var h=a(this).attr("id").substring(a(this).attr("id").lastIndexOf("-")+1);if(h){var g="#account-wishlist-"+h+"-container";switch(this.value){case"delete":a(g+" .delete-wishlist").show();a(g+" .send-wishlist-email").hide();break;case"send-email":a(g+" .delete-wishlist").hide();a(g+" .send-wishlist-email").show();break}}}})};b.OnSuccessEmailWishList=function(i,h){var g=a(".send-email-container",i);if(h.Success==true){Fonts.UI.ShowAndRemove({container:g,data:h.Message});a(".send-email-address",i).val("")}else{a(g).html(h.Message)}};return b}(jQuery));(function(a){a.fn.removeMatchedClasses=function(b){return this.each(function(f){var g=a(this);var c=g.attr("class").split(/\s+/);for(var h=0;h<c.length;h++){var d=c[h];if(d.match(b)){g.removeClass(d)}}})}})(jQuery);Fonts.Newsletter=(function(a){var b={};b.OnNewsletterSubscribed=function(d,e,f){if(window._gaq){window._gaq.push(["_trackEvent","Newsletter","signup"])}a(e).parent().html(d.Form);var c=a(e);var g={container:f,data:d.Messages,callback:function(){c.fadeIn()}};c.fadeOut(function(){Fonts.UI.ShowAndRemove(g)})};b.OnNewsletterUnsubscribed=function(c){a("#newsletter").html(c.Form);var d={container:"#newsletter-unsubscribe-message-container",data:c.Messages,callback:function(){a("#newsletter-unsubscribe-form").fadeIn()}};a("#newsletter-unsubscribe-form").fadeOut(function(){Fonts.UI.ShowAndRemove(d)})};return b}(jQuery));Fonts.ApplicationKeys=(function(a){var b={};b.OnApplicationKeysReqSuccess=function(d,e,f){a(e).html(d.Form);var c=a(e);if(d.Success){c.hide();a(f).html(d.Messages)}else{a(f).html(d.Messages)}};return b}(jQuery));var FontPreview=(function(a){var d={},b=".preview-change",c={imageUrlTextProperty:"RenderText",textBoxClass:"new-font-preview",textBoxClassWebFonts:"input-webfont-preview",defaultText:"The quick brown fox jumps over a lazy dog",webFontDivSelector:".webfont-preview-text"};d.ChangeDefaultText=function(e){c.defaultText=e};d.GetQueryStringValue=function(g,e){var h=new RegExp(e+"=([^&]*)"),f=g.match(h),i=(f[1]||"").replace(/\+/g,"%20");return decodeURIComponent(i)};d.SetQueryStringValue=function(f,e,h){var g=new RegExp("("+e+"=)([^&]*)");return f.replace(g,"$1"+encodeURIComponent(h).replace("$","$$$"))};d.HtmlEncode=function(e){return a("<div/>").text(e).html()};d.CancelTextbox=function(h){var f=h.closest(".preview"),g=f.find(".preview-image"),e=f.find(b);g.show();h.remove();e.hide()};d.BindInputEvents=function(i){var f=false,g=13,h=27,e=17;i.on("keydown",function(j){if(j.which===g){d.UpdateImage(i,f)}else{if(j.which===h){d.CancelTextbox(i)}}f=j.which===e}).on("keyup",function(j){f=j.which===e}).on("blur",function(){setTimeout(function(){d.CancelTextbox(i)},200)})};d.UpdateImage=function(i,m){var f=i.closest(".preview"),h=f.find(".preview-image"),g=h.find("img:first"),e=f.find(b),l=g.attr("src"),k=i.val(),j=d.SetQueryStringValue(l,c.imageUrlTextProperty,k);i.remove();e.hide();g.attr("src",j);h.show();if(m){d.UpdateAllImages(k)}};d.UpdateAllImages=function(e){a(".preview-image").each(function(){var h=a(this),f=h.find("img:first"),g=f.attr("src"),i=d.SetQueryStringValue(g,c.imageUrlTextProperty,e);if(g!==i){f.attr("src",i)}});d.SaveDefaultPreviewText(e)};d.ReplaceImageWithTextBox=function(f){var e=f.find("img:first"),h=e.attr("src"),i=d.GetQueryStringValue(h,c.imageUrlTextProperty),g=a('<input type="text" value="'+d.HtmlEncode(i)+'" class="'+c.textBoxClass+'" />');f.hide();d.BindInputEvents(g);g.insertAfter(f).select();a(b,f.parent()).show()};d.InitializeEvents=function(j){var g=j.closest(".font-container"),i=a(".action-save-font-preview",g),e=a(".action-change-font-preview-all",g),h=a(".action-reset-font-preview-all",g),f="click";j.off(f).on(f,function(k){k.preventDefault();var l=g.find(".preview-image:visible");if(l.length){d.ReplaceImageWithTextBox(l)}});i.off(f).on(f,function(){d.UpdateImage(g.find("."+c.textBoxClass))});e.off(f).on(f,function(){d.UpdateImage(g.find("."+c.textBoxClass),true)});h.off(f).on(f,function(){d.CancelTextbox(g.find("."+c.textBoxClass));d.UpdateAllImages(c.defaultText)})};d.UpdateText=function(h,j){var f=h.closest(".preview"),g=f.find(c.webFontDivSelector),e=f.find(b),i=h.val();h.remove();e.hide();g.text(i).show();if(j){d.UpdateAllText(i)}};d.UpdateAllText=function(e){a(c.webFontDivSelector).each(function(){a(this).text(e).show()});d.SaveDefaultPreviewText(e)};d.CancelTextboxForWebfonts=function(h){var f=h.closest(".preview"),g=f.find(c.webFontDivSelector),e=f.find(b);g.show();h.remove();e.hide()};d.BindInputEventsForWebfonts=function(i){var f=false,g=13,h=27,e=17;i.on("keydown",function(j){if(j.which===g){d.UpdateText(i,f)}else{if(j.which===h){d.CancelTextboxForWebfonts(i)}}f=j.which===e}).on("keyup",function(j){f=j.which===e}).on("blur",function(){setTimeout(function(){d.CancelTextboxForWebfonts(i)},200)})};d.ReplaceDivWithTextBox=function(e){var h=a.trim(e.text()),f=e.data("font-family"),g=a('<input type="text" value="'+d.HtmlEncode(h)+'" class="'+c.textBoxClassWebFonts+'" style="font-family:\''+f+"'\" />");e.hide();d.BindInputEventsForWebfonts(g);g.insertAfter(e).focus();a(b,e.parent()).show()};d.InitializeEventsForWebfonts=function(j){var g=j.closest(".font-container"),i=a(".action-save-font-preview",g),e=a(".action-change-font-preview-all",g),h=a(".action-reset-font-preview-all",g),f="click";j.off(f).on(f,function(l){l.preventDefault();var k=g.find(c.webFontDivSelector+":visible");if(k.length){d.ReplaceDivWithTextBox(k)}});i.off(f).on(f,function(){d.UpdateText(g.find("."+c.textBoxClassWebFonts))});e.off(f).on(f,function(){d.UpdateText(g.find("."+c.textBoxClassWebFonts),true)});h.off(f).on(f,function(){d.CancelTextboxForWebfonts(g.find("."+c.textBoxClassWebFonts));d.UpdateAllText(c.defaultText)})};d.BindEvents=function(){a(".try-it").off("click").each(function(){var e=a(this);if(e.hasClass("try-webfont")){d.InitializeEventsForWebfonts(e)}else{d.InitializeEvents(e)}})};d.SaveDefaultPreviewText=function(e){e=e.replace(/\n/g,"<br />");document.cookie="__fontPreview_DefaultTextIndex="+escape(e)+"; path=/"};d.GetDefaultPreviewText=function(){return Cookies.get("__fontPreview_DefaultTextIndex")};d.SaveItemsPerPageQuantity=function(e){Cookies.set("__fontPreview_ItemsPerPage",e,365)};return d}(jQuery));Fonts.AccountInformation=(function(a){var i=new UserMessages(jQuery,"orders-and-subscription-user-message");var b={};var g={};b.SetProcessingOrderErrorMessage=function(j){g.ProcessingOrderErrorMessage=j};b.SetPleaseSelectOrderMessage=function(j){g.PleaseSelectOrderMessage=j};b.ShowLoading=function(j){a(j).showLoading()};b.HideLoading=function(j){a(j).hideLoading()};b.showNotSelectedOrderMessage=function(){var j=a("#OrderId","#credit-card-payment-from");if(j||j.length===0){i.addError(g.PleaseSelectOrderMessage)}};b.OnSuccessCreditCardPayment=function(j){var k={container:"#update-payment-information-user-message",data:j.Messages};if(!j.Success){k.removeAfter=-1}Fonts.UI.ShowAndRemove(k);if(j.Success){a("#OrderId").val("");a("#orders-and-subscription-pairing").showLoading();a("#orders-and-subscription-pairing").load(Fonts.Urls.getOrdersAndDownloads()+" #orders-and-subscription-table",function(l,m,n){a("#orders-and-subscription-pairing").hideLoading()})}i.clearAll()};b.OnSuccessPayPalPayment=function(j){var k={container:"#update-payment-information-user-message",data:j.Messages};if(!j.Success){k.removeAfter=-1}Fonts.UI.ShowAndRemove(k);if(j.Success&&j.RedirectUrl){window.location.replace(j.RedirectUrl)}i.clearAll()};b.OnSuccessChangePassword=function(j){var k={container:"#change-password-user-message",data:j.Messages};if(!j.Success){k.removeAfter=-1}Fonts.UI.ShowAndRemove(k)};b.OnSuccessUpdateAccountInformation=function(j){var k=function(){a("#account-information-container").html(j.AccountInformation);a("#update-payment-account-info").html(j.AccountInformationReadOnly);var l={container:"#account-information-user-message",data:j.Messages};if(!j.Success){l.removeAfter=-1}a.validator.unobtrusive.parse("#account-information-container");var m=a("#SubsciptionComplete");if(window._gaq&&m&&m.val()==="True"){window._gaq.push(["_trackEvent","Newsletter","signup"]);m.val("False")}b.HideLoading("#account-information-pairing");Fonts.UI.ShowAndRemove(l)};a.ajax({url:Fonts.Urls.getClientAliasLabel(),dataType:"html",success:function(l){a(".client-alias-label").replaceWith(l);k()},error:function(){k()}})};b.OnCancelBillingInformation=function(){a.ajax({url:Fonts.Urls.getAccountInformationForm(),dataType:"html",beforeSend:function(){Fonts.AccountInformation.ShowLoading("#account-information-pairing")},success:function(j){a("#account-information-container").html(j)},complete:function(){Fonts.AccountInformation.HideLoading("#account-information-pairing")}})};b.OnCancelAuthenticationKey=function(){a.ajax({url:Fonts.Urls.getAuthenticationKeyForm(),dataType:"html",beforeSend:function(){Fonts.AccountInformation.ShowLoading("#authentification-key-pairing")},success:function(j){a("#authentication-key-container").html(j);c()},complete:function(){Fonts.AccountInformation.HideLoading("#authentification-key-pairing")}})};b.OnCancelChangePassword=function(){a("#CurrentPassword").val("");a("#NewPassword").val("");a("#ConfirmNewPassword").val("")};function e(){a("#account-information-pairing").showLoading();var j=a(".account-information-country").val();a.ajax({type:"POST",url:Fonts.Urls.getAccountStatesListAddress(j),data:"{'isoCountryCode': '"+j+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(k){if(k.Success&&k.CountryStateHtml!==""){a("#account-information-country-and-state").html(k.CountryStateHtml);a("#account-information-form").updateValidation();f();d();a(".account-information-country").valid();a(".account-information-state").focus();if(k.IsVatCollected){a("#billing-vat-row").show()}else{a("#billing-vat-row").hide();var l=a(".vat-code-input");if(l.length!==0){a(l).val("")}}}else{a("#account-information-pairing").hideLoading();a("#account-information-user-message").html(k.Messages)}},complete:function(){a("#account-information-pairing").hideLoading()}})}function f(){a(".account-information-state").on("change",function(){a(this).valid()})}function d(){a(".account-information-country").on("change",function(){if(a(this).valid()){e()}})}function h(){a("#credit-card-payment-submit").click(function(j){a("#credit-card-payment-from").updateValidation();a("#credit-card-payment-from").submit();j.preventDefault()});a("#paypal-payment-submit").click(function(j){a("#paypal-payment-from").updateValidation();a("#paypal-payment-from").submit();j.preventDefault()});Fonts.UI.tabSortSwitcher(a("ul.tabs li, ul.sort li").not(a("#search-tabs li")))}function c(){f();d();h();a("#generate_key").click(function(j){j.preventDefault();a("#authentification-key-pairing").showLoading();a.ajax({type:"POST",url:Fonts.Urls.getGenerateAuthorizationToken(),data:a("#authentification-key-form").serialize(),dataType:"json",success:function(k){var l={container:"#authentification-key-user-message",data:k.Messages};if(!k.Success){l.removeAfter=-1}else{a("#AuthenticationKey").val(k.Token)}Fonts.UI.ShowAndRemove(l)},complete:function(){a("#authentification-key-pairing").hideLoading()}})});a("#save_key").click(function(j){j.preventDefault();a("#authentification-key-pairing").showLoading();a.ajax({type:"POST",url:Fonts.Urls.getSaveAuthorizationToken(),data:a("#authentification-key-form").serialize(),dataType:"json",success:function(k){var l={container:"#authentification-key-user-message",data:k.Messages};if(!k.Success){l.removeAfter=-1}Fonts.UI.ShowAndRemove(l)},complete:function(){a("#authentification-key-pairing").hideLoading()}})});a('a[href="#PaymentInformation-section"]',"#orders-and-subscription-table").click(function(j){j.preventDefault();var l=a(this).attr("href");a("html,body").animate({scrollTop:a(l).offset().top},"slow");var m=a(l+".collapse");if(m.length){m.trigger("click")}a("#update-payment-information-pairing").promise().done(function(){a(this).showLoading()});var k=a(this).parents("tr").attr("id");a.ajax({url:Fonts.Urls.getUpdatePaymentInformationForm(),data:{expanded:true,orderId:k},dataType:"html",beforeSend:function(){},success:function(n){a("#update-payment-information-pairing").html(n)},complete:function(){i.clearAll();h();a("#update-payment-information-pairing").hideLoading()}})})}c();return b}(jQuery));Fonts.Families=(function(a){var b={};b.AttachSearchListItemHowerFunctionality=function(){var f="font-mouseover",d="mouseenter",e="mouseleave",c=a(".font-results-parent, .font-child");c.off(d).on(d,function(){a(this).addClass(f)}).off(e).on(e,function(){var g=a(this);if(!g.has(".dropdown:visible").length){g.removeClass(f)}})};b.AttachOnProductVariationChangeEventHandler=function(c){c.find('select[name="VariationId"]').change(function(){var d=a(this).closest("form"),g=a(this).val(),e=Fonts.CartSummary.GetAddedProductVariationsToCart(),f=a.inArray(g,e)>-1;Fonts.Families.updateFeatureUpgradeDialog(g);Fonts.CartSummary.ManageAddToCartButtons(d,!f,f,false)})};b.AttachAttribute=function(c){a.each(c,function(){c.attr("data-load-locally","true")})};b.OnFeatureUpgradePopup=function(d){if(d.length!==0){var c=a(d);c.lightbox_me({onLoad:function(){BindTextPopperHover(c.find(".textpopper"));var e=a(".opent-type-selected-action");if(e){e.click(function(){var g=a(this).data("variation-id");var f=a(this).data("cart-identifier");Fonts.Families.setOpenTypeVariationsList(g,f)})}},destroyOnClose:true})}};b.AttachSearchListItem=function(c){a("a.product-web-link").click(function(){Fonts.Families.showSubsciptionPlanDialog(this)});a.each(c,function(){var d=a(this);d.closest("li").find("a.product-count").click(function(){d.click()});a(this).data("dataloaded",false)});c.toggle(function(){var o=a(this),e=o.next().next(),p=o.find("input.font-selected-wishlist-id").val(),g=o.find("input.font-family-id").val(),h=o.find("input.font-family-url-key").val(),n=o.find("input.font-family-query-font-type").val(),j=o.data("dataloaded"),k=o.data("isWebFontsTab"),m,d,q,f,i,l=o.parents("li").find("a.product-count");o.children().children("b.toggle-label").text(Fonts.Translations.getHideLabel());o.removeClass("results-hidden");e.show();if(typeof k==="undefined"){k="false"}if(!j){o.find("a").showLoading();if(l.length!==0){a(l).showLoading()}m=window.location.pathname,d=/^\/search\/wish-lists/.test(m)?Fonts.Urls.getWishListProductsAddress():/^\/search/.test(m)?Fonts.Urls.searchFamilyProductsAddress():Fonts.Urls.familyProductsAddress(),q=a("#ShowAllFontsRadioButton").is(":checked"),f=a("#DefaultTextIndex").val()||"",data={};data.familyId=g;data.showFree=!q;data.onlyWebFonts=k;data.urlKey=h;data.defaultText=f;data.selectedWishListId=p;data.queryFontType=n;data.searchtext=a("#searchtext").val();data.SearchType=a("#SearchType").val();data.sourceUrl=a("#browse-products-form").attr("action");a("#refinements-container").find("p.refine-refinement:not(.default-refine):visible").each(function(){c=a(this);select=c.find(':input[name$="Criteria"]');input=c.find(':input[name$="Value"]');key=select.val();val=input.val();if(!val){val=""}if(key&&val){data[key]=val}});a.get(d,data,function(r){e.html(r);b.AttachSearchEvents(e,true);o.find("a").hideLoading();if(l.length!==0){l.hideLoading()}})}o.data("dataloaded",true)},function(){a(this).children().children("b.toggle-label").text(Fonts.Translations.getShowLabel());a(this).addClass("results-hidden");var d=a(this).next().next();d.hide()})};b.AttachSearchEvents=function(c,e){var d=c.find("#fonts-face-declaration");if(d.length==0){d=c.filter("#fonts-face-declaration")}if(d.length){Fonts.WebFonts.addWebfontCss(d.html());d.remove()}Fonts.WebFontManager.StartWebFontsListener(c);c.find("input.show-me").show();c.find("select.adorn").selectbox();Fonts.UI.AttachAddToWebFontDropDownsEvents(c);Fonts.WebFonts.AttachAddToWebFontEvents(c.find("div.add-to-web-fonts select.add-to-project-font-selector"));FontPreview.BindEvents();Fonts.Families.AttachSearchListItemHowerFunctionality();Fonts.Families.AttachSignInEvents(c);Fonts.UI.productVariationSelects(c);Fonts.UI.wishListDropDowns(c);Fonts.Dropdowns.AttachAllDropdowns(c);Fonts.Account.AttachEventsToMemberSigninForSelector(c.find("a.password-reset-link-trigger"));Fonts.Families.AttachOnProductVariationChangeEventHandler(c);Fonts.Account.AttachEventsToSigninFormsTriggers();a(c.find("div.resetable-sing-in-block .trigger")).click(function(){Fonts.Account.RestoreMemberSigninForm()});if(e){Fonts.Scrolling.ResetWaypoints()}};b.updateFeatureUpgradeDialog=function(c){a("div.opentype-options div.options-selector").each(function(){var d=a("a.opent-type-selected-action",a(this));var e=a("span.input-appr",a(this));if(d.data("variation-id")==c){d.hide();e.show()}else{d.show();e.hide()}})};b.setOpenTypeVariationsList=function(g,c){var d=a("form[data-addtocartidentifier="+c+"]"),e=d.find('select[id$="-variation-select"]'),f=e.children("option[value="+g+"]").text();Fonts.Families.updateFeatureUpgradeDialog(g);e.selectbox("change",g,f);a("#feature-upgrade-dialog .close").click()};b.renderKeywordMessages=function(c){var d={container:a(".add-keyword-form .messages-container"),data:c.Messages};if(!c.Success){d.removeAfter=-1}Fonts.UI.ShowAndRemove(d)};b.showSubsciptionPlanDialog=function(c){a(c).showLoading();a("#select-a-subscription-dialog").remove();a.ajax({url:Fonts.Urls.getSubscriptionPlanDialog(),success:function(d){var e=a(d);e.lightbox_me({destroyOnClose:false,onLoad:function(){WebFontsPlans.setPaymentFrequency();WebFontsPlans.bindChangePlanEvent();WebFontsPlans.init();a("#select-a-subscription-container").bind("subscription_finished",function(){e.trigger("close")})}})},complete:function(){a(c).hideLoading()}})};b.AttachSignInEvents=function(c){var d=c.find(".web-fonts-sign-in");if(d.length==0){d=c.filter(".web-fonts-sign-in")}d.click(function(){var f=a(this).parent("form");var e=f.find('input[name="returnUrl"]');e.val(window.location);f.submit()})};return b}(jQuery));Fonts.Products=(function(a){var g={};var c="";var b="";var h="";var e=false;function f(k,m,p,n,o){var i=k.find(".submit>input.add-to-project");var q=k.find(".submit>input.add-to-project-wait");var j=k.find(".submit>input.added-to-project");var l=k.find(".submit>form.upgrade-subscription");if(m===true){i.show()}else{i.hide()}if(p===true){q.show()}else{q.hide()}if(n===true){j.show()}else{j.hide()}if(o!==true){l.show()}else{l.hide()}}g.updateAddToProjectSubmitButtonToWait=function(i){f(i,false,true,false,false)};g.updateAddToProjectSubmitButtonToAdd=function(i){f(i,true,false,false,false)};g.updateAddToProjectSubmitButtonToAdded=function(i){f(i,false,false,true,false)};g.updateAddToProjectSubmitButtonToUpgrade=function(i){f(i,false,false,false,true)};g.getCustomerSubscriptionTier=function(){return parseInt(a("#project-choose").data("customerSubscriptionTier"),10)};g.selectTab=function(i){a(i.toLowerCase()+"-tab").click()};g.setFrsUrl=function(i){c=i};g.setFontTestText=function(i){b=i};g.setTryItOutImageWidth=function(i){h=i};g.frsImageUrl=function(q,u,o,r,y,j,s,l,k,n){var x="";var z="";var v="";var t="";var p="";var w="";var m="";var i="";if(Common.isNumeric(u)&&Common.isNumeric(o)){if(!Common.isNumeric(r)){r=h}z="&Width="+r;if(Common.isNumeric(n)){w="&TextSize="+n}if(l&&l.length==6){m="&TextColor=%23"+l}if(k&&k.length==6){i="&BgColor=%23"+k}if(j){t="&CodePage="+j;p="&IsFullImage="+(s?"True":"False")}else{v="&RenderText="+(y?encodeURIComponent(y):b)}x="http://"+c+"/ImagingService.ashx?imagetype="+q+"&shopid="+o+z+w+m+i+t+p+v}return x};g.updateSampleImageUrl=function(n,q,m,o,s,i,p,k,j,l){var r=g.frsImageUrl(n,q,m,o,s,i,p,k,j,l);if(r==""){r="/Content/img/not-found.gif"}if(Common.isNumeric(o)){a("#product-"+q+"-sample-"+n+"-image").attr("width",o)}a("#product-"+q+"-sample-"+n+"-image").attr("src",r)};g.updateSampleImage=function(m,l){var p=a("input[name=ImageType]",l).val();var s=a("input[name=ProductId]",l).val();var o=a("select[name=FrsVariationId]",l).val();var q=a("input[name=image-text]",l).val();var t=a("textarea[name=sample-text]",l).val();var i=a("select[name=CodePage]",l).val();var r=a("input[name=IsFullImage]",l).val();var k=a("input[name=colorpicker-foreground]",l).val();var j=a("input[name=colorpicker-background]",l).val();var n=a("select[name=font-size]",l).val();if(typeof o=="undefined"){o=a("input[name=FrsVariationId]",l).val()}FontPreview.SaveDefaultPreviewText(t);g.updateSampleImageUrl(p,s,o,q,t,i,r,k,j,n)};g.updateWebFontSample=function(l,k){var j=a("input[name=colorpicker-foreground]",k).val();var i=a("input[name=colorpicker-background]",k).val();var m=a("select[name=font-size]",k).val();a(".web-fonts-preview textarea").css({"background-color":"#"+i,color:"#"+j,"font-size":m+"px"});l.preventDefault()};g.attachTextSubmitListeners=function(){a(".products-sample-images").bind("submit",function(i){var j=a(".sample-text",a(i.currentTarget)).val();a(".products-sample-images").each(function(){a(".sample-text",a(this)).val(j);g.updateSampleImage(i,this);i.preventDefault()})});a(".products-sample-images input, .products-sample-images select").bind("change",function(i){g.updateSampleImage(i,a(this).closest(".products-sample-images"));i.preventDefault()});a(".products-sample-images textarea").bind("input",function(i){var j=a(i.currentTarget).val();a(".products-sample-images").each(function(){a(".sample-text",a(this)).val(j);g.updateSampleImage(i,this);i.preventDefault()})});a(".products-webfont-sample input, .products-webfont-sample select").bind("change",function(i){g.updateWebFontSample(i,a(this).closest(".products-webfont-sample"))});a(".products-webfont-waterfall").bind("submit",function(i){var j=a("textarea[name=sample-text]",this).val();g.updateWebFontsWaterfall(j);i.preventDefault()});a(".web-fonts-preview textarea").bind("input",function(i){var j=a(this).val();g.updateWebFontsWaterfall(j);i.preventDefault()});a("#browserPreviewPager input[name=browser-preview-next]").bind("click",function(i){a("#browser-list-request-form input[name=preselectOnReload]").val("first");g.moveSelectOption(a("#browserSelector select"),a("#osSelector select"),"next")});a("#browserPreviewPager input[name=browser-preview-previous]").bind("click",function(i){a("#browser-list-request-form input[name=preselectOnReload]").val("last");g.moveSelectOption(a("#browserSelector select"),a("#osSelector select"),"prev")})};g.updateWebFontsWaterfall=function(i){if(i===""){i=a(".products-webfont-waterfall").attr("data-default")}i=i.replace(/\n/g,"<br />");a(".webfont-waterfall-sample").each(function(){a(this).html(i)});a(".web-fonts-preview textarea").val(i);a(".products-webfont-waterfall textarea").val(i);FontPreview.SaveDefaultPreviewText(i)};g.moveSelectOption=function(m,k,i){var n=m.children("option:selected");var j=(i=="next")?"last":"first";if(n.val()==m.children("option:"+j).val()){if(k==null){var l=(i=="next")?"first":"last";m.children("option:"+l).attr("selected","selected")}else{g.moveSelectOption(k,null,i)}}n[i]("option").attr("selected","selected");m.change();m.selectbox("detach");m.selectbox("attach")};g.changeSelectOption=function(i,j){i.val(j);i.change();i.selectbox("detach");i.selectbox("attach")};g.updateCharacterMap=function(j){if(j!=""){a("#generated-character-map").html(j)}var k=a("#character-map-char-count-update").text();if(k!=""){a("#character-map-char-count").text(k)}var i=a("#character-map-code-range");var l=a("#character-map-code-range-update");if(l.html()!=""){i.selectbox("detach");i.html(l.html());i.find('option[value="'+l.data("range")+'"]').attr("selected","selected");i.selectbox("attach")}};g.updateBrowserList=function(i){a("#browserSelector").html(i);if(a("#browser-list-request-form input[name=preselectOnReload]").val()=="last"){a("#browserSelector option:last").attr("selected","selected")}a("#browserSelector select.adorn").selectbox();a("#browser-preview-image-request-form").submit()};g.updateBrowserPreviewImage=function(i){a("#browserPreviewImage").html(i);a("#browserPreviewImage").hideLoading()};g.setOpenTypeVariationsList=function(j,i){window.location.href=window.location.pathname+"?var="+j};g.attachColorPicker=function(j){var i="#"+a(".colorpicker-"+j).val();a("."+j+"Selector .selectorSwitch").css("background-color",i);a("."+j+"Selector .colorPalette").ColorPicker({onChange:function(l,k,m){a(".colorpicker-"+j).val(k).trigger("change");a("."+j+"Selector .selectorSwitch").css("background-color","#"+a(".colorpicker-"+j).val())},color:i,flat:true});a("."+j+"Selector .selectorSwitch").click(function(){g.toggleColorPicker(j)})};g.toggleColorPicker=function(j){var i=a("."+j+"Selector .colorPalette:visible").length;a(".colorPalette").hide();if(!i||i==0){a("."+j+"Selector .colorPalette").show()}};g.attachColorPickerCloseListener=function(){var i=false;a(".colorPalette").hover(function(){i=true},function(){i=false});a("body").mouseup(function(){if(!i){a(".colorPalette").hide()}})};g.AddWebFontToProjectComplete=function(){a("aside.pricing").hideLoading()};g.ShowSubmitSpecimenDialogForm=function(j){a(".carousel .form-container").html(j);var l=a("#specimen-upload-form");var k=a("#specimen-upload-form form");var o=a("#submit-specimen-dialog");var i=a("#specimen-upload-accept");var p=a("input[data-fileupload=file]",a("#thumbnail"));Fonts.Fileuploader.ClearFileField(p);a(o).lightbox_me({destroyOnClose:true});var q=Fonts.Fileuploader.CreateFileUploader("thumbnail",Fonts.Urls.addSpecimenImageThumb(),false,function(){l.showLoading()},function(r){if(r.Success){l.hide();i.html(r.AcceptDialogHtml);i.show();Fonts.Fileuploader.ClearMessagesContainer(o)}else{a(".messages-container",o).html(r.Messages)}Fonts.Fileuploader.ClearFileField(p);l.hideLoading()},"json");var m=a("input[data-fileupload=file]",a("#image"));Fonts.Fileuploader.ClearFileField(m);var n=Fonts.Fileuploader.CreateFileUploader("image",Fonts.Urls.addSpecimenImage(),false,function(){l.showLoading()},function(r){Fonts.Fileuploader.ClearFileField(m);l.hideLoading();if(r.Success){if(Fonts.Fileuploader.FileSelected(p)){q.submit()}else{l.hide();i.html(r.AcceptDialogHtml);i.show();Fonts.Fileuploader.ClearMessagesContainer(o)}}else{a(".messages-container",o).html(r.Messages)}},"json");k.submit(function(r){if(k.valid()){n.setData(Fonts.Fileuploader.SetData(k));n.submit()}r.preventDefault();return false})};g.OnSuccessAcceptSpecimenImage=function(i){if(i.Success){a("#specimen-upload-form").show();a("#specimen-upload-accept").hide()}a(".messages-container",a("#submit-specimen-dialog")).html(i.Messages);g.HideAcceptSpecimenImageLoading()};g.ShowAcceptSpecimenImageLoading=function(){a("#specimen-accept-form").showLoading()};g.HideAcceptSpecimenImageLoading=function(){a("#specimen-accept-form").hideLoading()};g.RejectSpecimenImage=function(){a("#specimen-upload-form").show();a("#specimen-upload-accept").hide()};g.AttachFontFeaturesRollovers=function(){a(".font-features-section li a").mouseenter(function(i){if(!e&&typeof currentPage.ProductUrlKey!=="undefined"&&currentPage.ProductUrlKey!=""){e=true;var j=a(this).data("selected-variation-id");a.post(Fonts.Urls.fontFeaturesRolloversUrl(),{urlKey:currentPage.ProductUrlKey,variationId:j},function(k){a("#features-list").replaceWith(k);BindTextPopperHover(a(".textpopper","#features-list"));e=false})}})};g.UpdatePromotionCounter=function(j){var k=new Date(j);var l=new Date();var i=new Date(k-l);var o=Math.floor(i/1000)%60;var n=Math.floor(i/(1000*60))%60;var m=Math.floor(i/(1000*60*60));if(i<=0){document.location.reload()}a("#promotionHours").html(m<10?"0"+m:m);a("#promotionMinutes").html(n<10?"0"+n:n);a("#promotionSeconds").html(o<10?"0"+o:o)};g.StartPromotionCounter=function(i){g.UpdatePromotionCounter(i);window.setInterval('Fonts.Products.UpdatePromotionCounter("'+i+'")',1000)};var d=function(){Fonts.UI.asideProductVariationSelects("#product-variation-select, #webfont-variation-select");Fonts.UI.productVariationSelects();Fonts.UI.bindStylePrice()};d();return g}(jQuery));Fonts.WebFontSelectors=(function(a){var r={};var g=null;var q=null;var f="";var n=function(s){if(s.checked){a('#import-selected-css-selectors-container input[type="checkbox"]').attr("checked","checked")}else{a('#import-selected-css-selectors-container input[type="checkbox"]').removeAttr("checked")}};var m=function(s){var t=a("#import-selected-css-selectors-form");if((s&&s.checked)||t.find('#import-selected-css-selectors-container input[type="checkbox"]:checked').length){t.find('input[type="submit"]').removeAttr("disabled")}else{t.find('input[type="submit"]').attr("disabled","disabled")}};var c=function(s){a("#parse-or-upload-container").hide();var t=a("#import-selected-container").html(s);t.find('#import-selected-css-selectors-container input[type="checkbox"]').click(function(){m(this)});t.find(".css-toggle-all").click(function(){n(this);m()});t.find(".import-selectors-again").click(function(){a("#parse-or-upload-container").show();a("#import-selected-container").html("").hide();a("#HtmlURL").focus()});t.show();a("#css-sucker-tab").hideLoading()};function b(s){s.find(".select-box").selectbox();s.find(".font-choose-section select.select-box").change(function(){a(this).parents("form").submit()});Fonts.UI.tabSortSwitcher(s.find("ul.sort li"));s.find("#frmAddSelectorsWithFont .select-box").change(function(){var u=a(this).val();var t=a("#font-preview-container");t.find("div:visible").hide();t.find("#"+u).show()});s.find(".existing-selector-group").find(".close-container").click(function(){var v=a(this);var t=v.data("actionUrl");var u=v.parents("li[data-font-id]:first").data("fontId");var y=v.parents("li[data-selector]:first");var w=y.data("selector");var x=y.data("selectorId");r.RemoveAssignedSelector(t,g,u,x,w)});s.find(".unassigned-selector").find(".close-container").click(function(){var u=a(this);var t=u.data("actionUrl");var x=u.parents("li[data-selector]:first");var v=x.data("selector");var w=x.data("selectorId");r.RemoveUnassignedSelector(t,g,w,v)});s.find(".unassigned-select-box").change(function(){var v=a(this).val();var u=a(this).parents("ul:first");var t=u.prev();t.children().hide();if(v==="0"){u.find(".add_button").attr("disabled","disabled")}else{u.find(".add_button").removeAttr("disabled");t.find("#"+t.attr("id")+"-font-"+v).show()}}).selectbox();s.find(".unassigned-selector").find(".add_button").click(function(){var t=a(this);var y=t.data("actionUrl");var x=t.parents("li[data-selector]:first");var u=x.find("select[name='selector.FontId']").val();var v=x.data("selector");var w=x.data("selectorId");r.AssignUnassignedSelector(y,g,u,w,v)})}r.OnShowProjectCssSelectorsPopup=function(s){if(s.FontsFaceDeclarationString){a('head style[id^="webfont-style"]').remove();Fonts.WebFonts.addWebfontCss(s.FontsFaceDeclarationString)}if(s.WebFontsToLoad){a("body").append(s.WebFontsToLoad)}g=null;if(s.Html){f=a(s.Html);g=f.data("projectId");b(f)}else{if(typeof s==="string"){f=a(s)}}q=new UserMessages(a,"project-selectors-user-messages");f.lightbox_me({onLoad:function(){Fonts.WebFontManager.StartWebFontsListener();a.validator.unobtrusive.parse("#frm-upload-css-file, #frm-upload-css-from-remote, #frmAddSelectorsWithFont");f.find("#SelectorsAsString").focus();f.find("#frm-upload-css-file").ajaxForm({beforeSubmit:function(u,t){q.clearAll("project-selectors-user-messages");var v=t.valid();if(v){a("#css-sucker-tab").showLoading()}return v},success:function(v){var u=a.parseJSON(v),t=u.html;if(u.type!=="success"){q.routeMessage(u.type,u.message,"project-selectors-user-messages");a("#css-sucker-tab").hideLoading();return}else{q.clearAll("project-selectors-user-messages")}c(t)}});f.find("#frm-upload-css-from-remote").ajaxForm({dataType:"html",resetForm:true,success:function(t,v,w){var u=Fonts.WebFonts.getWebFontsResponseHeader(w);if(u&&u.type==="error"){q.routeMessage(u.type,u.message,"project-selectors-user-messages")}c(t)},beforeSubmit:function(u,t){q.clearAll("project-selectors-user-messages");var v=t.valid();if(v){a("#css-sucker-tab").showLoading()}return v}})},onClose:function(){q=null;f=null;if(g!=null){Fonts.WebFonts.ReloadWebProject(g)}},destroyOnClose:true})};r.RemoveAssignedSelector=function(s,u,t,w,v){k(t,w,false);a.ajax({type:"POST",contentType:"application/json charset=utf-8",url:s,data:JSON.stringify({ProjectId:u,FontId:t,SelectorId:w,Selector:v}),success:function(x){if(x&&f!==null){if(x.success){h(x.selector);d(x.selector,x.selectorId,x.html);l(x,true);e()}}},complete:function(){k(t,w,true)}})};r.RemoveUnassignedSelector=function(s,t,v,u){k(null,v,false);a.ajax({type:"POST",contentType:"application/json charset=utf-8",url:s,data:JSON.stringify({ProjectId:t,SelectorId:v,Selector:u}),success:function(w){if(w&&f!==null){if(w.success){j(w.selectorId);l(w,true);e()}}},complete:function(){k(null,v,true)}})};r.AssignUnassignedSelector=function(s,u,t,w,v){a.ajax({type:"POST",contentType:"application/json charset=utf-8",url:s,data:JSON.stringify({ProjectId:u,FontId:t,SelectorId:w,Selector:v}),success:function(x){if(x&&f!==null){if(x.success){p(x.fontId,x.selectorId,x.html)}l(x,true);e()}},beforeSend:function(){a().hide()},complete:function(){a().hide()}})};r.OnNewSelectorAdded=function(t){var s;if(t&&f!==null){if(t.success){for(s in t.mapSelectorToHtml){h(s);j(null,s)}if(t.fontId!==0){p(t.fontId,null,t.html)}else{for(s in t.mapSelectorToHtml){d(s,t.selectorId,t.mapSelectorToHtml[s])}}}l(t,true);e()}};r.OnProjectSelectorsFontChanged=function(s){if(s&&f!==null){r.OnProjectSelectorsFontChangedCompleted(s.originalFontId,s.fontId);if(s.success){i(s.originalFontId);p(s.fontId,null,s.html)}l(s,true);e()}};r.OnProjectSelectorsFontChangedBegin=function(t){if(f!==null){try{var u=a("#assigned-selector-group-"+t);u.showLoading();var v=u.find("[name=FontId]").val();if(v!==t){var w=a("#assigned-selector-group-"+v);w.showLoading()}}catch(s){}}};r.OnProjectSelectorsFontChangedCompleted=function(t,v){if(f!==null){try{var u=a("#assigned-selector-group-"+t);u.hideLoading();if(v==undefined||v==null){v=u.find("[name=FontId]").val()}if(v&&v!==t){var w=a("#assigned-selector-group-"+v);w.hideLoading()}}catch(s){}}};r.OnImportSelectedCssSelectors=function(t){if(f!==null&&t){if(t.success){a("#css-sucker-tab").hideLoading();a("#selector_tab_head>a").trigger("click");a(".import-selectors-again").trigger("click");var s=a("#projects_selectors").html(t.html);b(s);f.find("#import-selected-container").find("input[type=checkbox]:checked").each(function(){this.checked=false})}l(t,true);e()}};function l(s,t){if(s&&s.message&&q!==null){if(s.success){if(t){q.singleSuccess(s.message)}}else{if(s.warning){q.singleCaution(s.message)}else{q.singleError(s.message)}}}}function e(){if(f!==null){var s=f.find("#existing_project_selectors ul li");if(s.length>0){f.find("#project_selectors_no_assigned_message").hide()}else{f.find("#project_selectors_no_assigned_message").show()}var t=f.find("#unassigned_project_selectors ul li");if(t.length>0){f.find("#project_selectors_no_unassigned_message").hide()}else{f.find("#project_selectors_no_unassigned_message").show()}}}function o(s){if(s==undefined||s===null){return null}return s}function j(t,s){if(f!==null){if(t!==undefined&&t!=null){f.find(".unassigned-selector-row[data-selector-id="+t.toUpperCase()+"]").remove()}if(s!==undefined&&s!==null){f.find(".unassigned-selector-row[data-selector='"+o(s)+"']").remove()}}}function h(t){if(f!==null){var u=f.find(".existing-selector-group-row li[data-selector='"+o(t)+"']");var s=u.parents("ul:first");u.remove();if(s.find("li[data-selector-id]").length===0){s.parents(".existing-selector-group-row:first").remove()}}}function i(s){if(f!==null){var t=f.find("#assigned-selector-group-"+s);t.remove()}}function k(t,v,w){if(f!==null){var u=null;var s=null;if(t===null){u=f.find(".unassigned-selector-row[data-selector-id="+v.toUpperCase()+"]").find(".close-container:first").parents("li:first")}else{u=f.find("#assigned-selector-group-"+t).find("[data-selector-id="+v.toUpperCase()+"]").find(".close-container:first").parents("li:first");s=f.find(".existing-selector-group[data-font-id"+t+"]").find("li[data-selector-id]");if(s.length!==1){s=null}}if(u!==null){if(w){u.show();if(s!==null){s.hideLoading()}}else{u.hide("slow");if(s!==null){s.showLoading()}}}}}function p(s,u,v){if(f!==null){var t=f.find("#assigned-selector-group-"+s);if(t.length===0){f.find("#existing_project_selectors ul:first").append(v)}else{t.replaceWith(v)}t=f.find("#assigned-selector-group-"+s);b(t);if(u!=null){j(u)}}}function d(t,u,s){if(f!==null){var v=null;if(u!=undefined&&u!==null){v=f.find("#unassigned_project_selectors").find("[data-selector-id="+u.toUpperCase()+"]")}if(u===null||v.length===0){f.find("#unassigned_project_selectors").append(s)}else{v.replaceWith(s)}if(u===null){v=f.find("#unassigned_project_selectors").find("[data-selector='"+o(t)+"']")}else{if(t!=undefined&&t!==null){v=f.find("#unassigned_project_selectors").find("[data-selector-id="+u.toUpperCase()+"]")}}if(v!==null){b(v)}}}return r}(jQuery));Fonts.WebFonts=(function(a){var f={};var c=null;var e={clearAll:function(g){if(typeof g==="string"&&typeof this[g]==="object"&&typeof this[g].clearAll==="function"){this[g].clearAll()}},routeMessage:function(k,g,h){if(typeof g!=="string"||g===""){return}var j=this;function l(){if(typeof h!=="string"||h===""){if(j["default"]===undefined){j["default"]=Fonts.Messages}return j["default"]}if(j[h]===undefined){j[h]=new UserMessages(jQuery,h)}return j[h]}var i=l();if(k==="success"){i.singleSuccess(g)}else{if(k==="error"){i.singleError(g)}else{if(k=="warning"){i.singleCaution(g)}}}}};function d(i){var h=a("#"+i+"-d");var g=h.html()||"";g=g.replace(/&amp;/ig,"&");h.remove();return g}f.addWebfontCss=function(h){var i=0,l="webfont-style-"+i,j=a("#"+l),k,g=a.trim(h);if(!g){return}while(a("#"+l).length>0){i++;l="webfont-style-"+i}j=a('<style type="text/css" id="'+l+'"></style>').appendTo("head");k=j.get(0);if(k&&k.styleSheet){k.styleSheet.cssText=g}else{j.text(g)}};f.manageCheckBoxesUI=function(h,g){a(h).live("change",function(){var j=a(this).is(":checked"),k=a(g),i=a(k).is(":checked");if(!j){if(i){a(k).attr("checked",false)}}if(a(h+":not(:checked)").size()===0){a(k).attr("checked",true)}});a(g).change(function(){a(h).attr("checked",a(this).is(":checked"))})};f.getWebFontsResponseHeader=function(i){function g(){return"X-WebFonts-Response-Context"}var h=i.getResponseHeader(g())||null;return h?a.parseJSON(h):null};f.updateUnobtrusiveValidation=function(g){a.validator.unobtrusive.parse(g)};f.EnsureAllVisibleWebFontDeclarations=function(){var g=[];a(".web-fonts-preview").each(function(){var i=a(this);var h=d(i.attr("id"));g.push(h)});a(".font-face-declaration").each(function(){g.push(a(this).html().replace(/&amp;/ig,"&"))}).remove();f.addWebfontCss(g.join("\r\n"))};f.OnSignIn=function(g){Fonts.Messages.clearAll();if(g.Success){window.location.reload()}else{Fonts.Messages.addError(g.Message)}};f.OnPublishSettingsPopup=function(h){if(h){var g=a(h);g.lightbox_me({onLoad:function(){g.find(".link-action").click(function(){a(this).parent().find("textarea").focus().select()});Fonts.UI.tabSortSwitcher(a("ul.sort li"));var i=new UserMessages(jQuery,"publish-settings-messages");g.find("#download-kit-nofonts").click(function(){i.singleError(a(this).data("message"))});g.find("#download-kit").click(function(){var j=a(this).data("checkUrl");var k=a(this).data("actionUrl");a.ajax({type:"POST",url:k,beforeSend:function(){g.find("#download-kit").hide();g.find("#download-kit-working").show();g.find("#download-kit-loading").showLoading()},success:function(l){if(l.Status==="generated"){g.find("#download-kit").show();g.find("#download-kit-working").hide();g.find("#download-kit-loading").hideLoading();g.find("[name=download-kit-iframe]").attr("src",l.FileUrl)}else{if(l.Status==="in_progress"){b(j,function(m,n){i.singleSuccess(n);g.find("#download-kit").show();g.find("#download-kit-working").hide();g.find("#download-kit-loading").hideLoading();g.find("[name=download-kit-iframe]").attr("src",m)},function(m){i.singleError(m);g.find("#download-kit").show();g.find("#download-kit-working").hide();g.find("#download-kit-loading").hideLoading()})}}if(l.Message!==""){if(l.Success){i.singleSuccess(l.Message)}else{i.singleError(l.Message)}}},error:function(){g.find("#download-kit").show();g.find("#download-kit-working").hide();g.find("#download-kit-loading").hideLoading();i.singleError(Fonts.Translations.getErrorMessage())}})})},onClose:function(){if(c!==null){clearTimeout(c)}g=null},destroyOnClose:true})}};f.clearAddNewDomainMessages=function(){var h=new UserMessages(jQuery,"domain-list-user-messages");if(h.length!==0){h.clearAll()}var g=a("#form-add-new-domain");if(g.length!==0){g.validate().resetForm();g.find("[data-valmsg-summary=true]").removeClass("validation-summary-errors").addClass("validation-summary-valid").find("ul").empty();g.find("[data-valmsg-replace]").removeClass("field-validation-error").addClass("field-validation-valid").empty()}};function b(i,g,h){c=setTimeout(function(){a.ajax({type:"POST",url:i,success:function(j){if(j.Status==="generated"){g(j.FileUrl,j.Message)}else{if(j.Status==="not_generated"&&j.Success){h(j.Message)}else{b(i,g,h)}}},error:function(){b(i,g,h)}})},5000)}f.OnProjectPublished=function(g){if(g){if(g.Success){Fonts.Messages.singleSuccess(g.Message);a("#"+g.ProjectId).replaceWith(a(g.Html));a("#"+g.ProjectId).find(".accord-bar").click(function(h){Fonts.UI.accordBarExpandCollapseHandling(this);h.preventDefault()})}else{Fonts.Messages.singleError(g.Message);f.ReloadWebProject(g.ProjectId)}}};f.OnEditFontsPopup=function(h){if(h.FontsFaceDeclarationString){a('head style[id^="webfont-style"]').remove();f.addWebfontCss(h.FontsFaceDeclarationString)}if(h.WebFontsToLoad){a("body").append(h.WebFontsToLoad)}var g="";if(h.Html){g=a(h.Html)}else{if(typeof h==="string"){g=a(h)}}g.lightbox_me({onLoad:function(){Fonts.WebFontManager.StartWebFontsListener();g.find("#select-all-fonts").click(function(){var i=a(this);g.find(".select-font").each(function(){a(this).attr("checked",i.is(":checked"))})});g.find(".select-font").click(function(){g.find("#select-all-fonts").attr("checked",g.find(".select-font:checked").length===g.find(".select-font").length)})},onClose:function(){if(g.find("#hasChanges").val()==="1"){var i=g.data("targetProjectId");f.ReloadWebProject(i)}},destroyOnClose:true})};f.OnRemoveSelectedFonts=function(g){var i=new UserMessages(jQuery,"edit-fonts-messages");var h=a("section.modal.edit-web-fonts");if(h.find(".select-font:checked").length===0){i.singleCaution(g);return false}return true};f.RemoveSelectedFonts=function(l,k,h){var i=a("section.modal.edit-web-fonts");var j={ProjectId:k,FontsToRemove:[]};a.map(i.find(".select-font:checked"),function(n){var o=a(n).data("fontId");j.FontsToRemove.push(o)});var m=new UserMessages(jQuery,"edit-fonts-messages");if(j.FontsToRemove.length===0){m.singleCaution(a(this).data("nothingToRemoveMessage"));return}var g=a("#hiddenProjectFontCount").val();a.ajax({type:"POST",contentType:"application/json charset=utf-8",url:l,data:JSON.stringify({projectId:j.ProjectId,fontsToRemove:j.FontsToRemove,projectFontCount:g}),success:function(n){if(n.EmptyContent){i.find(".modal-content").replaceWith(n.EmptyContent)}else{if(n.Removed){a.each(n.Removed,function(p,q){i.find("input[data-font-id="+q.toString()+"]").parent().remove()});a(".font-results").find("li").last().removeClass("with-border");a(".font-results").height("auto");if(n.ProjectSize){i.find("#add-edit-fonts-project-size").html(n.ProjectSize)}var o=a("#hiddenProjectFontCount").val();a("#hiddenProjectFontCount").val(o-n.Removed.length)}}if(n.Success){m.singleSuccess(n.Message)}else{m.singleError(n.Message)}i.find("#select-all-fonts").attr("checked",false);i.find("#hasChanges").val("1")},beforeSend:function(){i.find("#"+h).showLoading();i.find("#removeFontsButton").hide();i.find("#removeFontsWaitButton").show()},complete:function(){i.find("#"+h).hideLoading();i.find("#removeFontsButton").show();i.find("#removeFontsWaitButton").hide()}})};f.OnDownloadDesktopFontsPopup=function(h){if(h){var g=a(h);g.lightbox_me({onLoad:function(){f.EnsureAllVisibleWebFontDeclarations()},onClose:function(){g.find("li").each(function(){a(this).hideLoading()})},destroyOnClose:true})}};f.onBeginDownload=function(g){var h=UserMessages(a,"download-web-fonts-messages");h.clearAll();a("#"+g).showLoading()};f.OnDownloadDesktopFontFile=function(j){if(j){if(j.Success){var i=a("section.download-web-fonts");i.find("#download-web-fonts-header").replaceWith(j.DownloadDesktopFontsHeaderHtml);var g=a("<iframe name='"+j.UniqueFileIdentifier+"' style='display:none'></iframe>");g.attr("src",j.LoadFileActionUrl);a("body").append(g)}else{var h=new UserMessages(jQuery,"download-web-fonts-messages");h.singleError(j.Message)}}};f.ConfirmDeleteProject=function(j){var i=a("#"+j);var g=i.find(".delete>a");var k=i.find(".web-project-name").text();var h=a.format(g.data("message"),k);Fonts.UI.Confirm(g.data("title"),h,g.data("confirmText"),g.data("cancelText"),function(){f.DeleteProject(j)})};f.DeleteProject=function(g){a.ajax({type:"POST",contentType:"application/json charset=utf-8",url:Fonts.Urls.getDeleteProjectAddess(),data:JSON.stringify({projectId:g}),success:function(k){var i=a("#"+g);var j=i.find(".web-project-name").text();var h=a.format(k.Message,j);i.hideLoading();if(k.Success){i.remove();Fonts.Messages.singleSuccess(h);if(a("#projects").children().length==0){a(".no-projects").show();a("#manage-projects-empty-header").show();a("#manage-projects-header").hide()}}else{Fonts.Messages.singleError(h)}},beforeSend:function(){a("#"+g).showLoading()},complete:function(){a("#"+g).hideLoading()}})};f.OnShowExportProject=function(h,i,j){var g=f.getWebFontsResponseHeader(j);if(g){e.routeMessage(g.type,g.message);if(g.type==="success"){if(h){a(h).lightbox_me({onLoad:function(){a(".link-action").click(function(){a(".txt-project-token").select()})},destroyOnClose:true})}}}};f.OnShowImportProject=function(h,i,j){var g=f.getWebFontsResponseHeader(j);if(g){e.routeMessage(g.type,g.message);if(g.type==="success"){if(h){a(h).lightbox_me({onLoad:function(){a(".txt-project-token").focus();a("#formImportExportProject").updateValidation();a(".submit-import").click(function(k){k.preventDefault();var l=a("#formImportExportProject");if(a(l).valid()===true){a(l).submit()}});a(".reset-import").click(function(k){k.preventDefault();a(".txt-project-token").val("").focus()})},destroyOnClose:true})}}}};f.OnProjectImported=function(h,i,j){var g=f.getWebFontsResponseHeader(j);if(g){e.routeMessage(g.type,g.message);if(g.type==="success"||g.type==="warning"){a("#"+g.projectId).replaceWith(h);a("#"+g.projectId).find(".accord-bar").click(function(k){Fonts.UI.accordBarExpandCollapseHandling(this);k.preventDefault()});if(g.type==="success"){Fonts.Messages.singleSuccess(g.message)}else{Fonts.Messages.singleCautionWithFadeOut(g.message)}}a(".import-project-container").trigger("close")}};f.OnUpdateProjectName=function(h,i,j){var g=f.getWebFontsResponseHeader(j);if(g){if(g.projectId){a("#showName"+g.projectId.replace(/-/g,"")).html(h);a("#"+g.projectId).find("h1").html(g.projectName)}}};f.OnProjectCreated=function(j,k,l){var h={validation:function(){a("#create_project_form_container").html(j);f.updateUnobtrusiveValidation("#new_projects_form")},success:function(){var m=a(j);a("#projects").prepend(m);a("#ProjectName").val("");a(".no-projects").hide();a("#manage-projects-header").show();a("#manage-projects-thankyou-header").hide();a("#manage-projects-empty-header").hide();m.find(".accord-bar").click(function(n){Fonts.UI.accordBarExpandCollapseHandling(this);n.preventDefault()})},error:function(){a("#create_project_form_container").html(j);f.updateUnobtrusiveValidation("#new_projects_form")}};var i=f.getWebFontsResponseHeader(l);if(i){e.routeMessage(i.type,i.message);var g=h[i.type];if(a.isFunction(g)){g(i)}}a("#create_project_form_container").hideLoading()};f.OnProjectNameEditorLoaded=function(g){a.validator.unobtrusive.parse("#"+g);a("#"+g).find("a.btnSave").click(function(h){h.preventDefault();var i=a(this).parents("form");if(a(i).valid()===true){a(i).submit()}})};f.OnDomainAdded=function(i,j,l){var h=f.getWebFontsResponseHeader(l);if(h){e.routeMessage(h.type,h.message,"domain-list-user-messages");var g={success:function(){a("#form-add-new-domain").hideLoading();a(i).appendTo("#domains");a("input.txt-add-new-domain").val("");a("#remove_project_domains_container").removeClass("hidden");a("#domain_list_container").find("#hasChanges").val("1")},warning:function(){a("#form-add-new-domain").hideLoading();a("#add_domain").html(i);f.updateUnobtrusiveValidation("#form-add-new-domain")},error:function(){a("#form-add-new-domain").hideLoading();a("#add_domain").html(i);f.updateUnobtrusiveValidation("#form-add-new-domain")}};var k=g[h.type];if(a.isFunction(k)){k()}}};f.OnDomainUpdated=function(i,j,l){var h=f.getWebFontsResponseHeader(l);if(h){e.routeMessage(h.type,h.message,"domain-list-user-messages");var g={success:function(){a("#domain_items").hideLoading();a("#"+h.containerId).html(i);a("#domain_list_container").find("#hasChanges").val("1")},warning:function(){a("#domain_items").hideLoading();a("#"+h.containerId).html(i);f.updateUnobtrusiveValidation(h.formId)},error:function(){a("#domain_items").hideLoading();a("#"+h.containerId).html(i);f.updateUnobtrusiveValidation(h.formId)}};var k=g[h.type];if(a.isFunction(k)){k()}}};f.AttachRemoveHandlers=function(){function g(i){var j={ProjectId:a(i).data("projectId"),DomainsToRemove:[]};a.map(a("#domain_items .check-box-delete"),function(k,l){if(a(k).is(":checked")===true){var m=a(k).data("domainUrl");j.DomainsToRemove.push(m)}});return j}function h(i){return function(){var j=g(i);if(j.DomainsToRemove.length===0){return}a("#domain_items").showLoading();a.ajax({type:"POST",contentType:"application/json charset=utf-8",url:a(i).data("actionUrl"),data:JSON.stringify({projectId:j.ProjectId,domainsToRemove:j.DomainsToRemove}),success:function(k,m,n){a("#domain_items").hideLoading();var l=f.getWebFontsResponseHeader(n);if(l){e.routeMessage(l.type,l.message,"domain-list-user-messages");if(l.type==="success"){a("#domain_items .all-delete").attr("checked",false);a("#domain_items").find(".check-box-delete:checked").parents("tr").remove();a("#domain_list_container").find("#hasChanges").val("1");if(a("#domains").find("tr").size()===0){a("#remove_project_domains_container").addClass("hidden")}}}}})}}f.manageCheckBoxesUI("#domain_items .check-box-delete","#domain_items .all-delete");f.OnRemoveSelectedDomains=function(i,o,n,l,j,m){f.clearAddNewDomainMessages();var k=g(i);if(k.DomainsToRemove.length===0){if(a("#domain-list-user-messages .error-user-message-container:visible").length==0){a("#domain-list-user-messages").find(".error.user-message").append("<p>"+m+"</p>");a("#domain-list-user-messages").find(".error-user-message-container").fadeIn()}return}a("#domain-list-user-messages").find(".error-user-message-container").fadeOut();Fonts.UI.Confirm(o,n,l,j,h(i))}};f.OnGetDomainsForProject=function(h){var g=a(h);g.lightbox_me({onLoad:function(){f.AttachRemoveHandlers();a.validator.unobtrusive.parse("#add_domain form");a("#form-add-new-domain .btnSave").click(function(){var i=new UserMessages(jQuery,"domain-list-user-messages");if(i.length!==0){i.clearAll()}});a("#domain_items .btnSave").live("click",function(i){i.preventDefault();f.clearAddNewDomainMessages();var j=a(this).parents("form");if(a(j).valid()===true){a(j).submit()}})},onClose:function(){var i=a(h).data("targetProjectId");a("#domain_items .btnSave").die("click");if(g.find("#hasChanges").val()==="1"){f.ReloadWebProject(i)}},destroyOnClose:true})};f.OnDowngradeToFreePlan=function(g){if(g){a(g).lightbox_me({onLoad:function(){},destroyOnClose:true})}};f.AttachAddToWebFontEvents=function(g){if(g){a(g).change(function(){var i=a(this).parents(".dropdown-inner");var j=parseInt(a(this).find(":selected").data("tier"),10);var h=parseInt(i.parents(".add-to-web-fonts").find("#customer-subscription-tier").val(),10);if(h>=j){i.find(".add-to-web-font-button").show();i.find(".add-to-web-font-upgrade-button").hide()}else{i.find(".add-to-web-font-button").hide();i.find(".add-to-web-font-upgrade-button").show()}})}};f.AddWebFontToProject=function(l){if(l){var g=a("#add-to-project-"+l.ContainerId),j=new UserMessages(jQuery,"messages-"+l.ContainerId),h=a("#product-name-"+l.FontId,g).first().val();if(!h){h=""}var k=a("option[value='"+l.ProjectId+"']",g).first().text();var i=a.format(l.Message,h,k);Fonts.UI.updateWebFontProjectDropDowns(l);if(l.Success){g.parents(".modal-content").children("#hasChanges").val("1");j.singleSuccess(i)}else{if(l.Warning){j.singleCaution(i)}else{j.singleError(i)}}}};f.AddAllFamilyWebFontsToProject=function(k){if(k){var g=a("#add-to-project-family-"+k.FamilyId),i=new UserMessages(jQuery,"messages-add-to-project-family-"+k.FamilyId),j=a("option[value='"+k.ProjectId+"']",g).first().text(),h=a.format(k.Message,j);Fonts.UI.updateWebFontProjectDropDowns(k);if(k.Success){i.singleSuccess(h)}else{if(k.Warning){i.singleCaution(h)}else{i.singleError(h)}}}};f.ReloadWebProject=function(h){var g=a("#"+h);var i=a("#project-"+h+"-list-item");var j=g.data("reloading");if(typeof j==="undefined"){j=0}if(j===0){a.ajax({type:"POST",contentType:"application/json charset=utf-8",url:Fonts.Urls.getUpdateProjectAddress(),data:JSON.stringify({projectId:h}),beforeSend:function(){i.showLoading();g.data("reloading",1)},success:function(k,m,n){var l=f.getWebFontsResponseHeader(n);if(l){if(l.type==="success"){if(k){a("#"+h).replaceWith(k);a("#"+h).find(".accord-bar").click(function(o){Fonts.UI.accordBarExpandCollapseHandling(this);o.preventDefault()})}}}},complete:function(){i.hideLoading();g.data("reloading",0)}})}};f.InitHomePage=function(){var g=a(".brand ul");if(g.length>0){g.bxSlider({auto:false,autoHover:true,displaySlideQty:1,moveSlideQty:1});g.find("a.open-popup").click(function(){var h=a(this);var i=a(a("#fonts-modal-alert").html());i.find("#alert-title").html(h.attr("title"));i.find(".modal-content").replaceWith("<img src='"+h.data("fullImageSrc")+"' alt='"+h.attr("title")+"' />");i.css("width","auto");i.css("height","auto");i.lightbox_me({destroyOnClose:true})});a(".brand .prevClient").click(function(){g.goToPreviousSlide()});a(".brand .nextClient").click(function(){g.goToNextSlide()})}};f.PojectPageviewsPopup=function(h){if(h){var g=a(h);g.lightbox_me({onClose:function(){},destroyOnClose:true})}};f.dropdownClose=function(){a('[id^="add-to-project"]:visible').toggle();a(".with-dropdown.active").removeClass().addClass("with-dropdown")};return f}(jQuery));$(document).ready(function(){Fonts.WebFonts.AttachAddToWebFontEvents($(".add-to-web-fonts .add-to-project-font-selector"));Fonts.UI.AttachAddToWebFontDropDownsEvents();Fonts.WebFonts.InitHomePage()});var WebFontsPlans=(function(a){var i={};i.disableAndShowLoading=function(){a('input[type="radio"]').attr("disabled","disabled");a("#subscription-plans").showLoading()};i.enableAndHideLoading=function(){a('input[type="radio"]').removeAttr("disabled");a("#subscription-plans").hideLoading()};var g=function(j){WebFontsPlans.disableAndShowLoading();a.ajax({type:"POST",url:Fonts.Urls.getChangePaymentPlan(),data:j,dataType:"json",success:function(k){if(k.Success){var l=a("#select-a-subscription-container").html(k.Html);i.bindChangePlanEvent(l[0]);c(l[0]);e(l[0]);d(l[0])}else{a("#plans-and-pricing-messages").html(k.Messages)}},complete:function(){WebFontsPlans.enableAndHideLoading()}})};i.bindChangePlanEvent=function(k){var j=a(".change-web-fonts-plans",k||"#select-a-subscription-container"),l;j.each(function(){l=a(this);l.val(l.find("option[selected]").attr("value"))});j.selectbox({onChange:function(n,m){g(a(m.input).closest("form").serialize())}})};var f=function(j){WebFontsPlans.disableAndShowLoading();var k=a("#IsModalDialog").val();a.ajax({type:"POST",url:Fonts.Urls.getChangePaymentFrequency(),data:"{'paymentFrequencyEnum': '"+j+"', 'isModalDialog':'"+k+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(l){if(l.Success){var m=a("#select-a-subscription-container").html(l.Html);i.bindChangePlanEvent(m[0]);c(m[0]);e(m[0]);d(m[0])}else{a("#plans-and-pricing-messages").html(l.Messages)}},complete:function(){WebFontsPlans.enableAndHideLoading()}})};var c=function(j){a('input[type="radio"]',j||"#select-a-subscription-container").change(function(){f(a(this).val())})};var b=function(j){var k=j.closest("form");k.find("#ActionSubscriptionTier").val(j.attr("data-subscription-tier"));var l=function(){k.submit();a("#select-a-subscription-container").trigger("subscription_finished")};a.ajax({type:"POST",url:Fonts.Urls.getAddToCartCheck(),data:k.serialize(),dataType:"json",async:false,success:function(m){if(m.Success){if(m.ShowDialog){var n=a(m.DialogHtml);n.lightbox_me({onLoad:function(){a("#downgrade-continue").click(function(){l();n.trigger("close")})},destroyOnClose:true})}else{l()}}else{a("#default-user-messages-container").replaceWith(m.Messages)}}})};var e=function(j){a(".select-subscription-button",j||"#select-a-subscription-container").click(function(k){k.preventDefault();b(a(this))})};i.CancelSubscription=function(j){WebFontsPlans.disableAndShowLoading();a.ajax({type:"POST",url:Fonts.Urls.getCancelSubscriptionUrl(),data:j.serialize()+"&PaymentFrequency="+j.find('input[name="PaymentFrequency"]:checked').val(),dataType:"json",success:function(l){if(l.Success){var m=a("#select-a-subscription-container").html(l.Html);i.bindChangePlanEvent(m[0]);c(m[0]);e(m[0]);d(m[0]);if(l.Success&&l.Messages){Fonts.UI.ShowAndRemove({container:"#plans-and-pricing-messages",data:l.Messages});if(l.NotifyUser){var k=Fonts.UI.Alert(Fonts.Resources.ImportantMessageTitle);k.addCaution(Fonts.Resources.AfterSuccessfullyDowngradedToFreeMessage)}}else{if(l.Messages){a("#plans-and-pricing-messages").html(l.Messages)}}}},complete:function(){WebFontsPlans.enableAndHideLoading()}})};i.setPaymentFrequency=function(){var j=a.cookie("frequency"),k,l;if(typeof j==="string"){k=a("#plans-and-pricing-form");l=k.find("input[value="+j+"]");if(l.attr("checked")!="checked"){k.find('input[name="PaymentFrequency"]').removeAttr("checked");l.attr("checked","checked")}}};var h=function(j){a.ajax({type:"POST",url:Fonts.Urls.getCancelCheck(),data:"",dataType:"json",success:function(k){var l=a(k.Html);l.lightbox_me({onLoad:function(){a("#downgrade-continue").click(function(){WebFontsPlans.CancelSubscription(j);l.trigger("close")})},destroyOnClose:true})}})};var d=function(j){a(".downgrade-subscription",j||"#select-a-subscription-container").click(function(k){h(a(this).closest("form"));k.preventDefault()})};i.init=function(){c();e();d()};i.init();return i}(jQuery));$(function(){WebFontsPlans.setPaymentFrequency();WebFontsPlans.bindChangePlanEvent()});Fonts.WishLists=(function(a){var c={};var b={};c.SetWishListEmptyNameMessage=function(d){b.failedCloneMessage=d};c.GetFailedCloneMessage=function(){return b.failedCloneMessage};c.SetSuccessClonedWishlist=function(d){b.successCloned=d};c.GetSuccessClonedWishListTitle=function(){return b.successCloned};c.SetFailedCloneTitle=function(d){b.failedCloneTitle=d};c.GetFailedCloneTitle=function(){return b.failedCloneTitle};c.parseWishList=function(d){a("#wishlist-content").html(d)};c.OnWebFontsWishListPopup=function(g){var e=a(g),d=e.find("section.modal"),f=e.find("#fonts-face-declaration");if(d.length===0){d=e}if(f.length){a('head style[id^="webfont-style"]').remove();Fonts.WebFonts.addWebfontCss(f.html());f.remove()}d.lightbox_me({onLoad:function(){Fonts.WebFontManager.StartWebFontsListener(d);Fonts.Dropdowns.AttachDropdown({container:d,dropdown:".add-to-web-fonts",close:".add-to-web-fonts-close",callback:function(h){h.find(".web-fonts-drop-down-list").children(":selected").removeAttr("selected");h.find(".web-fonts-drop-down-list").children(":nth-child(2)").attr("selected","selected");h.find(".sbSelector[id $= "+h.find(".web-fonts-drop-down-list").attr("sb")+"]").text(h.find(".web-fonts-drop-down-list").children(":selected").text());h.find(".add-to-project-font-selector").children(":selected").removeAttr("selected");h.find(".add-to-project-font-selector").children(":nth-child(1)").attr("selected","selected");h.find(".sbSelector[id $= "+a(".add-to-project-font-selector").attr("sb")+"]").text(h.find(".add-to-project-font-selector").children(":selected").text());h.find(".new-webfontsproject-name").val("").hide()}});Fonts.UI.AttachAddToWebFontDropDownsEvents(d)},onClose:function(){if(d.find("#hasChanges").val()==="1"){document.location.reload()}},destroyOnClose:true})};c.OnWebFontAddedToProject=function(h){if(h){var f=UserMessages(jQuery,"web-fonts-wish-list-messages"),d=a(".web-fonts-wish-list .font[data-font-id="+h.FontId+"]").find("h3").text(),g=a(".web-fonts-wish-list select option[value='"+h.ProjectId+"']").first().text(),e=a.format(h.Message,d,g);Fonts.UI.updateWebFontProjectDropDowns(h);if(h.Success){a(".web-fonts-wish-list").find("#hasChanges").val("1");f.singleSuccess(e)}else{f.singleError(e)}}};c.OnCreateProjectWithWebFont=function(h){if(h){var f=UserMessages(jQuery,"web-fonts-wish-list-messages");var d=a(".web-fonts-wish-list .font[data-font-id="+h.FontId+"]").find("h3").text();var g=h.ProjectName;var e=a.format(h.Message,d,g);if(h.Success){a(".web-fonts-wish-list").find("#hasChanges").val("1");f.singleSuccess(e)}else{f.singleError(e)}}};c.ChangeContainerContent=function(d,e,f){a(d).html(e.ContainerContent);a("#selected-wishlistId option[value="+f+"]").html(a("#selected-wishlistName").html());a("#selected-wishlistId").selectbox("detach");a("#selected-wishlistId").selectbox();jQuery.validator.unobtrusive.parse(d);if(typeof e.Message!="undefined"){Fonts.UI.ShowAndRemove({container:"#wishlists-messages-container",data:e.Message})}};c.OnSuccessWishListDelete=function(e,d){if(d.Success){a("#wishlist-"+e+"-row").remove()}if(typeof d.Message!="undefined"){Fonts.UI.ShowAndRemove({container:"#wishlists-messages-container",data:d.Message})}};c.AddToWishListSubmit=function(e){var d=a(e).parents("form:first");var f=c.GetClosestSelectedProductVariationId(d);d.find("input[name=VariationId]").val(f);d.submit()};c.GetClosestSelectedProductVariationId=function(e){var d=e.find("input[name=DefaultVariationId]:first");while(e.parent().length>0){e=e.parent();var f=e.find("select[name=VariationId]:first");if(f.length>0){return f.val()}if(a(e).hasClass("font-results-parent")||a(e).hasClass("font-child")){return 0}}return d.length>0?d.val():0};c.AddToWishListSuccess=function(e){if(e){var d=new UserMessages(jQuery,"messages-"+e.ContainerId);if(e.Success){d.singleSuccess(e.Message)}else{if(e.IsWarningMessage){d.singleCaution(e.Message)}else{d.singleError(e.Message)}}}};c.CreateAndAddToWishListSuccess=function(f){if(f){var e=new UserMessages(jQuery,"messages-"+f.ContainerId);var d=a("#"+f.ContainerId);if(f.WishListSelectHtml){d.find("input.new-wishlist-name").val("");Fonts.UI.updateWishListDropDowns(f)}if(f.Success){e.singleSuccess(f.Message)}else{if(f.IsWarningMessage){e.singleCaution(f.Message)}else{e.singleError(f.Message)}}}};c.CancelEditingWishListName=function(e){var d=a(e).parent().parent();a("input[name=Name]",d).val(a("input[name=OldName]",d).val())};c.OnSuccessRemoveItem=function(d){if(d.Success==true){var e=function(){a("#variation-"+d.ProductVariationId+"-row").remove()};Fonts.UI.ShowAndRemove({container:a("#variation-"+d.ProductVariationId+"-row"),data:d.Messages,callback:e})}else{Fonts.UI.ShowAndRemove({container:a("#variation-"+d.ProductVariationId+"-row-messages"),data:d.Messages})}};c.CloneWishlistButtonEvent=function(){var d=a("#clone-wish-list-form");if(d&&a("#cloneWishListName").valid()){var e=a("#cloneWishListName");d.parent().showLoading();a.ajax({type:"POST",url:d.attr("action"),data:d.serialize(),dataType:"json",success:function(f){if(f&&f.Success){Fonts.UI.updateWishListDropDowns(f);e.val("")}if(!f.ModelStateIsValid&&f.FormHtml){a("#clone-wish-list-form").replaceWith(f.FormHtml);a("#clone-wish-list-form #clone-wishlist-button").click(Fonts.WishLists.CloneWishlistButtonEvent)}var g={container:d.find("span.messages-container"),data:f.Message};Fonts.UI.ShowAndRemove(g)},complete:function(){d.parent().hideLoading()}})}};Fonts.UI.wishListDropDowns();return c}(jQuery));Fonts.CartSummary=(function(a){var b={};b.AttachCartOptionsDropDown=function(){a('input[name="cartOptionSelection"]').change(function(){if(this.value){switch(this.value){case"wishlist":a("div.cart-option-wish-list").show();a("p.go-to-wish-list-container").show();a("div.cart-option-quote").hide();a("div.cart-option-delete").hide();break;case"quote":a("div.cart-option-wish-list").hide();a("p.go-to-wish-list-container").hide();a("div.cart-option-quote").show();a("div.cart-option-delete").hide();break;case"deletecart":a("div.cart-option-wish-list").hide();a("p.go-to-wish-list-container").hide();a("div.cart-option-quote").hide();a("div.cart-option-delete").show();break}}})};b.RefreshCartHeaderSummary=function(h,g){try{var i=Fonts.Urls.getCartFloatingNavigation();a.ajax({url:i,beforeSend:function(){a("#cart-floating-nav-container").showLoading()},success:function(e){a("#cart-floating-nav-container").html(e);Cart.BindAllCartNavigationBlockEvents();if(typeof h!=="undefined"){h()}},error:function(){if(typeof g!=="undefined"){g()}},complete:function(){a("#cart-floating-nav-container").hideLoading()}})}catch(f){}};b.AddToCartBegin=function(f){var e=c(f);b.ManageAddToCartButtons(e,false,false,true);Fonts.UI.showAsideSpinner()};b.AddToCartSuccess=function(f){if(f){var e=c(f.ContainerId);if(f.Success){b.RefreshCartHeaderSummary(function(){var h=Fonts.CartSummary.GetAddedProductVariationsToCart();b.UpdateWishListAddToCartButtons(h);e.each(function(){var i=a(this);var k=a("select",i);var j=a.inArray(k.val(),h)>-1;b.ManageAddToCartButtons(i,!j,j,false)});a("#cart-floating-nav-container .trigger").each(function(){TopNavigation.AttachEvents(this)});Fonts.Account.AttachEventsToCartTotalSectionsTriggers();Fonts.Account.AttachEventsToMiniCartSectionsTriggers()},function(){b.ManageAddToCartButtons(e,true,false,false)})}else{b.ManageAddToCartButtons(e,true,false,false);var g=Fonts.UI.Alert(f.MessageTitle);g.addError(f.Message)}}Fonts.UI.hideAsideSpinner()};b.WishListAddToCartSuccess=function(e){var f={container:"#wish-list-add-to-cart-user-messages",data:e.Messages};if(e.Success){b.RefreshCartHeaderSummary(function(){b.UpdateAllAddToCartButtons();Fonts.UI.ShowAndRemove(f);a("#cart-floating-nav-container .trigger").each(function(){TopNavigation.AttachEvents(this)});Fonts.Account.AttachEventsToCartTotalSectionsTriggers();Fonts.Account.AttachEventsToMiniCartSectionsTriggers();a("#wish-list-add-to-cart").parent().hideLoading()},function(){a("#wish-list-add-to-cart").parent().hideLoading()})}else{f.removeAfter=-1;Fonts.UI.ShowAndRemove(f)}};b.WishListAddToCartFailure=function(){b.ManageAddToCartButtons(a("#wish-list-add-to-cart"),true,false,false);a("#wish-list-add-to-cart").parent().hideLoading()};b.AddToCartFailure=function(){b.UpdateAllAddToCartButtons();Fonts.UI.hideAsideSpinner()};b.GetAddedProductVariationsToCart=function(){var f=a("#ProjectVariationsAlreadyInCart").val();var e=[];if(f){e=f.split(",")}return e};b.ManageAddToCartButtons=function(e,h,i,j){var f=a.makeArray(e);for(var g in f){d(a(f[g]),h,i,j)}};b.UpdateAllAddToCartButtons=function(){var e=a(".form-add[data-addToCartIdentifier]"),f=Fonts.CartSummary.GetAddedProductVariationsToCart();e.each(function(){var g=a(this),h=a.inArray(g.find("select").val(),f)>-1;b.ManageAddToCartButtons(g,!h,h,false)});b.UpdateWishListAddToCartButtons(f)};b.UpdateWishListAddToCartButtons=function(f){var g=a("#whish-list-products"),e;if(g.length){e=a("#wish-list-add-to-cart");if(b.allWhishListProductsInCart(g,f)){e.find(".add-to-cart-button").hide();e.find(".in-cart-button").show()}else{e.find(".add-to-cart-button").show();e.find(".in-cart-button").hide()}}};b.allWhishListProductsInCart=function(o,g){var e=false,m,n,k=o.find("input"),l=k.length,f,h;for(f=0;f<l;f++){e=false;m=k[f].value.split(",");n=m.length;for(h=0;h<n;h++){if(a.inArray(m[h],g)>-1){e=true;break}}if(!e){break}}return e};function c(e){return a(".form-add[data-addToCartIdentifier='"+e+"']")}function d(g,h,i,j){var e=g.find(".add-to-cart-button");var f=g.find(".in-cart-button");var k=g.find(".add-to-cart-wait");if(h){e.show()}else{e.hide()}if(i){f.show()}else{f.hide()}if(j){k.show()}else{k.hide()}}return b}(jQuery));var Cart=(function(a){var h={};var i=false;var m={};var j=false;h.setCartPageIsActive=function(){i=true};h.LicensesAndTermsMessage=function(p){m.LicensesMessage=p};function n(){var t=new UserMessages(jQuery,"cart-billing-user-messages");t.clearAll();var q=a("input, select","#billing-information-section").valid();var p=a("#agreement-to-license");p.removeClass("necessary-element");var s=a('input[type=checkbox][name="BillingInformationViewModel.LicensesAndTerms"]').is(":checked");if(s===false){t.addError(m.LicensesMessage);p.fadeIn();p.addClass("necessary-element")}var r=a(".accord-bar","#billing-information-section").hasClass("collapse");if((!q||!s)&&r){Fonts.UI.accordBarExpandCollapseHandling(a(".accord-bar","#billing-information-section"))}return q&&s}function o(){var p=a("#agreement-to-authorization");p.removeClass("necessary-element");var q=a('input[type=checkbox][name="PaymentInformationViewModel.DirectDebitAuthorization"]').is(":checked");if(q===false){p.fadeIn();p.addClass("necessary-element")}return q}function d(p){if(p.length!==0){p.click(function(){Fonts.UI.accordBarNavigateHandling(this,function(){a("html, body").animate({scrollTop:a("#billing-information-section").offset().top},500)})})}}function e(){var p=a(".proccess-billing .payment-pathway","#billing-information-section");if(p.length!==0){p.click(function(){Fonts.Messages.clearAll();if(n()){Fonts.UI.accordBarNavigateHandling(this,function(){a("html, body").animate({scrollTop:a("#payment-information-section").offset().top},500)})}})}}function c(){var p=a(".proccess-billing .back","#billing-information-section");if(p.length!==0){p.click(function(q){Fonts.UI.accordBarNavigateHandling(this,function(){a("html, body").animate({scrollTop:a("#cart-summary-section").offset().top},500)});q.preventDefault()})}}function l(){if(j===false){j=true;var q=a("#payment-information-submit-credit");if(q.length!==0){q.val(Fonts.Translations.pleaseWaitButton);q.addClass("input-appr")}var p=a("#submit-free-payment");if(p.length!==0){p.val(Fonts.Translations.pleaseWaitButton);p.addClass("input-appr")}a("#payment-information-form")[0].submit()}}function f(){var p=a("#submit-free-payment");if(p&&p.length!==0){p.click(function(q){Fonts.Messages.clearAll();q.preventDefault();if(n()){l()}})}}function g(){var p=a("#payment-information-submit-credit");if(p&&p.length!==0){p.click(function(s){Fonts.Messages.clearAll();s.preventDefault();var t=a(".selected-payment-type").val();var r="#payment-information-section #"+t;var q=a("input",r);var u;if(q.length>0){u=q.valid()}else{u=true}if(t=="DirectDebit"){u=o()}if(n()&&u){l()}})}}function b(){var p=a("#cart-payment-paypal-submit");if(p.length!==0){p.click(function(q){Fonts.Messages.clearAll();q.preventDefault();if(n()){l()}})}}h.BindCartItemRemoveAction=function(p){if(p){p.click(function(q){a(this).parent().parent().prev(".confirm-remove").show();a(this).closest(".cart-info").hide();q.stopPropagation()})}};h.BindCartItemCancelRemoveAction=function(p){if(p){p.click(function(q){a(this).closest(".confirm-remove").hide();a(this).closest(".confirm-remove").next().show();q.stopPropagation()})}};h.OnSuccessCallRemoveCartItem=function(p){var q=a("<div>").html(p).find("#ReloadCartPage");if(q&&q.val()==="True"&&i){window.location.href=Fonts.Urls.getCartPageUrl();return}Fonts.CartSummary.UpdateAllAddToCartButtons();if(i){h.RefreshCartItemInformation();h.RefreshCartPageSummary();h.UpdateCartPaymentInformation()}a("#cart-floating-nav-container .trigger").each(function(){TopNavigation.AttachEvents(this)});Fonts.Account.AttachEventsToCartTotalSectionsTriggers();Fonts.Account.AttachEventsToMiniCartSectionsTriggers()};h.BindAllCartNavigationBlockEvents=function(){h.BindCartItemRemoveAction(a(".hovered-cart .remove"));h.BindCartItemCancelRemoveAction(a(".hovered-cart .cancel"));h.AttachEventsToRemoveCartItemLink()};h.AttachEventsToRemoveCartItemLink=function(){a(".remove-cart-item-a").click(function(){a(this).parents("form.remove-cart-item-from").submit()})};h.AttachEventsToApplyCouponCode=function(){a(".tiny",".totals").not("#apply-promotion-to-subscription").click(function(){Fonts.Messages.clearAll();var p=a("#coupon").val();if(p){var q={couponCode:p};a("#cart-summary-section").showLoading();a.ajax({type:"POST",url:Fonts.Urls.applyCartCoupon(),data:JSON.stringify(q),contentType:"application/json; charset=utf-8",dataType:"json",success:function(s){var r=s;if(r&&r.Success){h.RefreshCartItemInformation();h.RefreshCartPageSummary();h.UpdateCartPaymentInformation();Fonts.CartSummary.RefreshCartHeaderSummary();Fonts.Messages.addSuccess(r.Message)}else{Fonts.Messages.addError(r.Message)}a("#coupon").val("");a("#cart-summary-section").hideLoading()}})}})};h.AttachEventsToPaymentTypeSelection=function(){a(".cart-payment-type").click(function(p){var q=a(this).data("payment-type");a(".selected-payment-type","#payment-information-form").val(q);if(q==="PayPal"){a("#payment-information-submit-credit").hide();a("#cart-payment-paypal-submit").show()}else{if(q==="None"){a("#payment-information-submit-credit").hide();a("#cart-payment-paypal-submit").hide()}else{a("#payment-information-submit-credit").show();a("#cart-payment-paypal-submit").hide()}}p.preventDefault()})};function k(p,q){if(p==undefined){p=a("#cart-summary-container")}if(q==undefined){q=p.html()}var s=p.parents(".scrollfollow-wrap");if(s.length==0){s=p.parents(".sub")}var t=a('<aside class="pricing cart-summary" id="cart-summary-container"></aside>').html(q);t.css("float","left");s.append(t);var r=t.outerWidth();t.remove();p.parent().css("width",r)}h.RefreshCartPageSummary=function(s,r){var p=a("#cart-summary-container");if(p.length!==0){try{var t=Fonts.Urls.getCartPageSummary();a.ajax({url:t,beforeSend:function(){p.showLoading()},success:function(u){p.html(u);k(p,u);if(a.isFunction(s)){s()}},error:function(){if(a.isFunction(r)){r()}},complete:function(){p.hideLoading()}})}catch(q){}}};h.RefreshCartItemInformation=function(u,t){var p=a("#cart-details-container");if(p.length!==0){try{var r;var q=a(p).data("type");if(q&&q==="readonly"){var v=a("#OrderHash").val();r=Fonts.Urls.getCartItemsDetailsReadonly()+"?orderhash="+v}else{r=Fonts.Urls.getCartItemsDetails()}a.ajax({url:r,beforeSend:function(){p.showLoading()},success:function(w){p.html(w);a(".cust-phone-required").val(a(".order-cust-phone-required").val());h.BindLicenseQuantityEvents();h.BindCartItemFormatEvent();h.AttachEventsToApplyCouponCode();d(a(p).find(".payment-pathway","#cart-summary-section"));if(a.isFunction(u)){u()}},error:function(){if(a.isFunction(t)){t()}},complete:function(){p.hideLoading()}})}catch(s){}}};h.OnSuccessUpdateLicenseQuantity=function(p){if(p&&p.Success){if(p.IsEmptyCart){window.location.href=Fonts.Urls.getCartPageUrl();return}Fonts.CartSummary.RefreshCartHeaderSummary();h.RefreshCartPageSummary();h.RefreshCartItemInformation();h.UpdateCartPaymentInformation();if(p.WarningMesssage&&p.WarningMessage!==""){Fonts.Messages.addCaution(p.WarningMesssage)}}};h.BindLicenseQuantityEvents=function(){a(".license-quantity").on("change",function(){var x=a(this).val();var q=a("#form-"+x);if(q.length!==0){var u=q.find('input[name="lineNumber"]').val();var t=q.find('input[name="licenseQuantity"]').val();Fonts.Messages.clearAll();if(t==-1){var v=a(this).parents("li").children(".license-quantity-manual");v.css("display","inline");v.find('input[type="text"]').val(250)}else{try{var p=a("#cart-details-container");var r={lineNumber:u,licenseQuantity:t};var w=Fonts.Urls.getUpdateCartLicenseQuantityAddress();a.ajax({type:"POST",url:w,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(r),beforeSend:function(){if(p){p.showLoading()}},success:function(y){h.OnSuccessUpdateLicenseQuantity(y)},complete:function(){if(p){p.hideLoading()}}})}catch(s){}}}})};h.BindCartItemFormatEvent=function(){a(".cart-item-format-selection").on("change",function(){var u=a(this).val();var p=a("#cart-details-container");var q=a("#form-"+u);if(q.length!==0){var s=q.find('input[name="lineNumber"]').val();var v=q.find('input[name="productVariationId"]').val();var r={lineNumber:s,productVariantionId:v};var t=Fonts.Urls.getUpdateCartItemFormat();Fonts.Messages.clearAll();a.ajax({type:"POST",url:t,data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(){p.showLoading()},success:function(w){if(w&&w.Success){if(w.IsEmptyCart){window.location.href=Fonts.Urls.getCartPageUrl();return}Fonts.CartSummary.RefreshCartHeaderSummary();h.RefreshCartPageSummary();h.RefreshCartItemInformation();h.UpdateCartPaymentInformation()}else{Fonts.Messages.singleError(w.Message)}},complete:function(){if(p){p.hideLoading()}}})}})};h.BindCartOptionsDeleteEvent=function(){var p=a("#delete-cart-button");if(p){p.click(function(){var q=a(this);Fonts.UI.Confirm(q.data("title"),q.data("message"),q.data("confirmText"),q.data("cancelText"),q.data("onConfirm"),q.data("onCancel"),q.data("onOpen"))})}};h.RemoveAllCartItems=function(){var p=a("#delete-cart-form");if(p){p.submit()}};h.RemoveCartItem=function(r){var p=a("#cart-summary-section");if(p.length!==0){try{var s=Fonts.Urls.deleteCartItem();Fonts.Messages.clearAll();a.ajax({type:"POST",url:s,data:"{'lineNumber': '"+r+"'}",contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(){p.showLoading()},success:function(t){if(t&&t.Success){if(t.IsEmptyCart){window.location.href=Fonts.Urls.getCartPageUrl();return}Fonts.CartSummary.RefreshCartHeaderSummary();h.RefreshCartPageSummary();h.RefreshCartItemInformation();h.UpdateCartPaymentInformation()}},complete:function(){p.hideLoading()}})}catch(q){}}};h.UpdateCartPaymentInformation=function(){try{var w=Fonts.Urls.getCartPaymentInformationSection();Fonts.Messages.clearAll();var q=a(".billing-information-country").val();var v=a(".selected-payment-type").val();var u="PaymentInformationViewModel_";var t="";var s=a(document.createElement("form"));a('<input type="text"/>').attr("name",t+"PaymentType").attr("value",v).appendTo(s);a('<input type="text" name="selectedCountryCode"/>').attr("value",q).appendTo(s);if(a("#payment-information-section").length>0){var p=a('input[type=checkbox][name="PaymentInformationViewModel.DirectDebitAuthorization"]').is(":checked");a('<input type="text"/>').attr("name",t+"CreditCardTypeId").attr("value",a("#"+u+"CreditCardTypeId").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"AccountNumber").attr("value",a("#"+u+"AccountNumber").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"CvvNumber").attr("value",a("#"+u+"CvvNumber").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"ExpirationMonth").attr("value",a("#"+u+"ExpirationMonth").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"ExpirationYear").attr("value",a("#"+u+"ExpirationYear").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"PurchaseOrderNumber").attr("value",a("#"+u+"PurchaseOrderNumber").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"DirectDebitAuthorization").attr("value",p).appendTo(s);a('<input type="text"/>').attr("name",t+"DirectDebitAccountNumber").attr("value",a("#"+u+"DirectDebitAccountNumber").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"DirectDebitBankCode").attr("value",a("#"+u+"DirectDebitBankCode").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"DirectDebitBranchCode").attr("value",a("#"+u+"DirectDebitBranchCode").val()).appendTo(s);a('<input type="text"/>').attr("name",t+"DirectDebitCheckDigit").attr("value",a("#"+u+"DirectDebitCheckDigit").val()).appendTo(s)}a.ajax({type:"POST",url:w,dataType:"json",data:s.serialize(),beforeSend:function(){var x=a("#payment-information-section");if(x.length!==0){x.showLoading()}},success:function(y){if(y&&y.Success){if(y.RenderedView.length===0){a("#payment-information-section").remove();a(".billing-information-area .submit.proccess-billing").hide();a(".billing-information-area .submit.submit-cart-payment").show();a(".selected-payment-type","#payment-information-form").val("None")}else{var z=a("#payment-information-section");if(z.length>0){z.remove()}a("#billing-information-section").after(y.RenderedView);a(".billing-information-area .submit.proccess-billing").show();a(".billing-information-area .submit.submit-cart-payment").hide();if(y.PaymentType){a(".selected-payment-type","#payment-information-form").val(y.PaymentType)}else{a(".selected-payment-type","#payment-information-form").val("None")}var x=a(".accord-bar","#payment-information-section");if(x.length!==0){x.click(function(A){Fonts.UI.accordBarExpandCollapseHandling(x);A.preventDefault()})}a("#payment-information-form").updateValidation();g();h.AttachEventsToPaymentTypeSelection();b();Fonts.UI.tabSortSwitcher(a("ul.tabs li, ul.sort li","#payment-information-section"))}}else{}},complete:function(){var x=a("#payment-information-section");if(x.length!==0){x.hideLoading()}}})}catch(r){}};h.OnFeatureUpgradePopup=function(q){if(q.length!==0){var p=a(q);p.lightbox_me({onLoad:function(){BindTextPopperHover(p.find(".textpopper"));p.find(".opent-type-selected-action").click(function(){try{var v=a(this).data("variation-id");var t=p.find("#CartLineNumber").val();var r={lineNumber:t,productVariantId:v};var u=Fonts.Urls.getUpdateCartItemFeature();a.ajax({type:"POST",url:u,data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(){p.find(".modal-content").showLoading()},success:function(w){if(w&&w.Success){a("#feature-upgrade-dialog .close").click();if(w.IsEmptyCart){window.location.href=Fonts.Urls.getCartPageUrl();return}Fonts.CartSummary.RefreshCartHeaderSummary();h.RefreshCartPageSummary();h.RefreshCartItemInformation();h.UpdateCartPaymentInformation()}else{var x=new UserMessages(a,"open-type-options-messages-container");x.singleError(w.Message)}},complete:function(){p.find(".modal-content").hideLoading()}})}catch(s){}})},destroyOnClose:true})}};h.onAddCartItemToWishlistPopup=function(q){if(q.length!==0){var p=a(q);p.find("select").selectbox();p.lightbox_me({onLoad:function(){p.find("#add-cart-item-to-new-wishlist-form").updateValidation();Fonts.UI.BindJsonpFormSubmitEvents("#add-cart-item-to-wish-content");Fonts.Account.AttachEventsToMemberSigninForSelector(p.find(".password-reset-link-trigger","#add-cart-item-to-wish-content"));p.find('form[data-ajax="true"] input.ajaxforce').click(function(r){r.preventDefault();var s=a(this).closest("form");if(s.valid()){s.submit()}});p.find(".wislist-popup-close").click(function(s){var r=a(this).closest(".wishlist-modal").find(".close");if(r.length!==0){r.click()}s.preventDefault()})},destroyOnClose:true})}};h.onCreatedAndAddedToWishlist=function(r){if(r.length!==0){a("#add-cart-item-to-wish-content select").selectbox();var s=a(".success.user-message","#add-cart-item-to-wish-content");var p="TempIntervalId",q=s.data(p);clearInterval(q);q=setTimeout(function(){s.children().fadeOut(function(){s.empty()});a(".success-user-message-container","#add-cart-item-to-wish-content").hide()},3000);s.data(p,q);a("#add-cart-item-to-wish-content .wislist-popup-close").click(function(u){var t=a(this).closest(".wishlist-modal").find(".close");if(t.length!==0){t.click()}u.preventDefault()})}};h.showPolicyBalloon=function(q,p){a(q).click(function(){a(this).siblings(p).stop().fadeIn("fast")})};h.closePolicyBalloon=function(q,p){a(q).click(function(){a(this).parent(p).stop().hide()})};h.RefreshCartSections=function(){h.RefreshCartItemInformation();h.RefreshCartPageSummary();h.UpdateCartPaymentInformation()};h.cartVatCalculation=function(){var r="BillingInformationViewModel_";var q=r+"CustomerAddressViewModel_";var p="CustomerAddressViewModel.";if(a("#"+q+"Address1").val().length===0||a("#"+q+"City").val().length===0||a("#"+q+"CountryCode").val().length===0||(a("#"+q+"CountryCode").val()==="US"&&(a("#"+q+"StateCode").length===0||a("#"+q+"StateCode").val().length===0))||a("#"+q+"PostalCode").val().length===0){return}var s=a(document.createElement("form"));if(a("#OrderId").length===1){a('<input type="text"/>').attr("name","OrderId").attr("value",a("#OrderId").val()).appendTo(s)}a('<input type="text" name="VatCode"/>').attr("value",a("#"+r+"VatCode").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"AddressId").attr("value",a("#"+q+"AddressId").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"Address1").attr("value",a("#"+q+"Address1").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"Address2").attr("value",a("#"+q+"Address2").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"City").attr("value",a("#"+q+"City").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"CountryCode").attr("value",a("#"+q+"CountryCode").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"Email").attr("value",a("#"+q+"Email").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"FirstName").attr("value",a("#"+q+"FirstName").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"LastName").attr("value",a("#"+q+"LastName").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"OrganizationName").attr("value",a("#"+q+"OrganizationName").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"Phone").attr("value",a("#"+q+"Phone").val()).appendTo(s);a('<input type="text"/>').attr("name",p+"PostalCode").attr("value",a("#"+q+"PostalCode").val()).appendTo(s);if(a("#"+q+"StateCode").length===1){a(document.createElement("input")).attr("name",p+"StateCode").attr("type","text").attr("value",a("#"+q+"StateCode").val()).appendTo(s)}Fonts.Messages.clearAll();a.ajax({type:"POST",url:Fonts.Urls.getCartVatCalculationUrl(),data:s.serialize(),dataType:"json",success:function(t){if(t.Success&&t.ChangedTaxAmount){if(t.TaxChangedMessage!==""){Fonts.Messages.clearAll();Fonts.Messages.addCaution(t.TaxChangedMessage)}Cart.RefreshCartItemInformation();Cart.RefreshCartPageSummary();Fonts.CartSummary.RefreshCartHeaderSummary()}},global:false,error:function(){}})};h.SendOrderReceiptComplete=function(p){var q={container:p.ResponseContainer+"-messages",data:p.Messages};if(!p.Success){q.removeAfter=-1}Fonts.UI.ShowAndRemove(q);a(p.ResponseContainer).hideLoading()};a(document).ready(function(){d(a(".payment-pathway","#cart-summary-section"));e();c();f();b();g();k()});return h}(jQuery));var BillingInformationForm=(function(a){var b={};var h;var f;function c(){if(a.isFunction(h)){h()}}function d(){if(a.isFunction(f)){f()}}function g(){var j=a("#billing-information-section"),k={isoCountryCode:j.find(".billing-information-country").val(),stateCode:j.find(".billing-information-sate").val()};a.ajax({type:"POST",url:Fonts.Urls.getBillingStatesListAddress(),data:JSON.stringify(k),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(){j.showLoading()},success:function(l){if(l.Success&&l.CountryStateHtml!==""){j.find("#billing-information-country-and-state").html(l.CountryStateHtml);c();i();e();if(l.IsVatCollected){a("#billing-vat-row").show()}else{a("#billing-vat-row").hide();var m=a(".vat-code-input");if(m.length!==0){a(m).val("")}}j.find(".billing-information-sate").focus();d()}},complete:function(){j.hideLoading()}})}function i(){a(".billing-information-sate").on("change",function(){c()})}function e(){a(".billing-information-country").on("blur",function(){if(a(this).valid()){g()}})}b.BindChangeCountryAndStateEvent=function(){i();e()};b.BindTaxCalculationInputs=function(j){h=j;a(".tax-input").each(function(){var k=a(this);k.blur(function(){if(k.val()!=k.data("old-value")){c();k.data("old-value",k.val())}})})};b.BindRefreshCartInformation=function(j){f=j};return b}(jQuery));$(function(){BillingInformationForm.BindChangeCountryAndStateEvent()});Fonts.ValidationMessages=(function(a){var b={};var c=[];b.setInvalidPhoneNumberGeneralMessage=function(d){c.invalidPhoneNumberGeneral=d};b.getInvalidPhoneNumberGeneralMessage=function(){return c.invalidPhoneNumberGeneral};b.setInvalidPhoneNumberForUsAndCa=function(d){c.invalidPhoneNumberUsAndCa=d};b.getInvalidPhoneNumberForUsAndCa=function(){return c.invalidPhoneNumberUsAndCa};b.setInvalidPostalCodeForUsMessage=function(d){c.invalidPostalCodeForUs=d};b.getInvalidPostalCodeForUsMessage=function(){return c.invalidPostalCodeForUs};b.setInvalidPostalCodeForCaMessage=function(d){c.invalidPostalCodeForCa=d};b.getInvalidPostalCodeForCaMessage=function(){return c.invalidPostalCodeForCa};return b}(jQuery));(function(a){var d=/[+\(\d]?\d+[\- \d\.\(\)]{7,}/;var e=/\d{10}|((\(\d{3}\) ?)|(\d{3}[-\.]))?\d{3}[-\.]\d{4}/;var g=/^(\d{5}-\d{4}|\d{5})$/;var f=/[a-zA-Z]\d[a-zA-Z] \d[a-zA-Z]\d/;a.validator.addMethod("jqphonebycountry",function(k,i,j){var h;if(this.optional(i)){return true}h=a('select[name="'+j+'"]').val();if(h==="US"||h==="CA"){return e.test(k)}return d.test(k)},function(i){var h=a('select[name="'+i+'"]').val();if(h&&(h==="US"||h==="CA")){return Fonts.ValidationMessages.getInvalidPhoneNumberForUsAndCa()}return Fonts.ValidationMessages.getInvalidPhoneNumberGeneralMessage()});a.validator.addMethod("jqpostalcodebycountry",function(k,i,j){var h;if(this.optional(i)){return true}h=a('select[name="'+j+'"]').val();if(h==="US"){return g.test(k)}else{if(h==="CA"){return f.test(k)}}return true},function(i){var h=a('select[name="'+i+'"]').val();if(h){if(h==="US"){return Fonts.ValidationMessages.getInvalidPostalCodeForUsMessage()}else{if(h==="CA"){return Fonts.ValidationMessages.getInvalidPostalCodeForCaMessage()}}}return""});a.validator.addMethod("jqdirectdebitfield",function(p,n,o){var i=a(".billing-information-country");var k=new RegExp(o.regexde);var j=new RegExp(o.regexat);var l=new RegExp(o.regexes);var m=new RegExp(o.regexnl);if(i.length>0){var h=i.val();if(h==="DE"){return k.test(p)}if(h==="AT"){return j.test(p)}if(h=="ES"){return l.test(p)}if(h==="NL"){return m.test(p)}return true}return false});a.validator.addMethod("cssselector",function(k,h,j){try{if(k.indexOf("<")>-1){throw ("invalid")}a(k)}catch(i){return false}return true},"");a.validator.addMethod("acceptopt",function(l,h,k){var j=k.ignore;if(l){if(!j||j!=l){var i=typeof k.extopt=="string"?k.extopt.replace(/,/g,"|"):"png|jpe?g|gif";return l.match(new RegExp(".("+i+")$","i"))}}return true});a.validator.addMethod("requiredbyswitch",function(k,h,i){var j=a('[name="'+i.fullSwitchFieldName+'"]').val();if(j=="True"){return a.validator.methods.required.call(this,a.trim(h.value),h)}return true});function c(h){return h.substr(0,h.lastIndexOf(".")+1)}function b(i,h){if(i.indexOf("*.")===0){i=i.replace("*.",h)}return i}a.validator.unobtrusive.adapters.add("phonebycountry",["country"],function(i){var k=c(i.element.name),j=i.params.country,h=b(j,k);i.rules.jqphonebycountry=h});a.validator.unobtrusive.adapters.add("postalcodebycountry",["country"],function(i){var k=c(i.element.name),j=i.params.country,h=b(j,k);i.rules.jqpostalcodebycountry=h});a.validator.unobtrusive.adapters.add("cssselector",{},function(h){h.rules.cssselector=true;h.messages.cssselector=h.message});a.validator.unobtrusive.adapters.add("directdebitfield",["regexnl","regexes","regexat","regexde"],function(h){h.rules.jqdirectdebitfield=h.params;h.messages.jqdirectdebitfield=h.message});a.validator.unobtrusive.adapters.add("acceptopt",["extopt","ignore"],function(h){h.rules.acceptopt=h.params;h.messages.acceptopt=h.message});a.validator.unobtrusive.adapters.add("requiredbyswitch",["switchfieldname"],function(i){var j=c(i.element.name),h=b(i.params.switchfieldname,j);i.rules.requiredbyswitch={fullSwitchFieldName:h};i.messages.requiredbyswitch=i.message})})(jQuery);(function(a){a.fn.updateValidation=function(){var b=this.closest("form").first().removeData("validator").removeData("unobtrusiveValidation");a.validator.unobtrusive.parse("#"+b.attr("id"));return this}})(jQuery);Fonts.PurchaseSubscription=(function(a){var h={};var j={};var g={CreditCardSubscription:"",PayPalSubscription:""};var f=false;h.SetTaxChangedMessage=function(m){j.TaxChangedMessage=m};h.SetPaymentTypes=function(m,n){g.CreditCardSubscription=m;g.PayPalSubscription=n};function l(){var o=new UserMessages(jQuery,"cart-billing-user-messages");o.clearAll();var m=a("input, select","#billing-information-section").valid();var n=a(".accord-bar","#billing-information-section").hasClass("collapse");if(!m&&n){Fonts.UI.accordBarExpandCollapseHandling(a(".accord-bar","#billing-information-section"))}return m}function c(){var m=a(".payment-pathway","#purchase-subscription-details");if(m.length!==0){m.click(function(){Fonts.UI.accordBarNavigateHandling(this,function(){a("html, body").animate({scrollTop:a("#billing-information-section").offset().top},500)})})}}function d(){var m=a("#purchase-subscription-billing-information-submit");if(m.length!==0){m.click(function(){if(l()){Fonts.UI.accordBarNavigateHandling(this,function(){a("html, body").animate({scrollTop:a("#payment-information-section").offset().top},500)})}})}}function k(m){if(m.Success&&m.Success==true){a(".total-amount").html(m.TotalAmount);a(".cart-tax").html(m.TaxAmount);a(".cart-tax-hidden").val(m.TaxAmount);a(".cart-discount").html(m.DiscountAmount)}}h.calculateTaxVatOptional=function(){var n="BillingInformationViewModel_";var m=n+"CustomerAddressViewModel_";if(a("#"+m+"Address1").val().length===0||a("#"+m+"City").val().length===0||a("#"+m+"CountryCode").val().length===0||(a("#"+m+"CountryCode").val()==="US"&&(a("#"+m+"StateCode").length===0||a("#"+m+"StateCode").val().length===0))||a("#"+m+"PostalCode").val().length===0){return}var o=a("#payment-information-form");Fonts.Messages.clearAll();a.ajax({type:"POST",url:Fonts.Urls.getCalculateTaxVatOptional(),data:o.serialize(),dataType:"json",success:function(p){k(p);if(p.TaxChanged&&p.TaxChanged==true){Fonts.Messages.addCaution(j.TaxChangedMessage);a("html").scrollTop(0);a("#purchase-subscription-details .cart-details-bar.collapse").click();a("#payment-information-section .payment-information-bar.collapse").click()}},global:false,error:function(){}})};function b(){Fonts.Messages.clearAll();var m=a("#payment-information-form");if(a("#coupon").val()){a("#purchase-subscription-details").showLoading();a.ajax({type:"POST",url:Fonts.Urls.getApplyPromotionCodeToCart(),data:m.serialize(),dataType:"json",success:function(n){k(n);if(n.Success&&n.Success==true){Fonts.Messages.addSuccess(n.Message);a("#coupon").val("")}else{Fonts.Messages.addError(n.Message)}},complete:function(){a("#purchase-subscription-details").hideLoading()}})}}function i(){if(f===false){f=true;var n=a("#ps-credit-card-payment-submit");if(n.length!==0){n.val(Fonts.Translations.pleaseWaitButton);n.addClass("input-appr")}var o=a("#ps-paypal-payment-submit");if(o.length!==0){o.val(Fonts.Translations.pleaseWaitButton);o.addClass("input-appr")}var m=a("#purchase-free-subscription");if(m.length!==0){m.val(Fonts.Translations.pleaseWaitButton);m.addClass("input-appr")}a("#payment-information-form")[0].submit()}}h.RefreshCartInformation=function(){Cart.RefreshCartItemInformation();Cart.RefreshCartPageSummary()};function e(){a("#apply-promotion-to-subscription").click(function(){b()});a("#purchase-free-subscription").click(function(m){if(l()){i()}m.preventDefault()});a("#ps-credit-card-payment-submit").click(function(m){if(l()&&a("input","#payment-information-section").valid()){i()}m.preventDefault()});a("#ps-paypal-payment-submit").click(function(m){if(l()){i()}m.preventDefault()});a("ul.sort.ps-payment-information-tabs li").click(function(n){var m=a(this).find("a").attr("href");if(m=="#credit-card"){a("#ps-credit-card-payment-submit").show();a("#ps-paypal-payment-submit").hide();a('input[name$="PaymentType"]').val(g.CreditCardSubscription)}if(m=="#paypal"){a("#ps-credit-card-payment-submit").hide();a("#ps-paypal-payment-submit").show();a('input[name$="PaymentType"]').val(g.PayPalSubscription)}n.preventDefault()})}a(document).ready(function(){c();d();e()});return h}(jQuery));Fonts.Fileuploader=(function(a){var c={};var b="";c.clickToSelectFileMessage=function(d){b=d};c.CreateFileUploader=function(f,l,d,j,i,k){var e=a("#"+f);var g=a("input[data-fileupload=file]",e);var h=new AjaxUpload(e,{autoSubmit:d,action:l,responseType:k,name:a(g).attr("name"),onChange:function(n,m){a(g).val(n)},onSubmit:function(n,m){this.disable();if(typeof j==="function"){j()}},onComplete:function(m,n){this.enable();Fonts.Fileuploader.ClearFileField(g);if(typeof i==="function"){i(n)}}});return h};c.SetFileUploader=function(g,k,d,i,h,j){var f=a("input[data-fileupload=file]",g);var e=a("div[data-fileupload=browse]",g);c.fileupload=new AjaxUpload(e,{autoSubmit:d,action:k,responseType:j,name:a(f).attr("name"),onChange:function(m,l){a(f).val(m)},onSubmit:function(m,l){this.disable();c.fileupload.setData(c.SetData(g));if(typeof i==="function"){i()}},onComplete:function(l,m){this.enable();c.ClearFileField(f);if(typeof h==="function"){h(m)}else{a(".messages-container",g).html(m);c.ClearForm(g)}}});c.ClearFileField(f);g.submit(function(l){if(g.valid()){c.fileupload.submit()}l.preventDefault();return false})};c.SetData=function(d){var e=d.serializeArray();var f={};a.each(e,function(){if(f[this.name]!==undefined){if(!f[this.name].push){f[this.name]=[f[this.name]]}f[this.name].push(this.value||"")}else{f[this.name]=this.value||""}});return f};c.ClearForm=function(e){a("input[type=text]",e).val("");a("textarea",e).val("");var d=a("input[data-fileupload=file]",e);c.ClearFileField(d)};c.ClearMessagesContainer=function(d){a(".messages-container",d).html("")};c.ClearFileField=function(d){a(d).val(b)};c.FileSelected=function(d){var e=a(d).val();return e!=null&&e!=b};return c}(jQuery));Fonts.Contacts=(function(a){var b={};b.NeedSupportSubmitSuccess=function(c){if(c.Success){Header.ClearFields("#need-support-form");Fonts.UI.ShowAndRemove({container:".need-support-request-messages",data:c.Messages})}};b.SalesQuoteSubmitSuccess=function(c){b.showAndRemoveMessage(c,".sales-quote-form .messages-container")};b.LibraryInformationRequestSubmitSuccess=function(c){b.showAndRemoveMessage(c,".library-information-request-form .messages-container")};b.SiteCommentsSubmitSuccess=function(c){b.showAndRemoveMessage(c,".site-comments-form .messages-container")};b.showAndRemoveMessage=function(d,c){var e={container:c,data:d.Message,removeAfter:2000};if(!d.Success){e.removeAfter=-1}Fonts.UI.ShowAndRemove(e)};b.ShowStatesInRequestForm=function(){var c=a("#Country");var d=function(e){if(a(e).val()!="US"){a("#state-list").hide()}else{a("#state-list").show()}};d(c);c.change(function(){d(a(this))})};return b}(jQuery));Fonts.Spinner=(function(a){var b={};var c=0;var d;var e=20;b.enableSpinners=function(){var f=b.countActiveSpinners();if(f>0){window.clearInterval(d);d=window.setInterval(function(){b.spinSpinner()},100)}};b.disableSpinners=function(){var f=b.countActiveSpinners();if(f==0){window.clearInterval(d)}};b.spinSpinner=function(){var f=c*e;if(f!==0){f=f*-1}a(".loading-indicator").css("background-position",f+"px 0");a(".loading-indicator-inverse").css("background-position",f+"px 20px");if(c==11){c=0}c++};b.countActiveSpinners=function(){var f=a(".loading-indicator-inverse:visible").length;if(typeof f=="undefined"){f=0}return f+a(".loading-indicator").length};b.showSpinner=function(f){a(f).show();b.enableSpinners()};b.hideSpinner=function(f){a(f).hide();b.disableSpinners()};return b}(jQuery));Fonts.Dropdowns=(function(){var c={},a=null,b=null;c.AttachAllDropdowns=function(d){Fonts.Dropdowns.AttachDropdown({container:d,dropdown:".account-wishlist-dropdown",close:".account-wishlist-close",callback:function(e){e.find(".send-wishlist-email").hide();e.find(".delete-wishlist").show();e.find('[id ^= "delete-wish-list"]').attr("checked",true);e.find("#SendToEmailAddress").val("")}});Fonts.Dropdowns.AttachDropdown({container:d,dropdown:".add-to-wishlist-dropdown",close:".add-to-wishlist-close",callback:function(e){e.find(".wish-list-drop-down-list").children(":selected").removeAttr("selected");e.find(".wish-list-drop-down-list").children(":first").attr("selected","selected");e.find(".sbSelector").text(e.find(".wish-list-drop-down-list").children(":selected").text());e.find(".new-wishlist-name").val("")}});Fonts.Dropdowns.AttachDropdown({container:d,dropdown:".add-to-web-fonts",close:".add-to-web-fonts-close",callback:function(e){e.find(".web-fonts-drop-down-list").children(":selected").removeAttr("selected");e.find(".web-fonts-drop-down-list").children(":nth-child(2)").attr("selected","selected");e.find(".sbSelector[id $= "+e.find(".web-fonts-drop-down-list").attr("sb")+"]").text(e.find(".web-fonts-drop-down-list").children(":selected").text());e.find(".add-to-project-font-selector").children(":selected").removeAttr("selected");e.find(".add-to-project-font-selector").children(":nth-child(1)").attr("selected","selected");e.find(".sbSelector[id $= "+$(".add-to-project-font-selector").attr("sb")+"]").text(e.find(".add-to-project-font-selector").children(":selected").text());e.find(".new-webfontsproject-name").val("").hide()}});Fonts.Dropdowns.AttachDropdown({container:d,dropdown:".cart-options-dropdown",close:".cart-options-close",callback:function(e){e.find(".cart-option-wish-list").show();e.find(".cart-option-quote").hide();e.find(".cart-option-delete").hide();e.find("#cart-option-add-to-wish-list").attr("checked","checked");e.find(".wish-list-drop-down-list").children(":selected").removeAttr("selected");e.find(".wish-list-drop-down-list").children(":first").attr("selected","selected");e.find(".sbSelector").text(e.find(".wish-list-drop-down-list").children(":selected").text());e.find(".new-wishlist-name").val("")}});Fonts.Dropdowns.AttachDropdown({container:d,dropdown:".sign-in-dropdown",close:".sign-in-close",callback:function(e){e.find('[id $= "signin-user-name"]').val("");e.find('[id $= "signin-password"]').val("");e.find('[id $= "reset-password-email"]').val("");e.find('[id $= "signin-remember-me"]').removeAttr("checked")}});Fonts.Dropdowns.AttachDropdown({container:d,dropdown:".simple-dropdown",close:".simple-close",callback:null})};c.AttachDropdown=function(g){var f=function(j,h){var i=a.closest(".with-dropdown");(h==null)?i.find(".dropdown").fadeOut("fast"):i.find(".dropdown").fadeOut("fast",function(){h(i)});j.parentsUntil(".with-dropdown").removeClass("active");j.parents(".with-dropdown").removeClass("active");a=null;b=null},d=g.container,e=d.find(".with-dropdown "+g.dropdown);e.closest(".with-dropdown").children(".trigger").click(function(h){var i=$(this).parentsUntil(".list-add"),j=$(this);i.siblings(".with-dropdown").removeClass("active");i.siblings().children(".dropdown").fadeOut("fast");if(j.parent().hasClass("active")){f(a,g.callback)}else{if(a!=null){f(a,b)}j.parent().addClass("active");$(".dropdown",j.parent()).fadeIn("fast");a=j;b=g.callback}h.preventDefault()});d.find(".dropdown .close"+g.close+", .dropdown-close"+g.close).click(function(){f($(this).parents(".with-dropdown").find(".trigger"),g.callback)});$.each(d.find('form[data-ajax="true"] input.ajaxforce'),function(i,h){if(!h.IsAjaxButtonClickBound){$(h).click(function(j){j.preventDefault();var k=$(this).closest("form");if(k.valid()){k.submit()}});h.IsAjaxButtonClickBound=true}});d.find(".list-add, .pricing .with-dropdown, .page-header .with-dropdown").click(function(h){h.stopPropagation()});if($.browser.msie&&parseInt($.browser.version,10)<8){d.find(".with-dropdown .trigger").click(function(){d.find(".font-results li").css("z-index","0");$(this).parents("li").eq(0).siblings().css("z-index","-1");$(this).closest(".font-results-parent").siblings("ul").children("li").css("z-index","-1")})}if($.browser.msie&&parseInt($.browser.version,10)<8){d.find(".order-details .sbHolder").click(function(){d.find(".font-results li").css("z-index","0");$(this).parents("li").eq(0).siblings().css("z-index","-1");$(this).closest(".font-results-parent").siblings("ul").children("li").css("z-index","-1")})}};c.AttachHtmlClick=function(){$("html").click(function(){$("select[sb]").selectbox("close");$(".dropdown").hide();$(".with-dropdown").removeClass("active")})};return c}(jQuery));Fonts.PrivateFonts=(function(a){var b={};b.OnWebFontsPrivateFontsPopup=function(f){var d=a(f),c=d.find("section.modal"),e=d.find("#fonts-face-declaration");if(c.length===0){c=d}if(e.length){a('head style[id^="webfont-style"]').remove();Fonts.WebFonts.addWebfontCss(e.html());e.remove()}c.lightbox_me({onLoad:function(){Fonts.WebFontManager.StartWebFontsListener(c);Fonts.Dropdowns.AttachAllDropdowns(c);Fonts.UI.AttachAddToWebFontDropDownsEvents(c);a("button.trigger",c).click(function(h){var g=a(this).siblings(".dropdown");if(g.length==1&&g.parent(".active").length==1){var i=a(".web-private-fonts .font-results");var j=g.offset().top-i.offset().top;if(j+g.outerHeight()>i.height()){g[0].scrollIntoView(false)}}});a(".sbHolder .sbToggle, .sbHolder .sbSelector",c).click(function(h){var g=a(this).siblings(".sbOptions");if(g.length==1&&g.siblings(".sbToggleOpen").length==1){var i=a(".web-private-fonts .font-results");var j=g.offset().top-i.offset().top;if(j+g.outerHeight()>i.height()){g[0].scrollIntoView(false)}}})},onClose:function(){if(c.find("#hasChanges").val()==="1"){document.location.reload()}},destroyOnClose:true})};b.OnWebFontAddedToProject=function(g){if(g){var e=UserMessages(jQuery,"web-fonts-wish-list-messages"),c=a(".web-fonts-wish-list .font[data-font-id="+g.FontId+"]").find("h3").text(),f=a(".web-fonts-wish-list select option[value='"+g.ProjectId+"']").first().text(),d=a.format(g.Message,c,f);Fonts.UI.updateWebFontProjectDropDowns(g);if(g.Success){a(".web-fonts-wish-list").find("#hasChanges").val("1");e.singleSuccess(d)}else{e.singleError(d)}}};b.OnCreateProjectWithWebFont=function(g){if(g){var e=UserMessages(jQuery,"web-fonts-wish-list-messages");var c=a(".web-fonts-wish-list .font[data-font-id="+g.FontId+"]").find("h3").text();var f=g.ProjectName;var d=a.format(g.Message,c,f);if(g.Success){a(".web-fonts-wish-list").find("#hasChanges").val("1");e.singleSuccess(d)}else{e.singleError(d)}}};return b}(jQuery));(function(a){var b=function(){var y={},z,e=65,S,O='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',g={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:true,flat:false},n=function(U,T){var V=x(U);a(T).data("colorpicker").fields.eq(1).val(V.r).end().eq(2).val(V.g).end().eq(3).val(V.b).end()},m=function(U,T){a(T).data("colorpicker").fields.eq(4).val(U.h).end().eq(5).val(U.s).end().eq(6).val(U.b).end()},l=function(U,T){a(T).data("colorpicker").fields.eq(0).val(w(U)).end()},M=function(U,T){a(T).data("colorpicker").selector.css("backgroundColor","#"+w({h:U.h,s:100,b:100}));a(T).data("colorpicker").selectorIndic.css({left:parseInt(150*U.s/100,10),top:parseInt(150*(100-U.b)/100,10)})},K=function(U,T){a(T).data("colorpicker").hue.css("top",parseInt(150-150*U.h/360,10))},J=function(U,T){a(T).data("colorpicker").currentColor.css("backgroundColor","#"+w(U))},L=function(U,T){a(T).data("colorpicker").newColor.css("backgroundColor","#"+w(U))},B=function(U){var V=U.charCode||U.keyCode||-1;if((V>e&&V<=90)||V==32){return false}var T=a(this).parent().parent();if(T.data("colorpicker").livePreview===true){d.apply(this)}},d=function(V){var T=a(this).parent().parent(),U;if(this.parentNode.className.indexOf("_hex")>0){T.data("colorpicker").color=U=t(o(this.value))}else{if(this.parentNode.className.indexOf("_hsb")>0){T.data("colorpicker").color=U=p({h:parseInt(T.data("colorpicker").fields.eq(4).val(),10),s:parseInt(T.data("colorpicker").fields.eq(5).val(),10),b:parseInt(T.data("colorpicker").fields.eq(6).val(),10)})}else{T.data("colorpicker").color=U=I(q({r:parseInt(T.data("colorpicker").fields.eq(1).val(),10),g:parseInt(T.data("colorpicker").fields.eq(2).val(),10),b:parseInt(T.data("colorpicker").fields.eq(3).val(),10)}))}}if(V){n(U,T.get(0));l(U,T.get(0));m(U,T.get(0))}M(U,T.get(0));K(U,T.get(0));L(U,T.get(0));T.data("colorpicker").onChange.apply(T,[U,w(U),x(U)])},c=function(U){var T=a(this).parent().parent();T.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},r=function(){e=this.parentNode.className.indexOf("_hex")>0?70:65;a(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");a(this).parent().addClass("colorpicker_focus")},i=function(U){var V=a(this).parent().find("input").focus();var T={el:a(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:(this.parentNode.className.indexOf("_hsb")>0?100:255),y:U.pageY,field:V,val:parseInt(V.val(),10),preview:a(this).parent().parent().data("colorpicker").livePreview};a(document).bind("mouseup",T,Q);a(document).bind("mousemove",T,E)},E=function(T){T.data.field.val(Math.max(0,Math.min(T.data.max,parseInt(T.data.val+T.pageY-T.data.y,10))));if(T.data.preview){d.apply(T.data.field.get(0),[true])}return false},Q=function(T){d.apply(T.data.field.get(0),[true]);T.data.el.removeClass("colorpicker_slider").find("input").focus();a(document).unbind("mouseup",Q);a(document).unbind("mousemove",E);return false},h=function(U){var T={cal:a(this).parent(),y:a(this).offset().top};T.preview=T.cal.data("colorpicker").livePreview;a(document).bind("mouseup",T,P);a(document).bind("mousemove",T,D)},D=function(T){d.apply(T.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,(T.pageY-T.data.y))))/150,10)).get(0),[T.data.preview]);return false},P=function(T){n(T.data.cal.data("colorpicker").color,T.data.cal.get(0));l(T.data.cal.data("colorpicker").color,T.data.cal.get(0));a(document).unbind("mouseup",P);a(document).unbind("mousemove",D);return false},j=function(U){var T={cal:a(this).parent(),pos:a(this).offset()};T.preview=T.cal.data("colorpicker").livePreview;a(document).bind("mouseup",T,R);a(document).bind("mousemove",T,F)},F=function(T){d.apply(T.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,(T.pageY-T.data.pos.top))))/150,10)).end().eq(5).val(parseInt(100*(Math.max(0,Math.min(150,(T.pageX-T.data.pos.left))))/150,10)).get(0),[T.data.preview]);return false},R=function(T){F(T);n(T.data.cal.data("colorpicker").color,T.data.cal.get(0));l(T.data.cal.data("colorpicker").color,T.data.cal.get(0));a(document).unbind("mouseup",R);a(document).unbind("mousemove",F);return false},k=function(T){a(this).addClass("colorpicker_focus")},C=function(T){a(this).removeClass("colorpicker_focus")},f=function(V){var T=a(this).parent();var U=T.data("colorpicker").color;T.data("colorpicker").origColor=U;J(U,T.get(0));T.data("colorpicker").onSubmit(U,w(U),x(U),T.data("colorpicker").el)},N=function(U){var T=a("#"+a(this).data("colorpickerId"));T.data("colorpicker").onBeforeShow.apply(this,[T.get(0)]);var W=a(this).offset();var Y=s();var X=W.top+this.offsetHeight;var V=W.left;if(X+176>Y.t+Y.h){X-=this.offsetHeight+176}if(V+356>Y.l+Y.w){V-=356}T.css({left:V+"px",top:X+"px"});if(T.data("colorpicker").onShow.apply(this,[T.get(0)])!=false){T.show()}a(document).bind("mousedown",{cal:T},v);return false},v=function(T){if(!A(T.data.cal.get(0),T.target,T.data.cal.get(0))){if(T.data.cal.data("colorpicker").onHide.apply(this,[T.data.cal.get(0)])!=false){T.data.cal.hide()}a(document).unbind("mousedown",v)}},A=function(V,U,T){if(V==U){return true}if(V.contains){return V.contains(U)}if(V.compareDocumentPosition){return !!(V.compareDocumentPosition(U)&16)}var W=U.parentNode;while(W&&W!=T){if(W==V){return true}W=W.parentNode}return false},s=function(){var T=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(T?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(T?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(T?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(T?document.documentElement.clientHeight:document.body.clientHeight)}},p=function(T){return{h:Math.min(360,Math.max(0,T.h)),s:Math.min(100,Math.max(0,T.s)),b:Math.min(100,Math.max(0,T.b))}},q=function(T){return{r:Math.min(255,Math.max(0,T.r)),g:Math.min(255,Math.max(0,T.g)),b:Math.min(255,Math.max(0,T.b))}},o=function(T){var V=6-T.length;if(V>0){var W=[];for(var U=0;U<V;U++){W.push("0")}W.push(T);T=W.join("")}return T},u=function(T){var T=parseInt(((T.indexOf("#")>-1)?T.substring(1):T),16);return{r:T>>16,g:(T&65280)>>8,b:(T&255)}},t=function(T){return I(u(T))},I=function(X){var U={h:0,s:0,b:0};var W=Math.min(X.r,X.g,X.b);var V=Math.max(X.r,X.g,X.b);var T=V-W;U.b=V;if(V!=0){}U.s=V!=0?255*T/V:0;if(U.s!=0){if(X.r==V){U.h=(X.g-X.b)/T}else{if(X.g==V){U.h=2+(X.b-X.r)/T}else{U.h=4+(X.r-X.g)/T}}}else{U.h=-1}U.h*=60;if(U.h<0){U.h+=360}U.s*=100/255;U.b*=100/255;return U},x=function(U){var V={};var T=Math.round(U.h);var W=Math.round(U.s*255/100);var aa=Math.round(U.b*255/100);if(W==0){V.r=V.g=V.b=aa}else{var X=aa;var Y=(255-W)*aa/255;var Z=(X-Y)*(T%60)/60;if(T==360){T=0}if(T<60){V.r=X;V.b=Y;V.g=Y+Z}else{if(T<120){V.g=X;V.b=Y;V.r=X-Z}else{if(T<180){V.g=X;V.r=Y;V.b=Y+Z}else{if(T<240){V.b=X;V.r=Y;V.g=X-Z}else{if(T<300){V.b=X;V.g=Y;V.r=Y+Z}else{if(T<360){V.r=X;V.g=Y;V.b=X-Z}else{V.r=0;V.g=0;V.b=0}}}}}}}return{r:Math.round(V.r),g:Math.round(V.g),b:Math.round(V.b)}},H=function(U){var T=[U.r.toString(16),U.g.toString(16),U.b.toString(16)];a.each(T,function(V,W){if(W.length==1){T[V]="0"+W}});return T.join("")},w=function(T){return H(x(T))},G=function(){var T=a(this).parent();var U=T.data("colorpicker").origColor;T.data("colorpicker").color=U;n(U,T.get(0));l(U,T.get(0));m(U,T.get(0));M(U,T.get(0));K(U,T.get(0));L(U,T.get(0))};return{init:function(T){T=a.extend({},g,T||{});if(typeof T.color=="string"){T.color=t(T.color)}else{if(T.color.r!=undefined&&T.color.g!=undefined&&T.color.b!=undefined){T.color=I(T.color)}else{if(T.color.h!=undefined&&T.color.s!=undefined&&T.color.b!=undefined){T.color=p(T.color)}else{return this}}}return this.each(function(){if(!a(this).data("colorpickerId")){var W=a.extend({},T);W.origColor=T.color;var V="collorpicker_"+parseInt(Math.random()*1000);a(this).data("colorpickerId",V);var U=a(O).attr("id",V);if(W.flat){U.appendTo(this).show()}else{U.appendTo(document.body)}W.fields=U.find("input").bind("keyup",B).bind("change",d).bind("blur",c).bind("focus",r);U.find("span").bind("mousedown",i).end().find(">div.colorpicker_current_color").bind("click",G);W.selector=U.find("div.colorpicker_color").bind("mousedown",j);W.selectorIndic=W.selector.find("div div");W.el=this;W.hue=U.find("div.colorpicker_hue div");U.find("div.colorpicker_hue").bind("mousedown",h);W.newColor=U.find("div.colorpicker_new_color");W.currentColor=U.find("div.colorpicker_current_color");U.data("colorpicker",W);U.find("div.colorpicker_submit").bind("mouseenter",k).bind("mouseleave",C).bind("click",f);n(W.color,U.get(0));m(W.color,U.get(0));l(W.color,U.get(0));K(W.color,U.get(0));M(W.color,U.get(0));J(W.color,U.get(0));L(W.color,U.get(0));if(W.flat){U.css({position:"relative",display:"block"})}else{a(this).bind(W.eventName,N)}}})},showPicker:function(){return this.each(function(){if(a(this).data("colorpickerId")){N.apply(this)}})},hidePicker:function(){return this.each(function(){if(a(this).data("colorpickerId")){a("#"+a(this).data("colorpickerId")).hide()}})},setColor:function(T){if(typeof T=="string"){T=t(T)}else{if(T.r!=undefined&&T.g!=undefined&&T.b!=undefined){T=I(T)}else{if(T.h!=undefined&&T.s!=undefined&&T.b!=undefined){T=p(T)}else{return this}}}return this.each(function(){if(a(this).data("colorpickerId")){var U=a("#"+a(this).data("colorpickerId"));U.data("colorpicker").color=T;U.data("colorpicker").origColor=T;n(T,U.get(0));m(T,U.get(0));l(T,U.get(0));K(T,U.get(0));M(T,U.get(0));J(T,U.get(0));L(T,U.get(0))}})}}}();a.fn.extend({ColorPicker:b.init,ColorPickerHide:b.hidePicker,ColorPickerShow:b.showPicker,ColorPickerSetColor:b.setColor})})(jQuery);$(function(){BindTextPopperHover($(".textpopper"));FontPreview.BindEvents();$(".badge img").mouseover(function(){var d=$(this).attr("src");$(this).attr("src",d.replace("/g/","/c/"))}).mouseout(function(){var d=$(this).attr("src").replace("/c/","/g/");$(this).attr("src",d)});$("li.switch-a").click(function(d){$("div.switch-a").show();$("div.switch-b").hide();$(this).children().addClass("active");$("li.switch-b a").removeClass("active");d.preventDefault()});$("li.switch-b").click(function(d){$("div.switch-b").show();$("div.switch-a").hide();$(this).children().addClass("active");$("li.switch-a a").removeClass("active");d.preventDefault()});$(".accord-bar").click(function(d){Fonts.UI.accordBarExpandCollapseHandling(this);d.preventDefault()});$(".accord-bar.collapse").append("<span>Open</span>");$(".accord-bar.collapse").next(".pairing").css("display","none");$(".accord-bar:not(.collapse)").append("<span>Close</span>");$(".cart .accord-group").each(function(){var d=$(this).parent();if($(this).hasClass("expand-init")){return}if(!d.hasClass("accord-group-init")&&!d.hasClass("accord-group-container")){d.addClass("accord-group-init")}else{$(this).find(".accord-bar").trigger("click")}});$(".trigger-tutorial").click(function(d){$(".tutorial-wrap").stop().slideToggle("fast");$(".close-tutorial").show();$(".trigger-tutorial").hide();d.preventDefault()});$(".close-tutorial").click(function(d){$(".tutorial-wrap").stop().slideToggle("fast");$(".close-tutorial").hide();$(".trigger-tutorial").show();try{$f().stop()}catch(f){}d.preventDefault()});Fonts.UI.tabSortSwitcher($("ul.tabs li, ul.sort li").not($("#search-tabs li")));var c=0;var b=[];$(".carousel-content li").each(function(d){b[d]=c;c+=$(this).width();if(!$(this).width()){alert("Please, fill in width & height for all your images!");return false}});$(".carousel .carousel-content").width(c);$(".carousel-controls a").click(function(d){$(".carousel-controls li").removeClass("active");$(this).parent().addClass("active");var f=$(this).parent().prevAll(".carousel-controls li").length;if(b.length>f){$(".carousel .carousel-content").stop().animate({marginLeft:-b[f]+"px"},450)}d.preventDefault()});$(".controls li:first").addClass("active");Fonts.Dropdowns.AttachAllDropdowns($("body"));Fonts.Dropdowns.AttachHtmlClick();function a(n,f){var p=f.length-1;var j;var o;var d;var e;for(j=p;j>=0;j--){if(n>=j/p){o=(n-j/p)/(1/p);d=f[j];e=f[j+1];break}}if(!e){return d}var i=e[0]-d[0];var m=d[0]+Math.floor(i*o);var h=e[1]-d[1];var l=d[1]+Math.floor(h*o);var g=e[2]-d[2];var k=d[2]+Math.floor(g*o);return[m,l,k]}$(".rating-bar").slider({from:1,to:10,step:0.1,round:1,dimension:"",limits:false,skin:"plastic",onstatechange:function(f){var e=this.getPrcValue()/100;if(e>100){e=100}var d=a(e,[[255,2,2],[251,255,2],[5,255,4]]);$(this.domNode).find(".jslider-value").css("background-color","rgb("+d[0]+","+d[1]+","+d[2]+")");$(this.domNode).find(".jslider-arrow").css("border-top-color","rgb("+d[0]+","+d[1]+","+d[2]+")")}});$("#searchwhere-1").selectbox();$("#Subject").selectbox({effect:"hide"});Cart.BindCartOptionsDeleteEvent();(function(d){var e={init:function(f){var g={container:"body",topAdjust:0,bottomAdjust:0};return this.each(function(){if(f){d.extend(g,f)}d(this).data("sfContainer",d(this).parents(g.container).eq(0));d(this).data("sfTopAdjust",g.topAdjust);d(this).data("sfBottomAdjust",g.bottomAdjust);d(this).addClass("sfElement");d(window).scroll(e.update);d(window).resize(e.resize);e.monitor(d(this).parents(g.container).eq(0))})},monitor:function(g){if(d(g).css("position")!=="absolute"){d(g).css("position","relative")}var f=d(document.createElement("iframe"));f.css({position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%","z-index":-1,border:"none",background:"#fff",visibility:"hidden"});d(g).append(f)},update:function(){var f=d(window).scrollTop();d(".sfElement").each(function(){var h=d(this);var o=h.outerHeight(true);var g=h.data("sfContainer");var l=g.outerHeight(true);var r=h.data("sfTopAdjust");var i=h.data("sfBottomAdjust");var p=g.offset().top;p-=r;var m=p+l-o;m-=i;var n=m-h.parent().offset().top;n+=r;var q="auto";var j=d(".cms-nav");if(j.length>0){var k=j.parents(".wrap").width();var s=j.width()-(j.parents(".content").width()-k)/2;if(s>0){q="5px"}if(s==j.width()){q=d(window).width()-k+d(window).scrollLeft()+5+"px"}}if(f>p&&f<m){h.css({position:"fixed",top:r,left:"auto",right:q,width:h.width()})}else{if(f>m){h.css({position:"absolute",top:n,left:"auto",right:q,width:h.width()})}else{h.css({position:"",top:"",left:"",right:"",width:""})}}})},resize:function(){var f=d(".cms-nav");if(f.length>0){var g=f.parents(".wrap").width();var h=f.width()-(f.parents(".content").width()-g)/2;if(h>0){f.css("left",g-h)}else{f.css("left",g+20);f.find(".sfElement").css("right","")}}}};d.fn.scrollFollow=function(f){if(e[f]){return e[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="object"||!f){return e.init.apply(this,arguments)}else{d.error("Method "+f+" does not exist on jQuery.scrollFollow")}}};d(".scrollfollow-wrap div").scrollFollow({container:".wrap",topAdjust:30,bottomAdjust:96});d(document).ready(function(){d(".cms-nav").scrollFollow("resize")});d(".resetable-sing-in-block .trigger, .resetable-sing-in-block .sign-in").click(function(){Fonts.Account.RestoreMemberSigninForm()});Fonts.Account.AttachEventsToNeedSupportForm();Fonts.Account.AttachEventsToMemberSignin();Cart.AttachEventsToApplyCouponCode();Cart.AttachEventsToPaymentTypeSelection();Cart.BindLicenseQuantityEvents();Cart.BindCartItemFormatEvent();d(".need-support-product-type").selectbox({onChange:function(g,f){f.input.valid()}});Fonts.Account.HandleSigninAfterLoad();Fonts.CartSummary.AttachCartOptionsDropDown();Fonts.Account.AttachWishlistOptionDropDown()}(jQuery))});var FytiMenu=(function(a){var b={};var e=false;var d={};var c={};b.ToggleMenu=function(){if(e===false){a(".more-items").show();a("#show-more-items").html(" - "+c);e=true}else{a(".more-items").hide();a("#show-more-items").html(" - "+d);e=false}};b.SetTranslations=function(g,f){d=g;c=f};b.ShowMore=function(f){e=f};return b}(jQuery));var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());/*
 * Infinite Ajax Scroll, a jQuery plugin
 * Version v0.1.6
 * http://webcreate.nl/
 *
 * Copyright (c) 2011-2012 Jeroen Fiege
 * Licensed under the MIT License:
 * http://webcreate.nl/license
 */
(function(a){var d,f,e,c;a.ias=function(n){var g=this;if(n.refresh){q()}else{d=a.extend({},a.ias.defaults,n);f=new a.ias.util();e=(d.paging?new a.ias.paging(d.scrollContainer):false);c=(d.history?new a.ias.history():false);l()}function q(){t();if(e){e.reloadCurrentPage()}}function l(){if(e){e.onChangePage(function(w,y,x){if(c){c.setPage(w,x)}d.onPageChange.call(this,w,x,y)})}s();if(c&&c.havePage()){v();pageNum=c.getPage();f.forceScrollTop(function(){if(pageNum>1){p(pageNum);curTreshold=j(true);a("html,body").scrollTop(curTreshold)}else{s()}})}return g}function s(){k();d.scrollContainer.scroll(t)}function t(){if(d.scrollContainer==a.ias.defaults.scrollContainer){scrTop=d.scrollContainer.scrollTop()}else{scrTop=d.scrollContainer.offset().top}wndHeight=d.scrollContainer.height();curScrOffset=scrTop+wndHeight;if(curScrOffset>=j()){o(curScrOffset)}}function v(){d.scrollContainer.unbind("scroll",t)}function k(){a(d.pagination).hide()}function j(w){el=a(d.container).find(d.item).last();if(el.size()==0){return 0}treshold=el.offset().top+el.height();if(!w){treshold+=d.tresholdMargin}return treshold}function o(w,x){urlNextPage=a(d.next).attr("href");if(!urlNextPage){return v()}if(d.beforePageChange&&a.isFunction(d.beforePageChange)){if(d.beforePageChange(w,urlNextPage)===false){return}}if(e){e.pushPages(w,urlNextPage)}v();u();m(urlNextPage,function(y,z){result=d.onLoadItems.call(this,z);if(result!==false){a(z).hide();curLastItem=a(d.container).find(d.item).last();curLastItem.after(z);a(z).fadeIn()}a(d.pagination).replaceWith(a(d.pagination,y));r();s();d.onRenderComplete.call(this,z);if(x){x.call(this)}})}function m(y,x){if(d.customLoadItems!==false){d.customLoadItems(y,x)}else{var w=[];a.get(y,null,function(z){container=a(d.container,z).eq(0);if(0==container.length){container=a(z).filter(d.container).eq(0)}if(container){container.find(d.item).each(function(){w.push(this)})}if(x){x.call(this,z,w)}},"html")}}function p(w){curTreshold=j(true);if(curTreshold>0){o(curTreshold,function(){v();if(e&&(e.getCurPageNum(curTreshold)+1)<w){p(w);a("html,body").animate({scrollTop:curTreshold},400,"swing")}else{a("html,body").animate({scrollTop:curTreshold},1000,"swing");s()}})}}function h(){loader=a(".ias_loader");if(loader.size()==0){loader=a("<div class='ias_loader'>"+d.loader+"</div>");loader.hide()}return loader}function u(){loader=h();if(d.customLoaderProc!==false){d.customLoaderProc(loader)}else{el=a(d.container).find(d.item).last();el.after(loader);loader.fadeIn()}}function r(){loader=h();loader.remove()}return g};function b(g){if(window.console&&window.console.log){window.console.log(g)}}a.ias.defaults={container:"#container",scrollContainer:a(window),item:".item",pagination:"#pagination",next:".next",loader:'<img src="images/loader.gif"/>',tresholdMargin:0,history:true,onPageChange:function(){},beforePageChange:function(){},onLoadItems:function(){},onRenderComplete:function(){},customLoaderProc:false,customLoadItems:false};a.ias.util=function(){var k=false;var g=false;var j=this;h();function h(){a(window).load(function(){k=true})}this.forceScrollTop=function(l){a("html,body").scrollTop(0);if(!g){if(!k){setTimeout(function(){j.forceScrollTop(l)},1)}else{l.call();g=true}}}};a.ias.paging=function(){var m=[[0,document.location.toString()]];var g=function(){};var l=1;k();function k(){a(window).scroll(n)}function n(){scrTop=a(window).scrollTop();wndHeight=a(window).height();curScrOffset=scrTop+wndHeight;curPageNum=j(curScrOffset);curPagebreak=h(curScrOffset);if(l!=curPageNum){g.call(this,curPageNum,curPagebreak[0],curPagebreak[1])}l=curPageNum}function j(o){for(i=(m.length-1);i>0;i--){if(o>m[i][0]){return i+1}}return 1}this.getCurPageNum=function(o){return j(o)};this.getCurPageNum=function(o){return j(o)};function h(o){for(i=(m.length-1);i>=0;i--){if(o>m[i][0]){return m[i]}}return null}this.onChangePage=function(o){g=o};this.pushPages=function(o,p){m.push([o,p])};this.reloadCurrentPage=function(){m.pop();l=l-1;n()}};a.ias.history=function(){var j=false;var h=false;g();function g(){h=!!(window.history&&history.pushState&&history.replaceState);h=false}this.setPage=function(k,l){this.updateState({page:k},"",l)};this.havePage=function(){return(this.getState()!=false)};this.getPage=function(){if(this.havePage()){stateObj=this.getState();return stateObj.page}return 1};this.getState=function(){if(h){stateObj=history.state;if(stateObj&&stateObj.ias){return stateObj.ias}}else{haveState=(window.location.hash.substring(0,7)=="#/page/");if(haveState){pageNum=parseInt(window.location.hash.replace("#/page/",""));return{page:pageNum}}}return false};this.updateState=function(k,l,m){if(j){this.replaceState(k,l,m)}else{this.pushState(k,l,m)}};this.pushState=function(k,l,m){if(h){history.pushState({ias:k},l,m)}else{hash=(k.page>0?"#/page/"+k.page:"");window.location.hash=hash}j=true};this.replaceState=function(k,l,m){if(h){history.replaceState({ias:k},l,m)}else{this.pushState(k,l,m)}}}})(jQuery);/*
jQuery Waypoints - v1.1.7
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
(function($,l,m,k,i){var a=$(k),d="waypoint.reached",h=function(o,n){o.element.trigger(d,n);if(o.options.triggerOnce){o.element[l]("destroy")}},j=function(o,n){if(!n){return -1}var p=n.waypoints.length-1;while(p>=0&&n.waypoints[p].element[0]!==o[0]){p-=1}return p},c=[],b=function(n){$.extend(this,{element:$(n),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:$.proxy(function(){var q=this.element.scrollTop(),o=q>this.oldScroll,s=this,r=$.grep(this.waypoints,function(t,u){return o?(t.offset>s.oldScroll&&t.offset<=q):(t.offset<=s.oldScroll&&t.offset>q)}),p=r.length;if(!this.oldScroll||!q){$[m]("refresh")}this.oldScroll=q;if(!p){return}if(!o){r.reverse()}$.each(r,function(t,u){if(u.options.continuous||t===p-1){h(u,[o?"down":"up"])}})},this)});$(n).bind("scroll.waypoints",$.proxy(function(){if(!this.didScroll){this.didScroll=true;k.setTimeout($.proxy(function(){this.doScroll();this.didScroll=false},this),$[m].settings.scrollThrottle)}},this)).bind("resize.waypoints",$.proxy(function(){if(!this.didResize){this.didResize=true;k.setTimeout($.proxy(function(){$[m]("refresh");this.didResize=false},this),$[m].settings.resizeThrottle)}},this));a.load($.proxy(function(){this.doScroll()},this))},e=function(n){var o=null;$.each(c,function(q,p){if(p.element[0]===n){o=p;return false}});return o},g={init:function(n,o){this.each(function(){var r=$.fn[l].defaults.context,s,p=$(this);if(o&&o.context){r=o.context}if(!$.isWindow(r)){r=p.closest(r)[0]}s=e(r);if(!s){s=new b(r);c.push(s)}var t=j(p,s),q=t<0?$.fn[l].defaults:s.waypoints[t].options,u=$.extend({},q,o);u.offset=u.offset==="bottom-in-view"?function(){var v=$.isWindow(r)?$[m]("viewportHeight"):$(r).height();return v-$(this).outerHeight()}:u.offset;if(t<0){s.waypoints.push({element:p,offset:null,options:u})}else{s.waypoints[t].options=u}if(n){p.bind(d,n)}if(o&&o.handler){p.bind(d,o.handler)}});$[m]("refresh");return this},remove:function(){return this.each(function(p,o){var n=$(o);$.each(c,function(r,q){var s=j(n,q);if(s>=0){q.waypoints.splice(s,1);if(!q.waypoints.length){q.element.unbind("scroll.waypoints resize.waypoints");c.splice(r,1)}}})})},destroy:function(){return this.unbind(d)[l]("remove")}},f={refresh:function(){$.each(c,function(r,n){var s=$.isWindow(n.element[0]),p=s?0:n.element.offset().top,o=s?$[m]("viewportHeight"):n.element.height(),q=s?0:n.element.scrollTop();$.each(n.waypoints,function(v,w){if(!w){return}var t=w.options.offset,x=w.offset;if(typeof w.options.offset==="function"){t=w.options.offset.apply(w.element)}else{if(typeof w.options.offset==="string"){var u=parseFloat(w.options.offset);t=w.options.offset.indexOf("%")?Math.ceil(o*(u/100)):u}}w.offset=w.element.offset().top-p+q-t;if(w.options.onlyOnScroll){return}if(x!==null&&n.oldScroll>x&&n.oldScroll<=w.offset){h(w,["up"])}else{if(x!==null&&n.oldScroll<x&&n.oldScroll>=w.offset){h(w,["down"])}else{if(!x&&n.element.scrollTop()>w.offset){h(w,["down"])}}}});n.waypoints.sort(function(t,u){return t.offset-u.offset})})},viewportHeight:function(){return(k.innerHeight?k.innerHeight:a.height())},aggregate:function(){var n=$();$.each(c,function(p,o){$.each(o.waypoints,function(r,q){n=n.add(q.element)})});return n}};$.fn[l]=function(n){if(g[n]){return g[n].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof n==="function"||!n){return g.init.apply(this,arguments)}else{if(typeof n==="object"){return g.init.apply(this,[null,n])}else{$.error("Method "+n+" does not exist on jQuery "+l)}}}};$.fn[l].defaults={continuous:true,offset:0,triggerOnce:false,context:k};$[m]=function(n){if(f[n]){return f[n].apply(this)}else{return f.aggregate()}};$[m].settings={resizeThrottle:200,scrollThrottle:100};a.load(function(){$[m]("refresh")})})(jQuery,"waypoint","waypoints",window);Fonts.Scrolling=(function(a){var w={};var s="product_",t="product_top",c="article_",d="article_top";var h,i;var p=".paging-next a",q=".pagination-wrap",z="ul#search-tabs",r="ul.font-results",u="li.font-results-item",v="h2 a.waypoint",b="ul.result-text",e="li",f="a.link-to-article";var g,n,A;if(a(r+" "+u).length>0){h=s;i=t;g=r;n=u;A=v}if(a(b+" "+e).length>0){h=c;i=d;g=b;n=e;A=f}function x(C){var B=a("#"+C);if(B.length==1){a(A).waypoint("remove");a(A).waypoint("destroy");a(z).waypoint("remove");a(z).waypoint("destroy");window.location.hash=C;window.location.hash=h+C;setTimeout(function(){m(a(document));l()},1000);y();a("body").hideLoading()}else{a("body").hideLoading();a("body").showLoading();a(q).hide();o(a(p).attr("href"),function(D,E){a(E).hide();var F=a(g).find(n).last();F.after(E);a(E).fadeIn();j(E,false);a(q).replaceWith(a(q,D));x(C)},function(){y();a("body").hideLoading()})}}function k(){if(window.location.hash.search(i)==-1&&window.location.hash.search(h)!=-1){var D=parseInt(window.location.hash.replace("#"+h,""));var C=a("#"+D);if(C.length==1){window.location.hash=D;window.location.hash=h+D;y()}else{var B=new jQuery.ias.util();B.forceScrollTop(function(){x(D)})}}else{y()}}function y(){jQuery.ias({container:g,item:n,pagination:q,next:p,customLoaderProc:function(){},loader:"",history:false,paging:false,customLoadItems:function(C,B){o(C,B)},onRenderComplete:function(B){j(B,true)}})}function o(E,C,D){var B=[];a.ajax({url:E,type:"GET",timeout:10000,dataType:"html",beforeSend:function(){a("#infinite-scroll-load-more").show();a("#infinite-scroll-load-more span").show();a("#infinite-scroll-load-more a").hide();a("#infinite-scroll-load-more").showLoading()},success:function(F){container=a(g,F).eq(0);if(0==container.length){container=a(F).filter(g).eq(0)}if(container){container.find(n).each(function(){B.push(this)})}var G=a("#font-families-to-load-container",F).eq(0);if(0==G.length){G=a(F).filter("#font-families-to-load-container").eq(0)}if(G.length>0){B.push(G[0])}var I=a("#webfont-style",F).eq(0);if(0==I.length){I=a(F).filter("#webfont-style").eq(0)}if(I.length>0){var H=a('<div id="fonts-face-declaration" style="display: none;"></div>');H.html(I.html());B.push(H[0])}a("#infinite-scroll-load-more").hideLoading();a("#infinite-scroll-load-more").hide();if(C){C.call(this,F,B)}},error:function(){a("#infinite-scroll-load-more").hideLoading();a("#infinite-scroll-load-more span").hide();a("#infinite-scroll-load-more a").show();if(D){D.call(this)}}})}function j(B,C){if(C){m(B)}Fonts.Families.AttachSearchEvents(a(B),false);Fonts.Families.AttachSearchListItem(a(B).find(".results-toggler"))}function m(B){a(A,B).waypoint({offset:50,handler:function(){window.location.hash=h+this.id},onlyOnScroll:true,continuous:false})}function l(){a(z).waypoint({handler:function(){window.location.hash=i},onlyOnScroll:true,continuous:false})}w.ResetWaypoints=function(){a(A).waypoint("remove");a(A).waypoint("destroy");m(a(document))};k();a(function(){a("#infinite-scroll-load-more a").click(function(){jQuery.ias({refresh:true})});m(a(document));l()});return w}(jQuery));